"use strict";(self.webpackChunk_dagster_io_dagit_app=self.webpackChunk_dagster_io_dagit_app||[]).push([[960],{96391:function(e,n,t){t.d(n,{i:function(){return s}});var r=t(7838),i=t(325),o=t(39061),a=t(32289),s=function(e){var n=e.edges,t=e.highlighted,o=e.strokeWidth,s=void 0===o?4:o,c=e.baseColor,u=void 0===c?r.w.KeylineGray:c;return(0,a.jsxs)(i.Fragment,{children:[(0,a.jsx)(l,{color:u,edges:n,strokeWidth:s}),(0,a.jsx)(l,{color:r.w.Blue500,edges:n.filter((function(e){var n=e.fromId,r=e.toId;return t===n||t===r})),strokeWidth:s})]})},l=i.memo((function(e){var n=e.edges,t=e.color,r=e.strokeWidth;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("defs",{children:(0,a.jsx)("marker",{id:"arrow".concat(btoa(t)),viewBox:"0 0 8 10",refX:"1",refY:"5",markerUnits:"strokeWidth",markerWidth:r,orient:"auto",children:(0,a.jsx)("path",{d:"M 0 0 L 8 5 L 0 10 z",fill:t})})}),n.map((function(e,n){return(0,a.jsx)("path",{d:(0,o.cD)({source:e.from,target:e.to}),stroke:t,strokeWidth:r,fill:"none",markerEnd:"url(#arrow".concat(btoa(t),")")},n)}))]})}))},13253:function(e,n,t){t.d(n,{OK:function(){return tn},md:function(){return nn},CZ:function(){return en}});var r=t(47427),i=t(59019),o=t(85358),a=t(19065),s=t(95764),l=t(922),c=t(95550),u=t.n(c),d=t(89646),p=t(17912),f=t(32028),m=t(7838),h=t(50346),g=t(32030),y=t(51550),x=t.n(y),v=t(58891),j=t.n(v),b=t(40839),S=t.n(b),N=t(325),w=t(19102),C=t(78196),k=t(31522),E=t(11831),P=t(75453),_=t(23730),K=t(34595),I=t(14156),A=t(63579),Z=t(64451),O=t(37099),F=t(33902),M=t(32289),L=function(e){var n=e.assetKeys,t=e.preferredJobName,r=e.intent,i=void 0===r?"none":r,s=(0,A._5)().canLaunchPipelineExecution,l=(0,(0,Z.C)().useLaunchWithTelemetry)(),c=N.useState({type:"none"}),d=(0,a.Z)(c,2),p=d[0],f=d[1],m=(0,k.x)(),h=n.length>1?" (".concat(n.length,")"):"",g="Observe sources ".concat(h);if(!n.length)return(0,M.jsx)("span",{});if(!s.enabled)return(0,M.jsx)(E.u,{content:"You do not have permission to observe source assets",children:(0,M.jsx)(P.zx,{intent:i,icon:(0,M.jsx)(_.JO,{name:"observation"}),disabled:!0,children:g})});var y=function(){var e=(0,o.Z)(u().mark((function e(r){var i,o,a,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("loading"!==p.type){e.next=2;break}return e.abrupt("return");case 2:return f({type:"loading"}),e.next=5,m.query({query:C.U2,variables:{assetKeys:n.map((function(e){return{path:e.path}}))}});case 5:if(!(i=e.sent).data.assetNodeDefinitionCollisions.length){e.next=10;break}return(0,I._)((0,C.VF)(i.data)),f({type:"none"}),e.abrupt("return");case 10:return o=i.data.assetNodes,a=r.shiftKey,e.next=14,R(m,o,a,t);case 14:if("error"!==(s=e.sent).type){e.next=19;break}return(0,I._)({title:"Unable to observe",body:s.error}),f({type:"none"}),e.abrupt("return");case 19:if("single-run"!==s.type){e.next=25;break}return e.next=22,l({executionParams:s.executionParams},"toast");case 22:f({type:"none"}),e.next=26;break;case 25:f(s);case 26:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,M.jsx)(P.zx,{intent:i,onClick:y,icon:"loading"===p.type?(0,M.jsx)(K.$,{purpose:"body-text"}):(0,M.jsx)(_.JO,{name:"observation"}),children:g})};function R(e,n,t,r){return T.apply(this,arguments)}function T(){return(T=(0,o.Z)(u().mark((function e(n,t,r,i){var o,a,s,l,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.some((function(e){return!e.isSource}))){e.next=2;break}return e.abrupt("return",{type:"error",error:"One or more non-source assets are selected and cannot be observed."});case 2:if(!t.some((function(e){return!e.isObservable}))){e.next=4;break}return e.abrupt("return",{type:"error",error:"One or more of the selected source assets are unversioned and cannot be observed."});case 4:if(s=(0,O.kQ)((null===(o=t[0])||void 0===o?void 0:o.repository.name)||"",(null===(a=t[0])||void 0===a?void 0:a.repository.location.name)||""),l=(0,F.Uz)(s),t.every((function(e){return e.repository.name===s.name&&e.repository.location.name===s.location}))){e.next=8;break}return e.abrupt("return",{type:"error",error:"Assets must be in ".concat(l," to be materialized together.")});case 8:if(c=(0,C.ZP)(t,i)){e.next=11;break}return e.abrupt("return",{type:"error",error:"Assets must be in the same job to be observed together."});case 11:return e.abrupt("return",{type:"single-run",executionParams:(0,C.Ot)(s,c,t,[])});case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var z,D,G,$,B,U=t(85532),q=t(76867),V=t(66956),J=t(2112),Q=t(19910),Y=t(65164),H=t(50741),W=t(96391),X=t(99500),ee=t(73701),ne=t(3159),te=t(79082),re=t(57872),ie=t(80339),oe=function(e){var n=e.pipelineSelector,t=(0,ee.a)(ae,{partialRefetch:!0,variables:{pipelineSelector:n}}),r=n.repositoryName,i=n.repositoryLocationName,o=(0,O.kQ)(r,i);return(0,M.jsx)(H.g,{queryResult:t,children:function(e){var n=e.pipelineSnapshotOrError;return"PipelineSnapshot"!==n.__typename?(0,M.jsx)(re.Q,{isGraph:!0,result:n,repoAddress:o}):(0,M.jsx)(ie.S,{container:n,repoAddress:o})}})},ae=(0,ne.Ps)(z||(z=(0,X.Z)(["\n  query AssetGraphSidebarQuery($pipelineSelector: PipelineSelector!) {\n    pipelineSnapshotOrError(activePipelineSelector: $pipelineSelector) {\n      ... on PipelineSnapshot {\n        id\n        ...SidebarRootContainerFragment\n      }\n      ... on PipelineNotFoundError {\n        message\n      }\n      ... on PipelineSnapshotNotFoundError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"])),ie.q,te.B),se=t(9),le=t(11540),ce=t(38376),ue=t(71725),de=t(74549),pe=t(34449),fe=t(61460),me=t(7713),he=t(12745),ge=t(53857),ye=t(91847),xe=t(4041),ve=t(79986),je=t(73522),be=t(13885),Se=t(6466),Ne=t(55113),we=t(55419),Ce=t(39061),ke=t(90815),Ee=t(4735),Pe=t(62e3),_e=t(55752),Ke=t(76336),Ie=t(52598),Ae=function(e){var n=e.latest,t=e.liveData,r="Run"===(null===n||void 0===n?void 0:n.runOrError.__typename)?null===n||void 0===n?void 0:n.runOrError:null,i=null===r||void 0===r?void 0:r.repositoryOrigin,o=i?(0,O.kQ)(i.repositoryName,i.repositoryLocationName):null,a=(0,Ke.Ux)(o);if(!n)return(0,M.jsx)(g.x,{padding:{top:16,bottom:32},children:(0,M.jsx)(d.t,{icon:"materialization",title:"No materializations",description:"No materializations were found for this asset."})});var s=n,l=null===s||void 0===s?void 0:s.assetLineage;return(0,M.jsx)(Ze,{children:(0,M.jsxs)("tbody",{children:[(0,M.jsxs)("tr",{children:[(0,M.jsx)("td",{children:"Run"}),(0,M.jsx)("td",{children:r?(0,M.jsxs)("div",{children:[(0,M.jsxs)(g.x,{children:["Run ",(0,M.jsx)(de.rU,{to:"/runs/".concat(s.runId,"?timestamp=").concat(s.timestamp),children:(0,M.jsx)(he.fv,{children:(0,_e.EI)({runId:s.runId})})})]}),!(0,Ce.pv)(r.pipelineName)&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(g.x,{padding:{left:8,top:4},children:(0,M.jsx)(Pe.h,{showIcon:!0,pipelineName:r.pipelineName,pipelineHrefContext:o||"repo-unknown",snapshotId:r.pipelineSnapshotId,isJob:(0,Ke.E8)(a,r.pipelineName)})}),(0,M.jsxs)(Se.Z,{direction:"row",padding:{left:8},spacing:8,alignItems:"center",children:[(0,M.jsx)(_.JO,{name:"linear_scale",color:m.w.Gray400}),(0,M.jsx)(de.rU,{to:(0,_e.tA)(r,s),children:s.stepKey})]})]})]}):"No materialization events"}),(0,M.jsx)("td",{})]}),null!==n&&void 0!==n&&n.partition?(0,M.jsxs)("tr",{children:[(0,M.jsx)("td",{children:"Partition"}),(0,M.jsx)("td",{children:n?n.partition:"No materialization events"}),(0,M.jsx)("td",{})]}):null,(0,M.jsxs)("tr",{children:[(0,M.jsx)("td",{children:"Timestamp"}),(0,M.jsx)("td",{children:(0,M.jsxs)(g.x,{flex:{gap:8,alignItems:"center"},children:[s?(0,M.jsx)(we.E,{timestamp:{ms:Number(s.timestamp)}}):"No materialization events",t&&(0,M.jsx)(ke.T3,{liveData:t})]})}),(0,M.jsx)("td",{})]}),null!==l&&void 0!==l&&l.length?(0,M.jsxs)("tr",{children:[(0,M.jsx)("td",{children:"Parent assets"}),(0,M.jsx)("td",{children:(0,M.jsx)(Ie.i,{elements:l,timestamp:s.timestamp})}),(0,M.jsx)("td",{})]}):null,null===s||void 0===s?void 0:s.metadataEntries.map((function(e){return(0,M.jsxs)("tr",{children:[(0,M.jsx)("td",{children:e.label}),(0,M.jsx)("td",{children:(0,M.jsx)(Ee.BL,{entry:e,expandSmallValues:!0,repoLocation:null===o||void 0===o?void 0:o.location})}),(0,M.jsx)("td",{children:e.description})]},"metadata-".concat(e.label))}))]})})},Ze=(0,l.ZP)(Ne.i).withConfig({displayName:"LastMaterializationMetadata__MetadataTable",componentId:"sc-1u4xf4p-0"})(["td:first-child{white-space:nowrap;width:1px;max-width:400px;word-break:break-word;overflow:hidden;text-overflow:ellipsis;}"]),Oe=((0,ne.Ps)(D||(D=(0,X.Z)(["\n  fragment LatestMaterializationMetadataFragment on MaterializationEvent {\n    partition\n    tags {\n      key\n      value\n    }\n    runOrError {\n      ... on PipelineRun {\n        id\n        runId\n        mode\n        pipelineName\n        pipelineSnapshotId\n        repositoryOrigin {\n          id\n          repositoryName\n          repositoryLocationName\n        }\n      }\n    }\n    runId\n    timestamp\n    stepKey\n    metadataEntries {\n      ...MetadataEntryFragment\n    }\n    assetLineage {\n      assetKey {\n        path\n      }\n      partitions\n    }\n  }\n\n  ","\n"])),Ee.it),t(33682)),Fe=t(66855),Me=function(e){var n=e.assetKey,t=e.assetLastMaterializedAt,r=e.assetHasDefinedPartitions,i=e.liveData,o=(0,Fe.fE)(n,{},{assetHasDefinedPartitions:r}),a=o.materializations,s=o.observations,l=o.loadedPartitionKeys,c=o.loading,u=o.refetch,d=o.xAxis,p=(0,Oe.L)(d,a,s,l);return N.useEffect((function(){u()}),[t,u]),c?(0,M.jsx)(g.x,{padding:{vertical:20},children:(0,M.jsx)(K.$,{purpose:"section"})}):(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(be.b,{liveData:i,border:{side:"top",width:1,color:m.w.KeylineGray}}),(0,M.jsx)(je.j,{liveData:i,border:{side:"top",width:1,color:m.w.KeylineGray}}),(null===i||void 0===i?void 0:i.freshnessPolicy)&&(0,M.jsx)(ge.pC,{title:"Freshness policy",children:(0,M.jsxs)(g.x,{margin:{horizontal:24,vertical:12},flex:{gap:12,alignItems:"center"},children:[(0,M.jsx)(ve.vy,{liveData:i}),(0,M.jsx)(he.uT,{children:(0,ve.jY)(i.freshnessPolicy)})]})}),(0,M.jsx)(ge.pC,{title:"Materialization in last run",children:a[0]?(0,M.jsx)("div",{style:{margin:-1,maxWidth:"100%",overflowX:"auto"},children:(0,M.jsx)(Ae,{latest:a[0],liveData:i})}):(0,M.jsx)(g.x,{margin:{horizontal:24,vertical:12},style:{color:m.w.Gray500,fontSize:"0.8rem"},children:"No materializations found"})}),(0,M.jsx)(ge.pC,{title:"Materialization system tags",collapsedByDefault:!0,children:a[0]?(0,M.jsx)("div",{style:{margin:-1,maxWidth:"100%",overflowX:"auto"},children:(0,M.jsx)(ye.M,{event:a[0],paddingLeft:24})}):(0,M.jsx)(g.x,{margin:{horizontal:24,vertical:12},style:{color:m.w.Gray500,fontSize:"0.8rem"},children:"No materializations found"})}),(0,M.jsx)(ge.pC,{title:"Metadata plots",children:(0,M.jsx)(xe.l,{xAxis:d,asSidebarSection:!0,groups:p,columnCount:1})})]})},Le=t(11936),Re=t(95609),Te=t(77171),ze=t(47619),De=t(33208),Ge=t(10922),$e=t(53218),Be=t(14848),Ue=function(e){var n,t,r,i=e.assetNode,o=e.liveData,a=i.assetKey,s=(0,ze.mR)([a]),l=(0,ee.a)(Ye,{variables:{assetKey:{path:a.path}}}).data,c=(o||{}).lastMaterialization,u="AssetNode"===(null===l||void 0===l?void 0:l.assetNodeOrError.__typename)?l.assetNodeOrError:null;if(!u)return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(Ve,{assetKey:a}),(0,M.jsx)(g.x,{padding:{vertical:64},children:(0,M.jsx)(K.$,{purpose:"section"})})]});var d=(0,O.kQ)(u.repository.name,u.repository.location.name),p=(0,me.U6)(u),f=p.assetMetadata,h=p.assetType,y=h||f.length>0,x=null===(n=u.configField)||void 0===n?void 0:n.configType,v=(null===(t=u.op)||void 0===t?void 0:t.metadata)&&(0,$e.D)(u.op.metadata);return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(Ve,{assetKey:a,opName:null===(r=u.op)||void 0===r?void 0:r.name}),(0,M.jsx)(fe.N,{assetKey:a,loadedFromRepo:d,padded:!1}),(0,M.jsx)(Me,{assetKey:a,assetLastMaterializedAt:null===c||void 0===c?void 0:c.timestamp,assetHasDefinedPartitions:!!u.partitionDefinition,liveData:o}),(0,M.jsx)("div",{style:{borderBottom:"2px solid ".concat(m.w.Gray300)}}),(0,Ce.Pz)(i)&&(0,M.jsx)(Le.x,{}),(u.description||(null===v||void 0===v?void 0:v.SidebarComponent)||!y)&&(0,M.jsxs)(ge.pC,{title:"Description",children:[(0,M.jsx)(g.x,{padding:{vertical:16,horizontal:24},children:(0,M.jsx)(Ge.d,{description:u.description||"No description provided."})}),u.op&&(null===v||void 0===v?void 0:v.SidebarComponent)&&(0,M.jsx)(g.x,{padding:{bottom:16,horizontal:24},children:(0,M.jsx)(v.SidebarComponent,{definition:u.op,repoAddress:d})})]}),u.opVersion&&(0,M.jsx)(ge.pC,{title:"Code Version",children:(0,M.jsx)(g.x,{padding:{vertical:16,horizontal:24},children:(0,M.jsx)(Be.G,{children:u.opVersion})})}),x&&(0,M.jsx)(ge.pC,{title:"Config",children:(0,M.jsx)(g.x,{padding:{vertical:16,horizontal:24},children:(0,M.jsx)(ue.L,{type:x,typesInScope:x.recursiveConfigTypes})})}),f.length>0&&(0,M.jsx)(ge.pC,{title:"Metadata",children:(0,M.jsx)(me.mQ,{assetMetadata:f,repoLocation:null===d||void 0===d?void 0:d.location})}),h&&(0,M.jsx)(qe,{assetType:h}),u.partitionDefinition&&(0,M.jsx)(ge.pC,{title:"Partitions",children:(0,M.jsxs)(g.x,{padding:{vertical:16,horizontal:24},flex:{direction:"column",gap:16},children:[(0,M.jsx)("p",{children:u.partitionDefinition.description}),(0,M.jsx)(Re.m,{assetKey:u.assetKey,data:s})]})})]})},qe=function(e){var n=e.assetType;return(0,M.jsx)(ge.pC,{title:"Type",children:(0,M.jsx)(De.Ot,{type:n})})},Ve=function(e){var n=e.assetKey,t=e.opName,r=(0,Ce.ll)(n);return(0,M.jsxs)(g.x,{flex:{gap:4,direction:"column"},margin:{left:24,right:12,vertical:16},children:[(0,M.jsxs)(ge.R8,{style:{marginBottom:0,display:"flex",justifyContent:"space-between",flexWrap:"wrap"},children:[(0,M.jsx)(g.x,{children:r}),r!==t?(0,M.jsxs)(g.x,{style:{opacity:.5},flex:{gap:6,alignItems:"center"},children:[(0,M.jsx)(_.JO,{name:"op",size:16}),t]}):void 0]}),(0,M.jsxs)(Je,{to:(0,Te.p)(n),children:["View in Asset Catalog ",(0,M.jsx)(_.JO,{name:"open_in_new",color:m.w.Link})]})]})},Je=(0,l.ZP)(de.rU).withConfig({displayName:"SidebarAssetInfo__AssetCatalogLink",componentId:"qra0a8-0"})(["display:flex;gap:5px;padding:6px;margin:-6px;align-items:center;white-space:nowrap;"]),Qe=(0,ne.Ps)(G||(G=(0,X.Z)(["\n  fragment SidebarAssetFragment on AssetNode {\n    id\n    description\n    ...AssetNodeConfigFragment\n    metadataEntries {\n      ...MetadataEntryFragment\n    }\n    partitionDefinition {\n      description\n    }\n    assetKey {\n      path\n    }\n    op {\n      name\n      description\n      metadata {\n        key\n        value\n      }\n    }\n    opVersion\n    repository {\n      id\n      name\n      location {\n        id\n        name\n      }\n    }\n\n    ...AssetNodeOpMetadataFragment\n  }\n\n  ","\n  ","\n  ","\n"])),pe.r,Ee.it,me.Ws),Ye=(0,ne.Ps)($||($=(0,X.Z)(["\n  query SidebarAssetQuery($assetKey: AssetKeyInput!) {\n    assetNodeOrError(assetKey: $assetKey) {\n      __typename\n      ... on AssetNode {\n        id\n        ...SidebarAssetFragment\n      }\n    }\n  }\n\n  ","\n"])),Qe),He=t(18819);var We=(0,ne.Ps)(B||(B=(0,X.Z)(["\n  query AssetForNavigationQuery($key: AssetKeyInput!) {\n    assetOrError(assetKey: $key) {\n      __typename\n      ... on Asset {\n        id\n        definition {\n          id\n          opNames\n          jobNames\n          groupName\n          repository {\n            id\n            name\n            location {\n              id\n              name\n            }\n          }\n        }\n      }\n    }\n  }\n"]))),Xe=t(64424),en=.6,nn=.15,tn=function(e){var n=(0,He.u)(e.explorerPath.opsQuery,e.fetchOptions),t=n.fetchResult,r=n.assetGraphData,i=n.graphQueryItems,o=n.graphAssetKeys,a=n.allAssetKeys,l=n.applyingEmptyDefault,c=(0,Xe.l)(o),u=c.liveDataByNode,p=c.liveDataRefreshState,f=c.runWatchers;return(0,M.jsx)(H.g,{allowStaleData:!0,queryResult:t,children:function(){return r&&a?(0,Ce.vm)(r)?(0,M.jsx)(d.t,{icon:"error",title:"Cycle detected",description:"Assets dependencies form a cycle"}):(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(rn,(0,s.Z)({assetGraphData:r,allAssetKeys:a,graphQueryItems:i,applyingEmptyDefault:l,liveDataRefreshState:p,liveDataByNode:u},e),e.explorerPath.pipelineName),f]}):(0,M.jsx)(d.t,{icon:"error",title:"Query Error"})}})},rn=function(e){var n=e.options,t=e.setOptions,r=e.explorerPath,l=e.onChangeExplorerPath,c=e.onNavigateToSourceAssetNode,d=e.liveDataRefreshState,y=e.liveDataByNode,v=e.assetGraphData,b=e.graphQueryItems,E=e.applyingEmptyDefault,P=e.fetchOptions,_=e.fetchOptionFilters,K=function(){var e=(0,k.x)();return N.useCallback(function(){var n=(0,o.Z)(u().mark((function n(t){var r,i,o;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.query({query:We,variables:{key:t}});case 2:if(r=n.sent,"Asset"!==(null===(i=r.data)||void 0===i?void 0:i.assetOrError.__typename)||null===i||void 0===i||!i.assetOrError.definition){n.next=7;break}return o=i.assetOrError.definition,n.abrupt("return",{assetKey:t,opNames:o.opNames,jobName:o.jobNames.find((function(e){return!(0,Ce.pv)(e)}))||null,groupName:o.groupName,repoAddress:o.repository?(0,O.kQ)(o.repository.name,o.repository.location.name):null});case 7:return n.abrupt("return",{assetKey:t,opNames:[],jobName:null,groupName:null,repoAddress:null});case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[e])}(),I=(0,q.oJ)(v),A=I.layout,Z=I.loading,F=I.async,R=N.useRef(),T=N.useState(null),z=(0,a.Z)(T,2),D=z[0],G=z[1],$=r.opNames[r.opNames.length-1].split(","),B=Object.values(v.nodes).filter((function(e){return $.includes((0,Ce.Je)(e.definition.assetKey))})),H=B[B.length-1],X=B.map((function(e){return e.definition})),ee=E?b.map((function(e){return e.node})):Object.values(v.nodes).map((function(e){return e.definition})),ne=N.useCallback(function(){var e=(0,o.Z)(u().mark((function e(n,t,o){var a,d,p,f,m,h,g,y;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.stopPropagation(),a=(0,Ce.Je)(t),d=null===o||void 0===o?void 0:o.definition){e.next=9;break}return e.t0=c,e.next=7,K(t);case 7:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 9:p=a,(n.shiftKey||n.metaKey)&&(f=[a],n.shiftKey&&H&&o&&(m=sn({graph:v,from:H,to:o})).length&&(f=m),h=r.opNames[0].split(","),p=(h.includes(a)?S()(h,a):j()([].concat((0,i.Z)(h),(0,i.Z)(f)))).join(",")),(g=null===A||void 0===A?void 0:A.nodes[p[p.length-1]])&&(null===(y=R.current)||void 0===y||y.zoomToSVGCoords(g.bounds.x,g.bounds.y,!0)),l((0,s.Z)((0,s.Z)({},r),{},{opNames:[p],opsQuery:d?r.opsQuery:"".concat(r.opsQuery,',++"').concat(a,'"++'),pipelineName:r.pipelineName}),"replace");case 14:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}(),[r,l,c,K,H,v,A]),te=N.useState(null),re=(0,a.Z)(te,2),ie=re[0],ae=re[1],ue=ie!==A;N.useEffect((function(){ue&&A&&R.current&&(H?R.current.focus():R.current.autocenter(!1),ae(A))}),[ue,H,A,R]);var de=!(!A||!Object.keys(A.groups).length);return(0,M.jsx)(p.OS,{identifier:"explorer",firstInitialPercent:70,firstMinSize:400,first:(0,M.jsxs)(f.S,{region:"graph",children:[0===b.length?(0,M.jsx)(Q.LS,{nodeType:"asset",isGraph:!0}):E?(0,M.jsx)(Q.K4,{nodeType:"asset"}):0===Object.keys(v.nodes).length?(0,M.jsx)(Q.VQ,{nodeType:"asset"}):void 0,Z||!A?(0,M.jsx)(Q.W_,{async:F,nodeType:"asset"}):(0,M.jsx)(U.l,{ref:function(e){return R.current=e||void 0},interactor:U.l.Interactors.PanAndZoom,graphWidth:A.width,graphHeight:A.height,graphHasNoMinimumZoom:de,onClick:function(){return l((0,s.Z)((0,s.Z)({},r),{},{pipelineName:r.pipelineName,opNames:[]}),"replace")},onArrowKeyDown:function(e,n){if(A){var t=(0,s.Z)((0,s.Z)({},A),{},{nodes:x()(A.nodes,(function(e){var n;return!(null===(n=v.nodes[e.id])||void 0===n||!n.definition)}))}),r=(0,V.mh)(t,H.id,n),i=r&&v.nodes[r];i&&R.current&&(ne(e,i.assetKey,i),R.current.zoomToSVGBox(A.nodes[r].bounds,!0))}},onDoubleClick:function(e){var n;null===(n=R.current)||void 0===n||n.autocenter(!0),e.stopPropagation()},maxZoom:1.2,maxAutocenterZoom:1,children:function(e){var n=e.scale;return(0,M.jsxs)(on,{width:A.width,height:A.height,children:[(0,M.jsx)(W.i,{highlighted:D,edges:A.edges,strokeWidth:de?Math.max(4,3/n):4,baseColor:de&&n<nn?m.w.Gray400:m.w.KeylineGray}),Object.values(A.groups).sort((function(e,n){return e.id.length-n.id.length})).map((function(e){return(0,M.jsx)("foreignObject",(0,s.Z)((0,s.Z)({},e.bounds),{},{onDoubleClick:function(n){if(R.current){var t=R.current.scaleForSVGBounds(e.bounds.width,e.bounds.height);R.current.zoomToSVGBox(e.bounds,!0,.9*t),n.stopPropagation()}},children:(0,M.jsx)(se.l,{group:e,scale:n})}),e.id)})),Object.values(A.nodes).map((function(e){var t=e.id,r=e.bounds,i=v.nodes[t],o=JSON.parse(t);if(!(de&&n<nn))return(0,N.createElement)("foreignObject",(0,s.Z)((0,s.Z)({},r),{},{key:t,onMouseEnter:function(){return G(t)},onMouseLeave:function(){return G(null)},onClick:function(e){return ne(e,{path:o},i)},onDoubleClick:function(e){var n;null===(n=R.current)||void 0===n||n.zoomToSVGBox(r,!0,1.2),e.stopPropagation()},style:{overflow:"visible"}}),i?n<en?(0,M.jsx)(le.t$,{definition:i.definition,liveData:y[i.id],selected:B.includes(i)}):(0,M.jsx)(le.p4,{definition:i.definition,liveData:y[i.id],selected:B.includes(i)}):(0,M.jsx)(ce.w,{assetKey:{path:o}}))}))]})}}),t&&(0,M.jsx)(J.cY,{children:(0,M.jsx)(h.X,{format:"switch",label:"View as Asset Graph",checked:n.preferAssetRendering,onChange:function(){var e;l((0,s.Z)((0,s.Z)({},r),{},{opNames:(null===(e=X[0])||void 0===e?void 0:e.opNames)||[]}),"replace"),t((0,s.Z)((0,s.Z)({},n),{},{preferAssetRendering:!n.preferAssetRendering}))}})}),(0,M.jsx)(g.x,{flex:{direction:"column",alignItems:"flex-end",gap:8},style:{position:"absolute",right:12,top:8},children:(0,M.jsxs)(g.x,{flex:{alignItems:"center",gap:12},children:[(0,M.jsx)(w.xi,{refreshState:d,dataDescription:"materializations"}),(0,M.jsx)(L,{preferredJobName:r.pipelineName,assetKeys:(X.length?X:ee).filter((function(e){return e.isObservable})).map((function(e){return e.assetKey}))}),(0,M.jsx)(C.XE,{preferredJobName:r.pipelineName,liveDataForStale:y,scope:X.length?{selected:X}:{all:ee}})]})}),(0,M.jsxs)(J.U0,{children:[_,(0,M.jsx)(Y.j,{items:b,value:r.opsQuery,placeholder:"Type an asset subset\u2026",onChange:function(e){return l((0,s.Z)((0,s.Z)({},r),{},{opsQuery:e}),"replace")},popoverPosition:"bottom-left"})]})]}),second:1===B.length&&B[0]?(0,M.jsx)(J.Ui,{children:(0,M.jsx)(J.zI,{children:(0,M.jsx)(f.S,{region:"asset sidebar",resetErrorOnChange:[B[0].id],children:(0,M.jsx)(Ue,{assetNode:B[0],liveData:y[B[0].id]})})})}):P.pipelineSelector?(0,M.jsx)(J.Ui,{children:(0,M.jsx)(J.zI,{children:(0,M.jsx)(f.S,{region:"asset job sidebar",children:(0,M.jsx)(oe,{pipelineSelector:P.pipelineSelector})})})}):null})},on=l.ZP.svg.withConfig({displayName:"AssetGraphExplorer__SVGContainer",componentId:"hnrxmo-0"})(["overflow:visible;border-radius:0;"]),an=function(e){for(var n=e.graph,t=e.from,r=e.to,o=[t];o.length;){var a=o.pop(),s=(0,i.Z)(Object.keys(n.downstream[a.id]||{})).map((function(e){return n.nodes[e]})).filter(Boolean);if(s.some((function(e){return e.id===r.id})))return"downstream";o.push.apply(o,(0,i.Z)(s))}return"upstream"},sn=function e(n){var t=n.graph,o=n.from,a=n.to,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!o)return[];if(o.id===a.id)return(0,i.Z)(a.definition.opNames);if(0===s.length&&"upstream"===an({graph:t,from:o,to:a})){var l=[a,o];o=l[0],a=l[1]}var c,u=(0,i.Z)(Object.keys(t.downstream[o.id]||{})).map((function(e){return t.nodes[e]})).filter(Boolean),d=[],p=(0,r.Z)(u);try{for(p.s();!(c=p.n()).done;){var f=c.value;if(!s.includes(f.id)){var m=e({graph:t,from:f,to:a},[].concat((0,i.Z)(s),[o.id]));m.length&&d.push.apply(d,(0,i.Z)(o.definition.opNames).concat((0,i.Z)(m)))}}}catch(h){p.e(h)}finally{p.f()}return j()(d)}},9:function(e,n,t){t.d(n,{l:function(){return h}});var r=t(922),i=t(32030),o=t(12745),a=t(23730),s=t(7838),l=t(8546),c=(t(325),t(74549)),u=t(76341),d=t(37099),p=t(25582),f=t(13253),m=t(32289),h=function(e){var n=e.group,t=e.scale,r=n.repositoryLocationName,h=n.repositoryDisambiguationRequired,x=n.repositoryName,v=n.groupName;return(0,m.jsxs)("div",{style:{position:"relative",width:"100%",height:"100%"},children:[t>f.md&&(0,m.jsx)(i.x,{flex:{alignItems:"flex-end"},style:{height:70},children:(0,m.jsxs)(o.fv,{style:{fontWeight:600,userSelect:"none",fontSize:t>f.CZ?"16px":"32px",display:"flex",gap:6},children:[(0,m.jsx)(a.JO,{name:"asset_group",color:s.w.Gray400,size:t>f.CZ?20:48}),(0,m.jsxs)(i.x,{flex:{direction:"column"},children:[(0,m.jsx)(c.rU,{style:{color:s.w.Gray400},onClick:function(e){return e.stopPropagation()},to:(0,p.rO)(x,r,"/asset-groups/".concat(v)),children:v}),h&&(0,m.jsx)(y,{style:{marginBottom:"0.5em"},children:(0,u.R9)((0,d.At)(x,r),{maxLength:45})})]})]})}),(0,m.jsx)(g,{style:{inset:0,top:75,position:"absolute",background:t<f.md?"rgba(234, 234, 234, 1)":"rgba(217, 217, 217, 0.25)"}}),t<f.md?(0,m.jsx)(i.x,{flex:{justifyContent:"center",alignItems:"center"},style:{inset:0,position:"absolute",fontSize:"".concat(12/t,"px"),userSelect:"none"},children:(0,m.jsxs)(i.x,{flex:{direction:"column",alignItems:"center"},style:{fontWeight:600,fontFamily:l.b.monospace},children:[v,h&&(0,m.jsx)(y,{children:(0,u.R9)((0,d.At)(x,r),{maxLength:45})})]})}):void 0]})},g=r.ZP.div.withConfig({displayName:"AssetGroupNode__GroupOutline",componentId:"osbgfp-0"})(["width:100%;border-radius:10px;pointer-events:none;"]),y=r.ZP.div.withConfig({displayName:"AssetGroupNode__GroupRepoName",componentId:"osbgfp-1"})(["font-size:0.8em;line-height:0.6em;white-space:nowrap;color:",";"],s.w.Gray400)},11540:function(e,n,t){t.d(n,{zU:function(){return U},oR:function(){return B},p4:function(){return R},t$:function(){return $}});var r,i,o=t(99500),a=t(922),s=t(3159),l=t(23730),c=t(7838),u=t(32030),d=t(34595),p=t(12745),f=t(8546),m=t(90428),h=t.n(m),g=t(325),y=t(74549),x=t(76341),v=t(79986),j=t(90815),b=t(77171),S=t(6297),N=t(68156),w=t(68436),C=t.n(w),k=t(3726),E=t.n(k),P=t(24612),_=t.n(P),K=t(1962),I=t.n(K),A=E()().use(_()).use(I()),Z=new(C())({max:500}),O=function(e){var n=Z.get(e);if(n)return n;var t=A.processSync(e).toString().replace(/\\/g,"").trim();return Z.set(e,t),t},F=t(79714),M=t(93523),L=t(32289),R=g.memo((function(e){var n=e.definition,t=e.selected,r=e.liveData,i=n.assetKey.path[n.assetKey.path.length-1],o=n.isSource;return(0,L.jsx)(q,{children:(0,L.jsx)(V,{$selected:t,children:(0,L.jsxs)(Q,{$selected:t,$isSource:o,children:[(0,L.jsxs)(Y,{$isSource:o,children:[(0,L.jsx)("span",{style:{marginTop:1},children:(0,L.jsx)(l.JO,{name:o?"source_asset":"asset"})}),(0,L.jsx)("div",{style:{overflow:"hidden",textOverflow:"ellipsis"},children:(0,x.R9)(i,{maxLength:M.ASSET_NODE_NAME_MAX_LENGTH})}),(0,L.jsx)("div",{style:{flex:1}})]}),n.description?(0,L.jsx)(ee,{$color:c.w.Gray800,children:O(n.description).split("\n")[0]}):(0,L.jsx)(ee,{$color:c.w.Gray400,children:"No description"}),o&&!n.isObservable?null:(0,L.jsx)(z,{definition:n,liveData:r}),(0,L.jsx)(S.hG,{definition:n,style:{right:-2,paddingTop:7}})]})})})}),h()),T=function(e){var n=e.background,t=e.children;return(0,L.jsx)(u.x,{padding:{horizontal:8},style:{borderBottomLeftRadius:6,borderBottomRightRadius:6,whiteSpace:"nowrap",lineHeight:"12px",height:24},flex:{justifyContent:"space-between",alignItems:"center",gap:6},background:n,children:t})},z=function(e){var n=G(e);return(0,L.jsx)(T,{background:n.background,children:n.content})};function D(e){return(e.opNames.length?e.opNames[0]:null)||""}function G(e){var n=e.definition,t=e.liveData;if(!t)return{background:c.w.Gray100,border:c.w.Gray300,content:(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(d.$,{purpose:"caption-text"}),(0,L.jsx)(p.YS,{style:{flex:1},color:c.w.Gray800,children:"Loading..."})]})};var r=t.lastMaterialization,i=t.runWhichFailedToMaterialize,o=t.inProgressRunIds,a=t.unstartedRunIds,s=o[0]||a[0],l=(0,v.Tx)(t);if(n.isSource)return s?{background:c.w.Gray100,border:c.w.Gray300,content:(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(F.aC,{liveData:t}),(0,L.jsx)(p.YS,{style:{flex:1},color:c.w.Gray800,children:"Observing..."}),(0,L.jsx)(F.Tj,{runId:s})]})}:null!==t&&void 0!==t&&t.lastObservation?{background:c.w.Gray100,border:c.w.Gray300,content:(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(p.YS,{children:"Observed"}),(0,L.jsx)(p.YS,{style:{textAlign:"right"},children:(0,L.jsx)(F.Tj,{runId:t.lastObservation.runId,event:{stepKey:D(n),timestamp:t.lastObservation.timestamp},children:(0,L.jsx)(N.v,{timestamp:Number(t.lastObservation.timestamp)/1e3,timeFormat:{showSeconds:!1,showTimezone:!1}})})})]})}:{background:c.w.Gray100,border:c.w.Gray300,content:(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(p.YS,{children:"Never observed"}),(0,L.jsx)(p.YS,{children:"\u2013"})]})};if(s)return{background:c.w.Blue50,border:c.w.Blue500,content:(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(F.aC,{liveData:t}),(0,L.jsx)(p.YS,{style:{flex:1},color:c.w.Gray800,children:"Materializing..."}),(0,L.jsx)(F.Tj,{runId:s})]})};if(t.partitionStats){var u=t.partitionStats,f=u.numPartitions,m=f-u.numMaterialized;return{background:l?c.w.Red50:m?c.w.Yellow50:c.w.Green50,border:l?c.w.Red500:m?c.w.Yellow500:c.w.Green500,content:(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(p.YS,{color:l?c.w.Red700:m?c.w.Yellow700:c.w.Green700,children:"".concat(f.toLocaleString()," partitions")}),(0,L.jsx)(p.YS,{children:(0,L.jsx)(y.rU,{to:(0,b.p)(n.assetKey,{view:"partitions"}),target:"_blank",rel:"noreferrer",children:l?(0,v.Dn)(t.freshnessInfo.currentMinutesLate):"".concat(m.toLocaleString()," missing")})})]})}}var h=r?(0,L.jsx)(p.YS,{children:(0,L.jsx)(F.Tj,{runId:r.runId,event:{stepKey:D(n),timestamp:r.timestamp},children:(0,L.jsx)(N.v,{timestamp:Number(r.timestamp)/1e3,timeFormat:{showSeconds:!1,showTimezone:!1}})})}):void 0;return i||l?{background:c.w.Red50,border:c.w.Red500,content:(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(p.YS,{color:c.w.Red700,children:i&&l?"Failed (Late)":l?(0,v.Dn)(t.freshnessInfo.currentMinutesLate):"Failed"}),i?(0,L.jsx)(p.YS,{children:(0,L.jsx)(F.Tj,{runId:i.id,children:(0,L.jsx)(N.v,{timestamp:Number(i.endTime),timeFormat:{showSeconds:!1,showTimezone:!1}})})}):h]})}:r?!t.freshnessPolicy&&(0,j.KM)(t)?{background:c.w.Yellow50,border:c.w.Yellow500,content:(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(p.YS,{color:c.w.Yellow700,children:"Stale"}),h]})}:{background:c.w.Green50,border:c.w.Green500,content:(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(p.YS,{color:c.w.Green700,children:"Materialized"}),h]})}:{background:c.w.Yellow50,border:c.w.Yellow500,content:(0,L.jsx)(p.YS,{color:c.w.Yellow700,children:"Never materialized"})}}var $=function(e){var n=e.selected,t=e.definition,r=e.liveData,i=t.isSource,o=t.assetKey,a=G({definition:t,liveData:r}),s=a.border,l=a.background,c=o.path[o.path.length-1];return(0,L.jsx)(q,{children:(0,L.jsx)(H,{$selected:n,children:(0,L.jsxs)(W,{$selected:n,$isSource:i,$background:l,$border:s,children:[(0,L.jsx)("div",{style:{position:"absolute",bottom:6,left:6},children:(0,L.jsx)(F.aC,{liveData:r,purpose:"section"})}),(0,L.jsx)(X,{style:{fontSize:30},$isSource:i,children:(0,x.R9)(c,{maxLength:14})})]})})})},B=(0,s.Ps)(r||(r=(0,o.Z)(["\n  fragment AssetNodeLiveFragment on AssetNode {\n    id\n    opNames\n    repository {\n      id\n    }\n    assetKey {\n      path\n    }\n    assetMaterializations(limit: 1) {\n      ...AssetNodeLiveMaterialization\n    }\n    freshnessPolicy {\n      ...AssetNodeLiveFreshnessPolicy\n    }\n    freshnessInfo {\n      ...AssetNodeLiveFreshnessInfo\n    }\n    assetObservations(limit: 1) {\n      ...AssetNodeLiveObservation\n    }\n    currentLogicalVersion\n    projectedLogicalVersion\n    partitionStats {\n      numMaterialized\n      numPartitions\n    }\n  }\n\n  fragment AssetNodeLiveFreshnessPolicy on FreshnessPolicy {\n    maximumLagMinutes\n    cronSchedule\n  }\n\n  fragment AssetNodeLiveFreshnessInfo on AssetFreshnessInfo {\n    currentMinutesLate\n  }\n\n  fragment AssetNodeLiveMaterialization on MaterializationEvent {\n    timestamp\n    runId\n  }\n\n  fragment AssetNodeLiveObservation on ObservationEvent {\n    timestamp\n    runId\n  }\n"]))),U=(0,s.Ps)(i||(i=(0,o.Z)(["\n  fragment AssetNodeFragment on AssetNode {\n    id\n    graphName\n    jobNames\n    opNames\n    opVersion\n    description\n    computeKind\n    isPartitioned\n    isObservable\n    isSource\n    assetKey {\n      ...AssetNodeKey\n    }\n  }\n\n  fragment AssetNodeKey on AssetKey {\n    path\n  }\n"]))),q=a.ZP.div.withConfig({displayName:"AssetNode__AssetInsetForHoverEffect",componentId:"ja35mc-0"})(["padding:10px 4px 2px 4px;height:100%;"]),V=a.ZP.div.withConfig({displayName:"AssetNode__AssetNodeContainer",componentId:"ja35mc-1"})(["user-select:none;cursor:default;padding:4px;"]),J=a.ZP.span.withConfig({displayName:"AssetNode__AssetNodeShowOnHover",componentId:"ja35mc-2"})(["display:none;"]),Q=a.ZP.div.withConfig({displayName:"AssetNode__AssetNodeBox",componentId:"ja35mc-3"})(["",";",";background:",";border-radius:8px;position:relative;&:hover{box-shadow:rgba(0,0,0,0.12) 0px 2px 12px 0px;","{display:initial;}}"],(function(e){return e.$isSource?"border: 2px dashed ".concat(e.$selected?c.w.Gray600:c.w.Gray300):"border: 2px solid ".concat(e.$selected?c.w.Blue500:c.w.Blue200)}),(function(e){return e.$isSource?"outline: 3px solid ".concat(e.$selected?c.w.Gray300:"transparent"):"outline: 3px solid ".concat(e.$selected?c.w.Blue200:"transparent")}),c.w.White,J),Y=a.ZP.div.withConfig({displayName:"AssetNode__Name",componentId:"ja35mc-4"})(["display:flex;padding:3px 6px;background:",";font-family:",";border-top-left-radius:7px;border-top-right-radius:7px;font-weight:600;gap:4px;"],(function(e){return e.$isSource?c.w.Gray100:c.w.Blue50}),f.b.monospace),H=(0,a.ZP)(V).withConfig({displayName:"AssetNode__MinimalAssetNodeContainer",componentId:"ja35mc-5"})(["height:100%;"]),W=a.ZP.div.withConfig({displayName:"AssetNode__MinimalAssetNodeBox",componentId:"ja35mc-6"})(["background:",";",";",";border-radius:10px;position:relative;padding:4px;height:100%;min-height:46px;&:hover{box-shadow:rgba(0,0,0,0.12) 0px 2px 12px 0px;}"],(function(e){return e.$background}),(function(e){return e.$isSource?"border: 4px dashed ".concat(e.$selected?c.w.Gray500:e.$border):"border: 4px solid ".concat(e.$selected?c.w.Blue500:e.$border)}),(function(e){return e.$isSource?"outline: 8px solid ".concat(e.$selected?c.w.Gray300:"transparent"):"outline: 8px solid ".concat(e.$selected?c.w.Blue200:"transparent")})),X=(0,a.ZP)(Y).withConfig({displayName:"AssetNode__MinimalName",componentId:"ja35mc-7"})(["font-weight:600;white-space:nowrap;position:absolute;background:none;top:50%;left:50%;transform:translate(-50%,-50%);"]),ee=a.ZP.div.withConfig({displayName:"AssetNode__Description",componentId:"ja35mc-8"})(["padding:6px 8px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:",";border-top:1px solid ",";background:",";font-size:12px;"],(function(e){return e.$color}),c.w.Blue50,c.w.White)},79714:function(e,n,t){t.d(n,{aC:function(){return h},o9:function(){return g},Tj:function(){return y}});var r=t(11831),i=t(34595),o=t(32030),a=t(23730),s=t(7838),l=t(54268),c=t(12745),u=(t(325),t(74549)),d=t(79986),p=t(55752),f=t(39061),m=t(32289),h=function(e){var n,t,o=e.liveData,a=e.purpose,s=void 0===a?"body-text":a;return null!==o&&void 0!==o&&null!==(n=o.inProgressRunIds)&&void 0!==n&&n.length?(0,m.jsx)(r.u,{content:"A run is currently rematerializing this asset.",children:(0,m.jsx)(i.$,{purpose:s})}):null!==o&&void 0!==o&&null!==(t=o.unstartedRunIds)&&void 0!==t&&t.length?(0,m.jsx)(r.u,{content:"A run has started that will rematerialize this asset soon.",children:(0,m.jsx)(i.$,{purpose:s,stopped:!0})}):null},g=function(e){var n=e.liveData,t=e.includeFreshness,i=e.includeRunStatus,c=n||f.Se,u=c.lastMaterialization,g=c.unstartedRunIds,x=c.inProgressRunIds,v=c.runWhichFailedToMaterialize,j=c.stepKey,b=(null===x||void 0===x?void 0:x.length)>0?(0,m.jsxs)(o.x,{flex:{gap:4,alignItems:"center"},children:[i&&(0,m.jsx)(h,{liveData:n}),(0,m.jsx)(y,{runId:x[0]})]}):(null===g||void 0===g?void 0:g.length)>0?(0,m.jsxs)(o.x,{flex:{gap:4,alignItems:"center"},children:[i&&(0,m.jsx)(h,{liveData:n}),(0,m.jsx)(y,{runId:g[0]})]}):"Run"===(null===v||void 0===v?void 0:v.__typename)?(0,m.jsxs)(o.x,{flex:{gap:4,alignItems:"center"},children:[i&&(0,m.jsx)(r.u,{content:"Run ".concat((0,p.EI)({runId:v.id})," failed to materialize this asset"),children:(0,m.jsx)(a.JO,{name:"warning",color:s.w.Red500})}),(0,m.jsx)(y,{runId:v.id})]}):u?(0,m.jsx)(o.x,{flex:{gap:6,alignItems:"center"},children:(0,m.jsx)(y,{runId:u.runId,event:{stepKey:j,timestamp:u.timestamp}})}):void 0;return t?(0,m.jsxs)(o.x,{flex:{direction:"row",gap:4},children:[b?(0,m.jsx)(l.V,{children:b}):(0,m.jsx)("span",{children:"\u2013"}),n&&(0,m.jsx)(d.vy,{liveData:n,policyOnHover:!0})]}):b||(0,m.jsx)("span",{children:"\u2013"})},y=function(e){var n=e.runId,t=e.children,r=e.event;return(0,m.jsx)(u.rU,{to:r?(0,p.tA)({runId:n},r):"/runs/".concat(n),target:"_blank",rel:"noreferrer",children:t||(0,m.jsx)(c.aU,{children:(0,p.EI)({runId:n})})})}},38376:function(e,n,t){t.d(n,{w:function(){return p}});var r=t(922),i=t(23730),o=t(7838),a=t(8546),s=t(325),l=t(76341),c=t(39061),u=t(93523),d=t(32289),p=s.memo((function(e){var n=e.assetKey;return(0,d.jsxs)(f,{children:[(0,d.jsx)(i.JO,{name:"open_in_new",color:o.w.Link}),(0,d.jsx)("span",{className:"label",children:(0,l.R9)((0,c.ll)(n),{maxLength:u.ASSET_LINK_NAME_MAX_LENGTH})})]})})),f=r.ZP.div.withConfig({displayName:"ForeignNode__AssetNodeLinkContainer",componentId:"f3rzsb-0"})(["display:flex;padding:4px 8px 6px;line-height:30px;font-family:",";color:",";align-items:center;font-weight:600;gap:4px;&:hover .label{color:",";text-decoration:underline;}"],a.b.monospace,o.w.Link,o.w.Link)},18819:function(e,n,t){t.d(n,{u:function(){return v},B:function(){return S}});var r,i=t(99500),o=t(59019),a=t(47427),s=t(73701),l=t(3159),c=t(21663),u=t.n(c),d=t(18961),p=t.n(d),f=t(24083),m=t.n(f),h=t(325),g=t(25496),y=t(11540),x=t(39061);function v(e,n){var t,r=(0,s.a)(N,{notifyOnNetworkStatusChange:!0,variables:{pipelineSelector:n.pipelineSelector,groupSelector:n.groupSelector}}),i=null===(t=r.data)||void 0===t?void 0:t.assetNodes,o=h.useMemo((function(){if(void 0===i)return{graphAssetKeys:[],graphQueryItems:[],assetGraphData:null,applyingEmptyDefault:!1};var t=i;n.hideNodesMatching&&(t=m()(t,n.hideNodesMatching));var r=j(t),o=(0,g.V)(r,e),a=o.all,s=o.applyingEmptyDefault,l=(0,x.VZ)(a.map((function(e){return e.node})));return n.hideEdgesToNodesOutsideQuery&&b(l,i),{allAssetKeys:t.map((function(e){return e.assetKey})),graphAssetKeys:a.map((function(e){return{path:e.node.assetKey.path}})),assetGraphData:l,graphQueryItems:r,applyingEmptyDefault:s}}),[i,e,n.hideEdgesToNodesOutsideQuery,n.hideNodesMatching]);return{fetchResult:r,assetGraphData:o.assetGraphData,graphQueryItems:o.graphQueryItems,graphAssetKeys:o.graphAssetKeys,allAssetKeys:o.allAssetKeys,applyingEmptyDefault:o.applyingEmptyDefault}}var j=function(e){var n,t={},r=(0,a.Z)(e);try{for(r.s();!(n=r.n()).done;){var i=n.value,o=(0,x.Je)(i.assetKey);t[o]={node:i,name:o,inputs:i.dependencyKeys.map((function(e){return{dependsOn:[{solid:{name:(0,x.Je)(e)}}]}})),outputs:i.dependedByKeys.map((function(e){return{dependedBy:[{solid:{name:(0,x.Je)(e)}}]}}))}}}catch(s){r.e(s)}finally{r.f()}return Object.values(t)},b=function(e,n){for(var t=u()(n,(function(e){return(0,x.Wu)(e.assetKey)})),r=function(e){return!!t[e]},i=0,o=Object.keys(e.upstream);i<o.length;i++)for(var a=o[i],s=0,l=Object.keys(e.upstream[a]);s<l.length;s++){var c=l[s];!e.nodes[c]&&r(a)&&(delete e.upstream[a][c],delete e.downstream[c][a])}for(var d=0,p=Object.keys(e.downstream);d<p.length;d++)for(var f=p[d],m=0,h=Object.keys(e.downstream[f]);m<h.length;m++){var g=h[m];!e.nodes[g]&&r(f)&&(delete e.upstream[g][f],delete e.downstream[f][g])}},S=function(e,n){var t=p()(e,(function(e){return e.name})),r=t[(0,x.Je)(n)];if(!r)return{upstream:0,downstream:0};return{upstream:function e(n,r){var i=t[n].inputs.flatMap((function(e){return e.dependsOn.map((function(e){return e.solid.name}))})).filter((function(e){return e!==n}));return Math.max.apply(Math,[r].concat((0,o.Z)(i.map((function(n){return e(n,r+1)})))))}(r.name,0),downstream:function e(n,r){var i=t[n].outputs.flatMap((function(e){return e.dependedBy.map((function(e){return e.solid.name}))})).filter((function(e){return e!==n}));return Math.max.apply(Math,[r].concat((0,o.Z)(i.map((function(n){return e(n,r+1)})))))}(r.name,0)}},N=(0,l.Ps)(r||(r=(0,i.Z)(["\n  query AssetGraphQuery($pipelineSelector: PipelineSelector, $groupSelector: AssetGroupSelector) {\n    assetNodes(pipeline: $pipelineSelector, group: $groupSelector) {\n      id\n      ...AssetNodeForGraphQuery\n    }\n  }\n\n  fragment AssetNodeForGraphQuery on AssetNode {\n    id\n    groupName\n    repository {\n      id\n      name\n      location {\n        id\n        name\n      }\n    }\n    dependencyKeys {\n      path\n    }\n    dependedByKeys {\n      path\n    }\n    ...AssetNodeFragment\n  }\n\n  ","\n"])),y.zU)},64424:function(e,n,t){t.d(n,{l:function(){return b},m:function(){return N}});var r,i,o,a=t(99500),s=t(59019),l=t(73701),c=t(38565),u=t(70157),d=t(3159),p=t(58891),f=t.n(p),m=t(325),h=t(19102),g=t(55752),y=t(11540),x=t(39061),v=t(32289),j=2e3;function b(e){var n=(0,l.a)(w,{skip:0===e.length,variables:{assetKeys:e},notifyOnNetworkStatusChange:!0}),t=m.useMemo((function(){return n.data?(0,x.Qg)(n.data):{}}),[n.data]),r=m.useRef(!1);r.current=[c.I.refetch,c.I.loading].includes(n.networkStatus);var i=m.useRef(null),o=m.useCallback((function(){var e=n.refetch;i.current||(i.current=setTimeout((function n(){r.current?i.current=setTimeout(n,j):(i.current=null,e())}),j))}),[i,n.refetch]);m.useEffect((function(){return function(){i.current&&clearTimeout(i.current)}}),[]);var a=(0,h.C4)(n,3e4);(0,g.Qs)(n.refetch,j);var u=m.useMemo((function(){return new Set(e.map(x.Je))}),[e]),d=m.useMemo((function(){var e;return new Set((null===(e=n.data)||void 0===e?void 0:e.assetNodes.flatMap((function(e){return e.opNames})))||[])}),[n]),p=f()(Object.values(t).flatMap((function(e){return[].concat((0,s.Z)(e.unstartedRunIds),(0,s.Z)(e.inProgressRunIds))}))).sort().slice(0,3);return{liveDataByNode:t,liveDataRefreshState:a,runWatchers:(0,v.jsx)(v.Fragment,{children:p.map((function(e){return(0,v.jsx)(S,{runId:e,assetKeyTokens:u,assetStepKeys:d,callback:o},e)}))}),assetKeys:e}}var S=m.memo((function(e){var n=e.runId,t=e.assetKeyTokens,r=e.assetStepKeys,i=e.callback,o=m.useRef(0);return m.useEffect((function(){return console.log("Subscribed to ".concat(n)),function(){return console.log("Unsubscribed from ".concat(n," after ").concat(o.current," messages"))}}),[n]),(0,u.m)(C,{fetchPolicy:"no-cache",variables:{runId:n},onSubscriptionData:function(e){var n,a=null===(n=e.subscriptionData.data)||void 0===n?void 0:n.pipelineRunLogs;"PipelineRunLogsSubscriptionSuccess"===(null===a||void 0===a?void 0:a.__typename)&&(o.current+=a.messages.length,a.messages.some((function(e){return"AssetMaterializationPlannedEvent"===e.__typename||"MaterializationEvent"===e.__typename||"ObservationEvent"===e.__typename?e.assetKey&&t.has((0,x.Je)(e.assetKey)):("ExecutionStepFailureEvent"===e.__typename||"ExecutionStepStartEvent"===e.__typename)&&(e.stepKey&&r.has(e.stepKey))}))&&i())}}),(0,v.jsx)("span",{})})),N=(0,d.Ps)(r||(r=(0,a.Z)(["\n  fragment AssetLatestInfoFragment on AssetLatestInfo {\n    assetKey {\n      path\n    }\n    unstartedRunIds\n    inProgressRunIds\n    latestRun {\n      id\n      ...AssetLatestInfoRun\n    }\n  }\n\n  fragment AssetLatestInfoRun on Run {\n    status\n    endTime\n    id\n  }\n"]))),w=(0,d.Ps)(i||(i=(0,a.Z)(["\n  query AssetGraphLiveQuery($assetKeys: [AssetKeyInput!]!) {\n    assetNodes(assetKeys: $assetKeys, loadMaterializations: true) {\n      id\n      ...AssetNodeLiveFragment\n    }\n    assetsLatestInfo(assetKeys: $assetKeys) {\n      ...AssetLatestInfoFragment\n    }\n  }\n\n  ","\n  ","\n"])),y.oR,N),C=(0,d.Ps)(o||(o=(0,a.Z)(['\n  subscription AssetLiveRunLogsSubscription($runId: ID!) {\n    pipelineRunLogs(runId: $runId, cursor: "HEAD") {\n      __typename\n      ... on PipelineRunLogsSubscriptionSuccess {\n        messages {\n          __typename\n          ... on AssetMaterializationPlannedEvent {\n            assetKey {\n              path\n            }\n          }\n          ... on MaterializationEvent {\n            assetKey {\n              path\n            }\n          }\n          ... on ObservationEvent {\n            assetKey {\n              path\n            }\n          }\n          ... on ExecutionStepStartEvent {\n            stepKey\n          }\n          ... on ExecutionStepFailureEvent {\n            stepKey\n          }\n        }\n      }\n    }\n  }\n'])))},34449:function(e,n,t){t.d(n,{r:function(){return s}});var r,i=t(99500),o=t(3159),a=t(33774),s=(0,o.Ps)(r||(r=(0,i.Z)(["\n  fragment AssetNodeConfigFragment on AssetNode {\n    id\n    configField {\n      name\n      isRequired\n      configType {\n        ...ConfigTypeSchemaFragment\n        recursiveConfigTypes {\n          ...ConfigTypeSchemaFragment\n        }\n      }\n    }\n  }\n\n  ","\n"])),a.S)},61460:function(e,n,t){t.d(n,{a:function(){return g},N:function(){return y}});var r,i=t(99500),o=t(73701),a=t(3159),s=t(32030),l=t(7838),c=t(60736),u=t(60652),d=(t(325),t(14156)),p=t(39061),f=t(37099),m=t(33902),h=t(32289),g="Multiple asset definitions found",y=function(e){var n=e.assetKey,t=e.loadedFromRepo,r=e.padded,i=(0,o.a)(x,{variables:{assetKeys:[{path:n.path}]}}).data,a=null===i||void 0===i?void 0:i.assetNodeDefinitionCollisions[0];if(!a)return(0,h.jsx)("span",{});var y=a.repositories.map((function(e){return(0,m.Uz)({name:e.name,location:e.location.name})}));return(0,h.jsx)(s.x,{padding:r?{vertical:16,left:24,right:12}:{},border:{side:"bottom",width:1,color:l.w.KeylineGray},children:(0,h.jsx)(c.b,{intent:"warning",title:g,description:(0,h.jsxs)(h.Fragment,{children:["This asset was loaded from"," ",(0,f.At)(t.name,t.location),", but duplicate definitions were found in"," ",(0,h.jsxs)(u.Z,{underline:"always",color:l.w.Yellow700,onClick:function(){return(0,d._)({title:g,body:(0,h.jsxs)(h.Fragment,{children:["Code locations containing an asset definition for"," ",(0,h.jsx)("strong",{children:(0,p.ll)(n)}),":",(0,h.jsx)("ul",{children:y.map((function(e){return(0,h.jsx)("li",{children:e},e)}))})]})})},children:[y.length-1," other repo",2===y.length?"":"s"]}),". You should rename these assets to avoid collisions."]})})})},x=(0,a.Ps)(r||(r=(0,i.Z)(["\n  query AssetDefinitionCollisionQuery($assetKeys: [AssetKeyInput!]!) {\n    assetNodeDefinitionCollisions(assetKeys: $assetKeys) {\n      assetKey {\n        path\n      }\n      repositories {\n        id\n        name\n        location {\n          id\n          name\n        }\n      }\n    }\n  }\n"])))},91847:function(e,n,t){t.d(n,{M:function(){return h}});var r=t(59019),i=t(19065),o=t(922),a=t(12745),s=t(60652),l=t(32030),c=t(23730),u=t(7838),d=(t(325),t(76314)),p=t(28064),f=t(32289),m=["dagster/logical_version","dagster/code_version"],h=function(e){var n=e.event,t=e.paddingLeft,o=e.collapsible,u=(0,d.U)("show-asset-system-tags",Boolean),h=(0,i.Z)(u,2),y=h[0],x=h[1];return o&&!y?(0,f.jsx)(a.YS,{children:(0,f.jsx)(s.Z,{onClick:function(){return x(!0)},children:(0,f.jsxs)(l.x,{flex:{alignItems:"center"},children:[(0,f.jsxs)("span",{children:["Show tags (",(null===n||void 0===n?void 0:n.tags.length)||0,")"]}),(0,f.jsx)(c.JO,{name:"arrow_drop_down",style:{transform:"rotate(0deg)"}})]})})}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(g,{children:(0,f.jsx)("tbody",{children:null!==n&&void 0!==n&&n.tags.length?(0,r.Z)(n.tags).sort((function(e,n){return m.indexOf(n.key)-m.indexOf(e.key)})).map((function(e){return(0,f.jsxs)("tr",{children:[(0,f.jsx)("td",{style:{paddingLeft:t},children:(0,f.jsx)(a.fv,{children:e.key.replace(p.H.Namespace,"")})}),(0,f.jsx)("td",{children:e.value})]},e.key)})):(0,f.jsx)("tr",{children:(0,f.jsx)("td",{children:"No tags to display."})})})}),o&&(0,f.jsx)(a.YS,{children:(0,f.jsx)(s.Z,{onClick:function(){return x(!1)},children:(0,f.jsxs)(l.x,{flex:{alignItems:"center"},children:[(0,f.jsx)("span",{children:"Hide tags"}),(0,f.jsx)(c.JO,{name:"arrow_drop_down",style:{transform:"rotate(180deg)"}})]})})})]})},g=o.ZP.table.withConfig({displayName:"AssetEventSystemTags__AssetEventSystemTagsTable",componentId:"sc-186zkuz-0"})(["width:100%;border-spacing:0;border-collapse:collapse;tr td:first-child{max-width:300px;word-wrap:break-word;width:25%;}tr td{border:1px solid ",";padding:8px 12px;font-size:14px;vertical-align:top;}"],u.w.KeylineGray)},52598:function(e,n,t){t.d(n,{i:function(){return y},Q:function(){return x}});var r,i=t(99500),o=t(19065),a=t(59019),s=t(3159),l=t(32030),c=t(11831),u=t(60652),d=t(325),p=t(74549),f=t(55419),m=t(77171),h=t(32289),g=function(e){var n=e.lineage_info,t=e.timestamp,r=1===n.partitions.length?"Partition":"Partitions",i=n.partitions.map((function(e){return'"'.concat(e,'"')})).join(", "),o=(0,m.p)(n.assetKey,{asOf:t});return(0,h.jsxs)(l.x,{margin:{bottom:4},children:[n.partitions.length>0?"".concat(r," ").concat(i," of "):"",(0,h.jsx)(c.u,{content:(0,h.jsxs)(h.Fragment,{children:["View snapshot as of"," ",(0,h.jsx)(f.E,{timestamp:{ms:Number(t)},timeFormat:{showSeconds:!0,showTimezone:!0}})]}),modifiers:{offset:{enabled:!0,options:{offset:[0,16]}}},placement:"right",children:(0,h.jsx)(p.rU,{to:o,children:(0,h.jsx)(l.x,{flex:{display:"inline-flex",alignItems:"center"},children:n.assetKey.path.map((function(e,n){return(0,h.jsx)("span",{children:e},n)})).reduce((function(e,n,t){return[].concat((0,a.Z)(e),[t>0?(0,h.jsxs)(d.Fragment,{children:["\xa0",">","\xa0"]},"".concat(t,"-space")):null,n])}),[])})})})]})},y=function(e){var n=e.elements,t=e.timestamp,r=d.useState(!0),i=(0,o.Z)(r,2),a=i[0],s=i[1];return(0,h.jsxs)("div",{children:[n.length>5&&(0,h.jsx)(u.Z,{onClick:function(){return s(!a)},children:a?"Show More":"Show Less"}),(a?n.slice(n.length-5):n).map((function(e,n){return(0,h.jsx)(g,{lineage_info:e,timestamp:t},n)}))]})},x=(0,s.Ps)(r||(r=(0,i.Z)(["\n  fragment AssetLineageFragment on AssetLineageInfo {\n    assetKey {\n      path\n    }\n    partitions\n  }\n"])))},4041:function(e,n,t){t.d(n,{l:function(){return x}});var r=t(47427),i=t(59019),o=t(19065),a=t(32030),s=t(7838),l=t(12745),c=t(89646),u=t(75453),d=t(62816),p=t.n(d),f=t(58891),m=t.n(f),h=t(325),g=t(55853),y=t(32289),x=function(e){var n=h.useState(null),t=(0,o.Z)(n,2),r=t[0],d=t[1],p=h.useMemo((function(){return(0,i.Z)(e.groups).reverse()}),[e.groups]),f=v(p,e.xAxis),m=Object.keys(f).slice(0,20).sort();return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{style:{display:"grid",gridTemplateColumns:"1fr ".repeat(e.columnCount||2),justifyContent:"stretch"},children:m.map((function(n){return(0,y.jsx)(a.x,{style:{width:"100%"},border:{side:"bottom",width:1,color:s.w.KeylineGray},children:(0,y.jsxs)(a.x,{style:{width:"100%"},border:{side:"right",width:1,color:s.w.KeylineGray},children:[e.asSidebarSection?(0,y.jsx)(a.x,{padding:{horizontal:24,top:8},flex:{justifyContent:"space-between"},children:(0,y.jsx)(l.YS,{style:{fontWeight:700},children:n})}):(0,y.jsx)(a.x,{padding:{horizontal:24,vertical:16},border:{side:"bottom",width:1,color:s.w.KeylineGray},flex:{justifyContent:"space-between"},children:(0,y.jsx)(l.pm,{children:n})}),(0,y.jsx)(a.x,{padding:{horizontal:24,vertical:16},children:(0,y.jsx)(g.K,{label:n,width:"100%",data:f[n],xHover:r,onHoverX:function(e){return e!==r&&d(e)}})})]})},n)}))}),0===m.length?e.asSidebarSection?(0,y.jsx)(a.x,{margin:{horizontal:24,vertical:12},style:{color:s.w.Gray500,fontSize:"0.8rem"},children:"No numeric metadata entries available to be graphed."}):(0,y.jsx)(a.x,{padding:{horizontal:24,top:64},children:(0,y.jsx)(c.t,{shrinkable:!0,icon:"asset_plot",title:"Asset plots are automatically generated by metadata",description:"Include numeric metadata entries in your materializations and observations to see data graphed by time or partition.",action:(0,y.jsx)(u.fr,{href:"https://docs.dagster.io/concepts/assets/software-defined-assets#recording-materialization-metadata",children:"View documentation"})})}):"partition"===e.xAxis&&(0,y.jsx)(a.x,{padding:{vertical:16,horizontal:24},style:{color:s.w.Gray400},children:"When graphing values by partition, the highest data point for each materialized event label is displayed."})]})},v=function(e,n){var t,o={},a=m()(p()(e,(function(e){var n;return((null===(n=e.latest)||void 0===n?void 0:n.metadataEntries)||[]).filter((function(e){return["IntMetadataEntry","FloatMetadataEntry"].includes(e.__typename)})).map((function(e){return e.label}))}))),s=function(e,t){var r=t.x,i=t.y;if(o[e]=o[e]||{minX:0,maxX:0,minY:0,maxY:0,values:[],xAxis:n},"partition"===n){var a=o[e].values.find((function(e){return e.x===r}));if(a)return void(isNaN(i)||(a.y=i))}o[e].values.push({xNumeric:"number"===typeof r?r:o[e].values.length,x:r,y:i})},l=(0,r.Z)(e);try{for(l.s();!(t=l.n()).done;){var c=t.value,u=c.partition,d=c.latest,f=("partition"===n?u:Number(null===d||void 0===d?void 0:d.timestamp))||null;if(null!==f){var h,g=(0,r.Z)(a);try{var y=function(){var e=h.value,n=null===d||void 0===d?void 0:d.metadataEntries.find((function(n){return n.label===e}));if(!n)return s(e,{x:f,y:NaN}),"continue";var t=NaN;"IntMetadataEntry"===n.__typename&&(t=null!==n.intValue?n.intValue:parseInt(n.intRepr)),"FloatMetadataEntry"===n.__typename&&null!==n.floatValue&&(t=n.floatValue),s(e,{x:f,y:t})};for(g.s();!(h=g.n()).done;)y()}catch(N){g.e(N)}finally{g.f()}}}}catch(N){l.e(N)}finally{l.f()}for(var x=0,v=Object.values(o);x<v.length;x++){var j=v[x],b=j.values.map((function(e){return e.xNumeric})),S=j.values.map((function(e){return e.y})).filter((function(e){return!isNaN(e)}));j.minXNumeric=Math.min.apply(Math,(0,i.Z)(b)),j.maxXNumeric=Math.max.apply(Math,(0,i.Z)(b)),j.minY=Math.min.apply(Math,(0,i.Z)(S)),j.maxY=Math.max.apply(Math,(0,i.Z)(S))}return o}},7713:function(e,n,t){t.d(n,{U6:function(){return d},mQ:function(){return p},Ws:function(){return f}});var r,i=t(99500),o=t(3159),a=t(32030),s=t(57753),l=(t(325),t(33208)),c=t(4735),u=t(32289),d=function(e){return{assetType:e.type?e.type:void 0,assetMetadata:e.metadataEntries||[]}},p=function(e){var n=e.assetMetadata,t=e.repoLocation,r=n.map((function(e){return{key:e.label,value:(0,u.jsx)(c.BL,{entry:e,repoLocation:t})}}));return(0,u.jsx)(a.x,{padding:{vertical:16,horizontal:24},children:(0,u.jsx)(s.nZ,{rows:r})})},f=(0,o.Ps)(r||(r=(0,i.Z)(["\n  fragment AssetNodeOpMetadataFragment on AssetNode {\n    id\n    metadataEntries {\n      ...MetadataEntryFragment\n    }\n    type {\n      ...DagsterTypeFragment\n    }\n  }\n\n  ","\n  ","\n"])),c.it,l.rB)},79986:function(e,n,t){t.d(n,{Tx:function(){return f},Dn:function(){return m},vy:function(){return h},jY:function(){return g}});var r=t(11831),i=t(54268),o=t(13008),a=t.n(o),s=t(55386),l=t.n(s),c=t(93975),u=t.n(c),d=(t(325),t(36243)),p=t(32289);function f(e){return(null===e||void 0===e?void 0:e.freshnessInfo)&&((null===e||void 0===e?void 0:e.freshnessInfo.currentMinutesLate)||0)>0||!1}a().extend(l()),a().extend(u());var m=function(e){return"".concat(a().duration(e,"minutes").humanize(!1)," late")},h=function(e){var n=e.liveData,t=e.policyOnHover,o=n.freshnessInfo,a=n.freshnessPolicy,s=t?g(a):"";return o?null===o.currentMinutesLate?(0,p.jsx)(r.u,{content:(0,p.jsx)("div",{style:{maxWidth:400},children:"".concat("This asset has never been materialized."," ").concat(s)}),children:(0,p.jsx)(i.V,{intent:"danger",icon:"warning",children:"Late"})}):0===o.currentMinutesLate?s?(0,p.jsx)(r.u,{content:g(a),children:(0,p.jsx)(i.V,{intent:"success",icon:"check_circle"})}):(0,p.jsx)(i.V,{intent:"success",icon:"check_circle"}):(0,p.jsx)(r.u,{content:(0,p.jsx)("div",{style:{maxWidth:400},children:"".concat("A materialization incorporating more recent upstream data is overdue."," ").concat(s)}),children:(0,p.jsx)(i.V,{intent:"danger",icon:"warning",children:m(o.currentMinutesLate)})}):null},g=function(e){if(!e)return"";var n=e.cronSchedule,t=e.maximumLagMinutes,r=n?(0,d.A)(n,"UTC").replace(/^At /,""):"",i=t%30===0?"".concat(t/60," hour").concat(t/60!==1?"s":""):"".concat(t," min");return r?"By ".concat(r,", this asset should incorporate all data up to ").concat(i," before that").concat("\xa0","time."):"At any point in time, this asset should incorporate all data up to ".concat(i," before that").concat("\xa0","time.")}},73522:function(e,n,t){t.d(n,{j:function(){return u}});var r=t(32030),i=t(60736),o=t(34595),a=t(325),s=t(74549),l=t(55752),c=t(32289),u=function(e){var n=e.liveData,t=e.border,u=n||{},d=u.inProgressRunIds,p=void 0===d?[]:d,f=u.unstartedRunIds,m=void 0===f?[]:f;return 0===p.length&&0===m.length?null:(0,c.jsx)(r.x,{padding:{vertical:16,left:24,right:12},border:t,children:(0,c.jsx)(i.b,{intent:"info",icon:(0,c.jsx)(o.$,{purpose:"body-text"}),title:(0,c.jsxs)("div",{style:{fontWeight:400},children:[p.length>0&&(0,c.jsxs)(c.Fragment,{children:[p.map((function(e){return(0,c.jsxs)(a.Fragment,{children:["Run"," ",(0,c.jsx)(s.rU,{to:"/runs/".concat(e),children:(0,l.EI)({runId:e})})]},e)}))," ",1===p.length?"is":"are"," currently refreshing this asset."]}),m.length>0&&(0,c.jsxs)(c.Fragment,{children:[m.map((function(e){return(0,c.jsxs)(a.Fragment,{children:["Run"," ",(0,c.jsx)(s.rU,{to:"/runs/".concat(e),children:(0,l.EI)({runId:e})})]},e)}))," ",1===m.length?"has":"have"," started and will refresh this asset."]})]})})})}},11936:function(e,n,t){t.d(n,{x:function(){return l}});var r=t(32030),i=t(7838),o=t(60736),a=t(23730),s=(t(325),t(32289)),l=function(){return(0,s.jsx)(r.x,{padding:{vertical:16,left:24,right:12},border:{side:"bottom",width:1,color:i.w.KeylineGray},children:(0,s.jsx)(o.b,{intent:"info",icon:(0,s.jsx)(a.JO,{name:"history_toggle_off",size:16,color:i.w.Blue700,style:{marginTop:1}}),title:(0,s.jsx)("div",{style:{fontWeight:400},children:"This asset depends on earlier partitions of itself. "})})})}},13885:function(e,n,t){t.d(n,{b:function(){return l}});var r=t(32030),i=t(60736),o=(t(325),t(74549)),a=t(55752),s=t(32289),l=function(e){var n=e.liveData,t=e.border,l=(n||{}).runWhichFailedToMaterialize;return l?(0,s.jsx)(r.x,{padding:{vertical:16,left:24,right:12},border:t,children:(0,s.jsx)(i.b,{intent:"error",title:(0,s.jsxs)("div",{style:{fontWeight:400},children:["Run"," ",(0,s.jsx)(o.rU,{to:"/runs/".concat(l.id),children:(0,a.EI)({runId:l.id})})," ","failed to materialize this asset."]})})}):null}},78196:function(e,n,t){t.d(n,{U2:function(){return Ze},XE:function(){return Se},VF:function(){return Ie},Ot:function(){return Ke},ZP:function(){return ke},DO:function(){return Ne}});var r,i,o,a,s,l,c=t(99500),u=t(59019),d=t(85358),p=t(19065),f=t(95550),m=t.n(f),h=t(31522),g=t(3159),y=t(11831),x=t(75453),v=t(23730),j=t(32030),b=t(34595),S=t(762),N=t(8412),w=t(26966),C=t.n(w),k=t(58891),E=t.n(k),P=t(325),_=t(14156),K=t(79540),I=t(63579),A=t(39061),Z=t(64451),O=t(25859),F=t(28064),M=t(33774),L=t(37099),R=t(33902),T=t(34449),z=t(61460),D=t(95764),G=t(73701),$=t(8358),B=t(50346),U=t(7838),q=t(60652),V=t(60736),J=t(24083),Q=t.n(J),Y=t(27601),H=t(12436),W=t(95609),X=t(22013),ee=t(89493),ne=t(33547),te=t(79253),re=t(98369),ie=t(24502),oe=t(54920),ae=t(26961),se=t(36613),le=t(74549),ce=t(32289),ue=function(e){var n=e.partitionSetName,t=(0,G.a)(de).data,r=("PartitionBackfills"===(null===t||void 0===t?void 0:t.partitionBackfillsOrError.__typename)?t.partitionBackfillsOrError.results:[]).filter((function(e){return e.partitionSetName===n})).length;return 0===r?(0,ce.jsx)("span",{}):(0,ce.jsxs)("div",{style:{color:U.w.Gray400,maxWidth:350},children:[1===r?"Note: A backfill has been requested for this job and may be refreshing displayed assets. ":"Note: ".concat(r," backfills have been requested for this job and may be refreshing displayed assets. "),(0,ce.jsx)(le.rU,{to:"/overview/backfills",target:"_blank",children:(0,ce.jsxs)(j.x,{flex:{gap:4,display:"inline-flex",alignItems:"center"},children:["View ",(0,ce.jsx)(v.JO,{name:"open_in_new",color:U.w.Link})]})})]})},de=(0,g.Ps)(r||(r=(0,c.Z)(["\n  query RunningBackfillsNoticeQuery {\n    partitionBackfillsOrError(status: REQUESTED) {\n      __typename\n      ... on PartitionBackfills {\n        results {\n          partitionSetName\n          backfillId\n        }\n      }\n    }\n  }\n"]))),pe=t(40791),fe=t(47619),me=t(32369),he=function(e){var n="Launch runs to materialize ".concat(e.assets.length>1?"".concat(e.assets.length," assets"):(0,A.ll)(e.assets[0].assetKey));return(0,ce.jsxs)($.Vq,{style:{width:700},isOpen:e.open,canEscapeKeyClose:!0,canOutsideClickClose:!0,onClose:function(){return e.setOpen(!1)},children:[(0,ce.jsx)($.fK,{icon:"layers",label:n}),(0,ce.jsx)(ge,(0,D.Z)({},e))]})},ge=function(e){var n,t,r=e.setOpen,i=e.assets,o=e.repoAddress,a=e.assetJobName,s=e.upstreamAssetKeys,l=i.filter((function(e){return!!e.partitionDefinition})),c=(0,I.xz)(o.location).canLaunchPartitionBackfill,f=P.useState(!1),g=(0,p.Z)(f,2),b=g[0],S=g[1],N=P.useState(!1),w=(0,p.Z)(N,2),C=w[0],k=w[1],E=P.useState([]),K=(0,p.Z)(E,2),O=K[0],M=K[1],L=P.useState(0),R=(0,p.Z)(L,2),T=R[0],z=R[1],V=l.length-T,J=(0,fe.mR)(l.map((function(e){return e.assetKey}))),Q=P.useMemo((function(){return(0,se.$G)(J)}),[J]),ae=(null===(n=l[0].partitionDefinition)||void 0===n?void 0:n.dimensionTypes)||[],le=P.useState(!0),de=(0,p.Z)(le,2),he=de[0],ge=de[1],ve=(0,pe.q)({knownDimensionNames:ae.map((function(e){return e.name})),modifyQueryString:!1,assetHealth:Q}),je=(0,p.Z)(ve,2),be=je[0],Se=je[1],Ne=P.useMemo((function(){return(0,se.f1)(be,(function(e){var n=Q.stateForKey(e);return n===oe.AB.SUCCESS_MISSING?oe.AB.MISSING:n}))}),[be,Q]),we=P.useState(!1),Ce=(0,p.Z)(we,2),ke=Ce[0],Ee=Ce[1],Pe=be.every((function(e){return 1===e.selectedRanges.length}))&&be.some((function(e){return e.selectedKeys.length>1})),_e=P.useMemo((function(){return he?Ne.filter((function(e){return e.state===oe.AB.MISSING})):Ne}),[Ne,he]),Ie=(0,h.x)(),Ae=(0,Y.k6)(),Ze=null===(t=(0,G.a)(xe).data)||void 0===t?void 0:t.instance,Oe=(0,(0,Z.C)().useLaunchWithTelemetry)(),Fe=!ke&&1!==_e.length;P.useEffect((function(){!Pe&&Ee(!1)}),[Pe]),P.useEffect((function(){ke&&ge(!1)}),[ke]);var Me=(0,me.f)(o,a),Le=Me.partitionSet,Re=Me.partitionSetError,Te=function(){var e=(0,d.Z)(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(S(!0),Le){e.next=5;break}return S(!1),(0,_._)({title:"Unable to find partition set on ".concat(a),body:Re?(0,ce.jsx)(H.T9,{error:Re}):(0,ce.jsx)("span",{})}),e.abrupt("return");case 5:if(!Fe){e.next=10;break}return e.next=8,De();case 8:e.next=12;break;case 10:return e.next=12,ze();case 12:S(!1);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ze=function(){var e=(0,d.Z)(m().mark((function e(){var n,t,s,l,c,d;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie.query({query:ee.Fp,fetchPolicy:"network-only",variables:{repositorySelector:{repositoryLocationName:o.location,repositoryName:o.name},partitionSetName:Le.name,partitionName:_e[0].partitionKey}});case 2:if(n=e.sent,(t=n.data)&&t.partitionSetOrError&&"PartitionSet"===t.partitionSetOrError.__typename&&t.partitionSetOrError.partition){e.next=6;break}return e.abrupt("return");case 6:if("PythonError"!==(s=t.partitionSetOrError.partition).tagsOrError.__typename){e.next=10;break}return(0,_._)({title:"Unable to load tags",body:(0,ce.jsx)(H.T9,{error:s.tagsOrError})}),e.abrupt("return");case 10:if("PythonError"!==s.runConfigOrError.__typename){e.next=13;break}return(0,_._)({title:"Unable to load tags",body:(0,ce.jsx)(H.T9,{error:s.runConfigOrError})}),e.abrupt("return");case 13:return l=s.runConfigOrError.yaml||"",c=[].concat((0,u.Z)(s.tagsOrError.results),(0,u.Z)(O)),ke&&((c=c.filter((function(e){return!e.key.startsWith(F.H.Partition)}))).push({key:F.H.AssetPartitionRangeStart,value:Ne[0].partitionKey}),c.push({key:F.H.AssetPartitionRangeEnd,value:Ne[Ne.length-1].partitionKey})),e.next=18,Oe({executionParams:(0,D.Z)((0,D.Z)({},Ke(o,a,i,c)),{},{runConfigData:l,mode:s.mode})},"toast");case 18:"LaunchRunSuccess"===(null===(d=e.sent)||void 0===d?void 0:d.__typename)&&r(!1);case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),De=function(){var e=(0,d.Z)(m().mark((function e(){var n,t,s;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,A.pv)(a)?void 0:{partitionSetName:Le.name,repositorySelector:{repositoryLocationName:o.location,repositoryName:o.name}},e.next=3,Ie.mutate({mutation:X.f,variables:{backfillParams:{selector:n,assetSelection:i.map((function(e){return{path:e.assetKey.path}})),partitionNames:_e.map((function(e){return e.partitionKey})),fromFailure:!1,tags:O}}});case 3:t=e.sent,"LaunchBackfillSuccess"===(null===(s=t.data)||void 0===s?void 0:s.launchPartitionBackfill.__typename)?((0,te.Xd)(Ae,null===s||void 0===s?void 0:s.launchPartitionBackfill.backfillId),r(!1)):(0,te.mv)(s);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsxs)($.a7,{children:[(0,ce.jsxs)(j.x,{flex:{direction:"column",gap:8},children:[(0,ce.jsx)(j.x,{children:"Select partitions to materialize. Click and drag to select a range on the timeline."}),be.map((function(e,n){return(0,ce.jsx)(ie.x,{partitionKeys:e.dimension.partitionKeys,partitionStateForKey:function(e){return Q.stateForSingleDimension(n,e,2===be.length?be[1-n].selectedKeys:void 0)},selected:e.selectedKeys,setSelected:function(n){return Se(be.map((function(t){return t.dimension===e.dimension?(0,D.Z)((0,D.Z)({},t),{},{selectedKeys:n}):t})))}},e.dimension.name)})),(0,ce.jsxs)(j.x,{flex:{justifyContent:"space-between"},children:[(0,ce.jsx)(B.X,{label:"Missing partitions only",checked:he,disabled:ke,onChange:function(){return ge(!he)}}),(0,ce.jsx)(B.X,{label:(0,ce.jsxs)(j.x,{flex:{alignItems:"center",gap:4},children:["Pass partition ranges to single run",(0,ce.jsx)(y.u,{position:"top-left",content:(0,ce.jsx)("div",{style:{maxWidth:300},children:"This option requires that your assets are written to operate on a partition key range via context.asset_partition_key_range_for_output or context.asset_partitions_time_window_for_output."}),children:(0,ce.jsx)(v.JO,{name:"info",color:U.w.Gray500})})]}),checked:ke,disabled:!Pe,onChange:function(){return Ee(!ke)}})]})]}),T>0&&(0,ce.jsxs)(j.x,{margin:{top:16},flex:{direction:"column",gap:8},padding:{vertical:16,horizontal:20},border:{side:"horizontal",width:1,color:U.w.KeylineGray},background:U.w.Gray100,style:{marginLeft:-20,marginRight:-20,overflowY:"auto",overflowX:"visible",maxHeight:"35vh"},children:[l.slice(0,T).map((function(e){return(0,ce.jsx)(W.m,{assetKey:e.assetKey,showAssetKey:!0,data:J,selections:be},(0,A.ll)(e.assetKey))})),V>0&&(0,ce.jsx)(j.x,{margin:{vertical:8},children:(0,ce.jsxs)(q.Z,{onClick:function(){return z(l.length)},children:["Show ",V," more ",V>1?"previews":"preview"]})})]}),0===T&&l.length>1&&(0,ce.jsx)(j.x,{margin:{top:16,bottom:8},children:(0,ce.jsx)(q.Z,{onClick:function(){return z(5)},children:"Show per-asset partition health"})}),(0,ce.jsx)(ye,{upstreamAssetKeys:s,selections:be,setSelections:Se}),(0,ce.jsxs)(j.x,{flex:{direction:"column",gap:16},style:{marginTop:24},children:[(0,ce.jsxs)(re.$,{title:"Tags",children:[(0,ce.jsx)(ne.U,{tagsFromSession:O,onChange:M,open:C,onRequestClose:function(){return k(!1)}}),O.length?(0,ce.jsx)("div",{style:{border:"1px solid ".concat(U.w.Gray300),borderRadius:8,padding:3},children:(0,ce.jsx)(ne.x,{tagsFromSession:O,onRequestEdit:function(){return k(!0)}})}):(0,ce.jsx)("div",{children:(0,ce.jsx)(x.zx,{onClick:function(){return k(!0)},children:Fe?"Add tags to backfill runs":"Add tags"})})]}),Ze&&Fe&&(0,ce.jsx)(te.So,{instance:Ze}),Ze&&Fe&&(0,ce.jsx)(te.d,{instance:Ze})]})]}),(0,ce.jsxs)($.cN,{left:Le&&(0,ce.jsx)(ue,{partitionSetName:Le.name}),children:[(0,ce.jsx)(x.zx,{intent:"none",onClick:function(){return r(!1)},children:"Cancel"}),Fe&&!c.enabled?(0,ce.jsx)(y.u,{content:c.disabledReason,children:(0,ce.jsx)(x.zx,{disabled:!0,children:"Launch ".concat(_e.length,"-Run Backfill")})}):(0,ce.jsx)(x.zx,{intent:"primary",onClick:Te,disabled:0===_e.length,loading:b,children:b?"Launching...":Fe?"Launch ".concat(_e.length,"-Run Backfill"):"Launch 1 Run"})]})]})},ye=function(e){var n=e.upstreamAssetKeys,t=e.selections,r=e.setSelections,i=(0,fe.mR)(n);if(0===i.length)return(0,ce.jsx)("span",{});var o=function(e){return i.some((function(n){return n.stateForKey([e])===oe.AB.MISSING}))},a=1===t.length?(0,ae.lU)(t[0].selectedKeys,o).filter((function(e){return!0===e.status})):[];return 0===a.length?(0,ce.jsx)("span",{}):(0,ce.jsx)(j.x,{margin:{top:16},children:(0,ce.jsx)(V.b,{intent:"warning",title:"Upstream data missing",description:(0,ce.jsxs)(ce.Fragment,{children:[a.map((function(e){return(0,ae.ZX)(e,t[0].selectedKeys)})).join(", ")," cannot be materialized because upstream materializations are missing. Consider materializing upstream assets or ",(0,ce.jsx)(q.Z,{underline:"always",onClick:function(){if(t.length>1)throw new Error("Assertion failed, this feature is only available for 1 dimensional assets");r([(0,D.Z)((0,D.Z)({},t[0]),{},{selectedKeys:Q()(t[0].selectedKeys,o)})])},children:"remove these partitions"})," to avoid failures."]})})})},xe=(0,g.Ps)(i||(i=(0,c.Z)(["\n  query LaunchAssetChoosePartitionsQuery {\n    instance {\n      ...DaemonNotRunningAlertInstanceFragment\n      ...UsingDefaultLauncherAlertInstanceFragment\n    }\n  }\n\n  ","\n  ","\n"])),te.op,te.gk),ve=t(90815),je=function(e){return e.length>1?" (".concat(e.length,")"):""},be=function(e){return e.some((function(e){return"partitionDefinition"in e&&!!e.partitionDefinition||"isPartitioned"in e&&e.isPartitioned}))};var Se=function(e){var n=e.scope,t=e.liveDataForStale,r=e.preferredJobName,i=e.intent,o=void 0===i?"primary":i,a=(0,I._5)().canLaunchPipelineExecution,s=Ne(r),l=s.onClick,c=s.loading,u=s.launchpadElement,d=P.useState(!1),f=(0,p.Z)(d,2),m=f[0],h=f[1],g=function(e,n){if("selected"in e){var t=e.selected.filter((function(e){return!e.isSource}));return[{assetKeys:t.map((function(e){return e.assetKey})),label:"Materialize selected".concat(je(t)).concat(be(t)?"\u2026":"")}]}var r=[],i=e.all.filter((function(e){return!e.isSource}));if(r.push({assetKeys:i.map((function(e){return e.assetKey})),label:i.length>1&&!e.skipAllTerm?"Materialize all".concat(be(i)?"\u2026":""):"Materialize".concat(be(i)?"\u2026":"")}),n){var o=i.filter((function(e){return(0,ve.KO)(n[(0,A.Wu)(e.assetKey)])||(0,ve.KM)(n[(0,A.Wu)(e.assetKey)])}));r.push({assetKeys:o.map((function(e){return e.assetKey})),label:"Materialize stale and missing".concat(je(o))})}return r}(n,t),w=g[0],C=(0,Z.C)().MaterializeButton;return w?a.enabled?(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsxs)(j.x,{flex:{alignItems:"center"},children:[(0,ce.jsx)(y.u,{content:"Shift+click to add configuration",position:"bottom-right",useDisabledButtonTooltipFix:!0,children:(0,ce.jsx)(C,{intent:o,onClick:function(e){return l(w.assetKeys,e)},style:g.length>1?{borderTopRightRadius:0,borderBottomRightRadius:0,borderRight:"1px solid rgba(255,255,255,0.2)"}:{},disabled:!w.assetKeys.length,icon:c?(0,ce.jsx)(b.$,{purpose:"body-text"}):(0,ce.jsx)(v.JO,{name:"materialization"}),children:w.label})}),g.length>1&&(0,ce.jsx)(S.J,{isOpen:m,onInteraction:function(e){return h(e)},position:"bottom-right",content:(0,ce.jsx)(N.v2,{children:g.slice(1).map((function(e){return(0,ce.jsx)(N.sN,{text:e.label,icon:"materialization",disabled:0===e.assetKeys.length,onClick:function(n){return l(e.assetKeys,n)}},e.label)}))}),children:(0,ce.jsx)(x.zx,{role:"button",style:{minWidth:"initial",borderTopLeftRadius:0,borderBottomLeftRadius:0},icon:(0,ce.jsx)(v.JO,{name:"arrow_drop_down"}),intent:o})})]}),u]}):(0,ce.jsx)(y.u,{content:"You do not have permission to materialize assets",position:"bottom-right",children:(0,ce.jsx)(x.zx,{intent:o,icon:(0,ce.jsx)(v.JO,{name:"materialization"}),disabled:!0,children:w.label})}):(0,ce.jsx)("span",{})},Ne=function(e){var n=(0,(0,Z.C)().useLaunchWithTelemetry)(),t=(0,h.x)(),r=(0,K.p)(),i=P.useState({type:"none"}),o=(0,p.Z)(i,2),a=o[0],s=o[1],l=function(){var i=(0,d.Z)(m().mark((function i(o,l){var c,u,d,p,f;return m().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if("loading"!==a.type){i.next=2;break}return i.abrupt("return");case 2:return s({type:"loading"}),i.next=5,t.query({query:Ze,variables:{assetKeys:o.map((function(e){return{path:e.path}}))}});case 5:if(!(c=i.sent).data.assetNodeDefinitionCollisions.length){i.next=10;break}return(0,_._)(Ie(c.data)),s({type:"none"}),i.abrupt("return");case 10:return u=c.data.assetNodes,d=l.shiftKey,i.next=14,we(t,u,d,e);case 14:if("error"!==(p=i.sent).type){i.next=19;break}return(0,_._)({title:"Unable to Materialize",body:p.error}),s({type:"none"}),i.abrupt("return");case 19:return i.next=21,Pe(t,u);case 21:if(!(f=i.sent).length){i.next=33;break}return s({type:"none"}),i.prev=24,i.next=27,r({title:"Are you sure?",description:(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)("div",{children:"Materializing these assets may fail because the upstream assets listed below have not been materialized yet."}),(0,ce.jsx)("ul",{children:f.map((function(e,n){return(0,ce.jsx)("li",{children:(0,A.ll)(e)},n)}))})]})});case 27:s({type:"loading"}),i.next=33;break;case 30:return i.prev=30,i.t0=i.catch(24),i.abrupt("return");case 33:if("single-run"!==p.type){i.next=39;break}return i.next=36,n({executionParams:p.executionParams},"toast");case 36:s({type:"none"}),i.next=40;break;case 39:s(p);case 40:case"end":return i.stop()}}),i,null,[[24,30]])})));return function(e,n){return i.apply(this,arguments)}}();return{onClick:l,loading:"loading"===a.type,launchpadElement:"launchpad"===a.type?(0,ce.jsx)(O.e,{assetJobName:a.jobName,repoAddress:a.repoAddress,sessionPresets:a.sessionPresets,open:!0,setOpen:function(){return s({type:"none"})}}):"partitions"===a.type?(0,ce.jsx)(he,{assets:a.assets,upstreamAssetKeys:a.upstreamAssetKeys,repoAddress:a.repoAddress,assetJobName:a.jobName,open:!0,setOpen:function(){return s({type:"none"})}}):null}};function we(e,n,t,r){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,d.Z)(m().mark((function e(n,t,r,i){var o,a,s,l,c,u,d,p,f,h,g,y,x,v,j,b,S;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.some((function(e){return e.isSource}))){e.next=2;break}return e.abrupt("return",{type:"error",error:"One or more source assets are selected and cannot be materialized."});case 2:if(l=(0,L.kQ)((null===(o=t[0])||void 0===o?void 0:o.repository.name)||"",(null===(a=t[0])||void 0===a?void 0:a.repository.location.name)||""),c=(0,R.Uz)(l),t.every((function(e){return e.repository.name===l.name&&e.repository.location.name===l.location}))){e.next=6;break}return e.abrupt("return",{type:"error",error:"Assets must be in ".concat(c," to be materialized together.")});case 6:if(u=null===(s=t.find((function(e){return!!e.partitionDefinition})))||void 0===s?void 0:s.partitionDefinition,!t.some((function(e){return e.partitionDefinition&&u&&e.partitionDefinition.description!==u.description}))){e.next=9;break}return e.abrupt("return",{type:"error",error:"Assets must share a partition definition to be materialized together."});case 9:if(d=ke(t,i)){e.next=12;break}return e.abrupt("return",{type:"error",error:"Assets must be in the same job to be materialized together."});case 12:return e.next=14,n.query({query:Oe,variables:{pipelineName:d,repositoryName:t[0].repository.name,repositoryLocationName:t[0].repository.location.name}});case 14:if(p=e.sent,"Pipeline"===(f=p.data.pipelineOrError).__typename){e.next=18;break}return e.abrupt("return",{type:"error",error:f.message});case 18:if("PartitionSets"===(h=p.data.partitionSetsOrError).__typename){e.next=21;break}return e.abrupt("return",{type:"error",error:h.message});case 21:if(g=t.flatMap((function(e){return e.requiredResources.map((function(e){return e.resourceKey}))})),y=f.modes[0].resources.filter((function(e){return g.includes(e.name)})),x=y.some((function(e){var n;return null===(n=e.configField)||void 0===n?void 0:n.isRequired})),v=t.some((function(e){var n;return null===(n=e.configField)||void 0===n?void 0:n.isRequired})),j=u&&!(0,A.pv)(d),!(!j&&(v||x))&&!r){e.next=30;break}return b=t.flatMap((function(e){return e.opNames||[]})),e.abrupt("return",{type:"launchpad",jobName:d,repoAddress:l,sessionPresets:{flattenGraphs:!0,assetSelection:t.map((function(e){return{assetKey:e.assetKey,opNames:e.opNames}})),solidSelectionQuery:b.map((function(e){return'"'.concat(e,'"')})).join(", "),base:h.results.length?{partitionsSetName:h.results[0].name,partitionName:null,tags:[]}:void 0}});case 30:if(!u){e.next=33;break}return S=Ee(t),e.abrupt("return",{type:"partitions",assets:t,jobName:d,repoAddress:l,upstreamAssetKeys:S});case 33:return e.abrupt("return",{type:"single-run",executionParams:Ke(l,d,t,[])});case 34:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ke(e,n){var t=e[0]?e[0].jobNames.filter((function(n){return e.every((function(e){return e.jobNames.includes(n)}))})):[];return t.find((function(e){return e===n}))||t[0]||null}function Ee(e){var n=new Set(e.map((function(e){return JSON.stringify({path:e.assetKey.path})})));return E()(e.flatMap((function(e){return e.dependencyKeys.map((function(e){var n=e.path;return JSON.stringify({path:n})}))}))).filter((function(e){return!n.has(e)})).map((function(e){return JSON.parse(e)}))}function Pe(e,n){return _e.apply(this,arguments)}function _e(){return(_e=(0,d.Z)(m().mark((function e(n,t){var r,i;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==(r=Ee(t)).length){e.next=3;break}return e.abrupt("return",[]);case 3:return e.next=5,n.query({query:Fe,variables:{assetKeys:r}});case 5:return i=e.sent,e.abrupt("return",i.data.assetNodes.filter((function(e){return!e.isSource&&0===e.assetMaterializations.length})).map((function(e){return e.assetKey})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ke(e,n,t,r){return{mode:"default",executionMetadata:{tags:[].concat((0,u.Z)(r.map((function(e){return C()(e,["key","value"])}))),[{key:F.H.StepSelection,value:t.flatMap((function(e){return e.opNames})).join(",")}])},runConfigData:"{}",selector:{repositoryLocationName:e.location,repositoryName:e.name,pipelineName:n,assetSelection:t.map((function(e){return{path:e.assetKey.path}}))}}}function Ie(e){return{title:z.a,body:(0,ce.jsxs)("div",{style:{overflow:"auto"},children:["One or more of the selected assets are defined in multiple code locations. Rename these assets to avoid collisions and then try again.",(0,ce.jsx)("ul",{children:e.assetNodeDefinitionCollisions.map((function(e,n){return(0,ce.jsxs)("li",{children:[(0,ce.jsx)("strong",{children:(0,A.ll)(e.assetKey)}),(0,ce.jsx)("ul",{children:e.repositories.map((function(e,n){return(0,ce.jsx)("li",{children:(0,R.Uz)({name:e.name,location:e.location.name})},n)}))})]},n)}))})]})}}var Ae=(0,g.Ps)(o||(o=(0,c.Z)(["\n  fragment LaunchAssetExecutionAssetNodeFragment on AssetNode {\n    id\n    opNames\n    jobNames\n    graphName\n    partitionDefinition {\n      ...PartitionDefinitionForLaunchAsset\n    }\n    isObservable\n    isSource\n    assetKey {\n      path\n    }\n    dependencyKeys {\n      path\n    }\n    repository {\n      id\n      name\n      location {\n        id\n        name\n      }\n    }\n    requiredResources {\n      resourceKey\n    }\n    ...AssetNodeConfigFragment\n  }\n\n  fragment PartitionDefinitionForLaunchAsset on PartitionDefinition {\n    description\n    dimensionTypes {\n      name\n    }\n  }\n\n  ","\n"])),T.r),Ze=(0,g.Ps)(a||(a=(0,c.Z)(["\n  query LaunchAssetLoaderQuery($assetKeys: [AssetKeyInput!]!) {\n    assetNodes(assetKeys: $assetKeys) {\n      id\n      ...LaunchAssetExecutionAssetNodeFragment\n    }\n    assetNodeDefinitionCollisions(assetKeys: $assetKeys) {\n      assetKey {\n        path\n      }\n      repositories {\n        id\n        name\n        location {\n          id\n          name\n        }\n      }\n    }\n  }\n\n  ","\n"])),Ae),Oe=(0,g.Ps)(s||(s=(0,c.Z)(["\n  query LaunchAssetLoaderResourceQuery(\n    $pipelineName: String!\n    $repositoryLocationName: String!\n    $repositoryName: String!\n  ) {\n    partitionSetsOrError(\n      pipelineName: $pipelineName\n      repositorySelector: {\n        repositoryName: $repositoryName\n        repositoryLocationName: $repositoryLocationName\n      }\n    ) {\n      ... on PythonError {\n        message\n      }\n      ... on PipelineNotFoundError {\n        message\n      }\n      ... on PartitionSets {\n        results {\n          id\n          name\n        }\n      }\n    }\n\n    pipelineOrError(\n      params: {\n        pipelineName: $pipelineName\n        repositoryName: $repositoryName\n        repositoryLocationName: $repositoryLocationName\n      }\n    ) {\n      ... on PythonError {\n        message\n      }\n      ... on InvalidSubsetError {\n        message\n      }\n      ... on PipelineNotFoundError {\n        message\n      }\n      ... on Pipeline {\n        id\n        modes {\n          id\n          resources {\n            name\n            description\n            configField {\n              name\n              isRequired\n              configType {\n                ...ConfigTypeSchemaFragment\n                recursiveConfigTypes {\n                  ...ConfigTypeSchemaFragment\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n\n  ","\n"])),M.S),Fe=(0,g.Ps)(l||(l=(0,c.Z)(["\n  query LaunchAssetCheckUpstreamQuery($assetKeys: [AssetKeyInput!]!) {\n    assetNodes(assetKeys: $assetKeys, loadMaterializations: true) {\n      id\n      assetKey {\n        path\n      }\n      isSource\n      opNames\n      graphName\n      assetMaterializations(limit: 1) {\n        runId\n      }\n    }\n  }\n"])))},36613:function(e,n,t){t.d(n,{nv:function(){return o},vH:function(){return a},$G:function(){return s},rY:function(){return l},f1:function(){return c},xy:function(){return u}});var r=t(47427),i=t(54920);function o(e){return a(e.partitionKeys[0])}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return/\d{4}-\d{2}-\d{2}/.test(e)}function s(e){if(!e.length)return{dimensions:[],stateForKey:function(){return i.AB.MISSING},stateForSingleDimension:function(){return i.AB.MISSING}};var n=e[0].dimensions;if(!e.every((function(e){return e.dimensions.length===n.length})))throw new Error("Attempting to show unified asset health for assets with different dimensions");if(!e.every((function(e){return e.dimensions.every((function(e,t){return e.partitionKeys.length===n[t].partitionKeys.length}))})))throw new Error("Attempting to show unified asset health for assets with dimension of different lengths");return{dimensions:n.map((function(e){return{name:e.name,partitionKeys:e.partitionKeys}})),stateForKey:function(n){return l(e.map((function(e){return e.stateForKey(n)})))},stateForSingleDimension:function(n,t,r){return l(e.map((function(e){return e.stateForSingleDimension(n,t,r)})))}}}function l(e){return e.includes(i.AB.MISSING)&&e.includes(i.AB.SUCCESS)?i.AB.SUCCESS_MISSING:e[0]}function c(e,n){if(0===e.length)return[];if(1===e.length)return e[0].selectedKeys.map((function(e){return{partitionKey:e,state:n([e])}}));if(2===e.length){var t,i=[],o=(0,r.Z)(e[0].selectedKeys);try{for(o.s();!(t=o.n()).done;){var a,s=t.value,l=(0,r.Z)(e[1].selectedKeys);try{for(l.s();!(a=l.n()).done;){var c=a.value;i.push({partitionKey:"".concat(s,"|").concat(c),state:n([s,c])})}}catch(u){l.e(u)}finally{l.f()}}}catch(u){o.e(u)}finally{o.f()}return i}throw new Error("Unsupported >2 partitions defined")}var u=function(e){return{dimension:{name:e,partitionKeys:[]},selectedKeys:[],selectedRanges:[]}}},95609:function(e,n,t){t.d(n,{m:function(){return p}});var r=t(59019),i=t(34595),o=t(32030),a=t(7838),s=t(12745),l=(t(325),t(39061)),c=t(54920),u=t(36613),d=t(32289),p=function(e){var n=e.showAssetKey,t=e.assetKey,p=e.data,f=e.selections,m=p.find((function(e){return JSON.stringify(e.assetKey)===JSON.stringify(t)}));if(!m)return(0,d.jsx)("div",{style:{minHeight:55,position:"relative"},children:(0,d.jsx)(i.$,{purpose:"section"})});var h=f?f.map((function(e){return e.selectedKeys})):m.dimensions.map((function(e){return e.partitionKeys})),g=h.reduce((function(e,n){return n.length*e}),1),y=h.reduce((function(e,n){return e.length?e.flatMap((function(e){return n.map((function(n){return[].concat((0,r.Z)(e),[n])}))})):n.map((function(e){return[e]}))}),[]).filter((function(e){return m.stateForKey(e)===c.AB.SUCCESS})).length;return(0,d.jsxs)(o.x,{color:a.w.Gray500,children:[(0,d.jsxs)(o.x,{flex:{justifyContent:"space-between"},style:{fontWeight:600},margin:{bottom:4},children:[(0,d.jsx)(s.YS,{children:n?(0,l.ll)(t):"Materialized"}),(0,d.jsx)(s.YS,{children:"".concat(y.toLocaleString(),"/").concat(g.toLocaleString())})]}),m.dimensions.map((function(e,n){return(0,d.jsxs)(o.x,{margin:{bottom:4},children:[m.dimensions.length>1&&(0,d.jsx)(s.YS,{children:e.name}),(0,d.jsx)(c.bq,{small:!0,partitionNames:e.partitionKeys,splitPartitions:!(0,u.nv)(e),selected:f?f[n].selectedKeys:void 0,partitionStateForKey:function(e){return m.stateForSingleDimension(n,e,2===(null===f||void 0===f?void 0:f.length)?f[1-n].selectedKeys:void 0)}})]},n)}))]})}},90815:function(e,n,t){t.d(n,{KO:function(){return s},KM:function(){return l},T3:function(){return c}});var r=t(32030),i=t(58591),o=t(7838),a=(t(325),t(32289)),s=function(e){return e&&null===e.currentLogicalVersion},l=function(e){return e&&e.projectedLogicalVersion&&null!==e.currentLogicalVersion&&"INITIAL"!==e.currentLogicalVersion&&e.currentLogicalVersion!==e.projectedLogicalVersion},c=function(e){var n=e.liveData,t=e.onClick;return l(n)?(0,a.jsx)(r.x,{onClick:t,children:(0,a.jsx)(i.m,{fillColor:o.w.Yellow50,textColor:o.w.Yellow700,label:"Stale",interactive:!!t})}):null}},33682:function(e,n,t){t.d(n,{L:function(){return c}});var r=t(59019),i=t(21663),o=t.n(i),a=t(325),s="__NO_PARTITION__",l=function(e,n){return Number(null===n||void 0===n?void 0:n.timestamp)-Number(null===e||void 0===e?void 0:e.timestamp)};function c(e,n,t,i){return a.useMemo((function(){var a=[].concat((0,r.Z)(n),(0,r.Z)(t)).sort((function(e,n){return Number(n.timestamp)-Number(e.timestamp)}));return"partition"===e&&i?function(e,n){var t=o()(e,(function(e){return e.partition||s})),i=(0,r.Z)(n).reverse();return s in t&&i.push(s),i.filter((function(e){return e!==s})).map((function(e){var n=(0,r.Z)(t[e]||[]).sort(l),i=n.find((function(e){return"MaterializationEvent"===e.__typename}))||n[0]||null;return{all:n,latest:i,timestamp:null===i||void 0===i?void 0:i.timestamp,partition:e}}))}(a,i):a.map((function(e){return{latest:e,partition:e.partition||void 0,timestamp:e.timestamp,all:[]}}))}),[i,n,t,e])}},40791:function(e,n,t){t.d(n,{q:function(){return d}});var r=t(59019),i=t(95764),o=t(19065),a=t(325),s=t(44198),l=t(26961),c=t(36613),u={defaults:{},encode:function(e){return Object.fromEntries(e.map((function(e){return["".concat(e.name,"_range"),e.rangeText]})))},decode:function(e){return Object.entries(e).filter((function(e){return(0,o.Z)(e,1)[0].endsWith("_range")})).map((function(e){var n=(0,o.Z)(e,2),t=n[0],r=n[1];return{name:t.replace(/_range$/,""),rangeText:r}}))}},d=function(e){var n=e.assetHealth,t=e.knownDimensionNames,d=void 0===t?[]:t,p=e.modifyQueryString,f=(0,s.q)(u),m=(0,o.Z)(f,2),h=m[0],g=m[1],y=a.useState([]),x=(0,o.Z)(y,2),v=x[0],j=x[1],b=JSON.stringify(d);return[a.useMemo((function(){return n&&n.dimensions.length?n.dimensions.map((function(e){var n=v.find((function(n){return n.name===e.name}))||h.find((function(n){return n.name===e.name}));return void 0!==(null===n||void 0===n?void 0:n.rangeText)?(0,i.Z)({dimension:e},(0,l.w$)(e.partitionKeys,n.rangeText)):{dimension:e,selectedRanges:[(0,l.$0)(e)],selectedKeys:(0,r.Z)(e.partitionKeys)}})):JSON.parse(b).map(c.xy)}),[h,v,n,b]),a.useCallback((function(e){var n=e.map((function(e){var n=(0,l.Z8)(e.selectedKeys,e.dimension.partitionKeys);return{name:e.dimension.name,rangeText:n!==(0,l.NN)(e.dimension)?n:void 0}}));p?g(n):j(n)}),[g,p])]}},47619:function(e,n,t){t.d(n,{mR:function(){return N}});var r,i=t(99500),o=t(95764),a=t(59019),s=t(85358),l=t(47427),c=t(19065),u=t(95550),d=t.n(u),p=t(31522),f=t(3159),m=t(90428),h=t.n(m),g=t(325),y=t(76341),x=t(54920),v=t(36613);function j(e,n){var t="AssetNode"===e.assetNodeOrError.__typename?e.assetNodeOrError.partitionKeysByDimension:[],r="AssetNode"===e.assetNodeOrError.__typename&&e.assetNodeOrError.materializedPartitions||{__typename:"DefaultPartitions",unmaterializedPartitions:[],materializedPartitions:[]},i=2===t.length&&"MultiPartitions"===r.__typename&&r.primaryDimensionName!==t[0].name,o=i?[t[1],t[0]]:t,a=b(o,r),s=function(e){if(e.length!==o.length)return console.warn("[stateForKey] called with incorrect number of dimensions"),x.AB.MISSING;var n=e.map((function(e,n){return o[n].partitionKeys.indexOf(e)})),t=a.find((function(e){return e.start.idx<=n[0]&&e.end.idx>=n[0]}));return t?t.subranges?t.subranges.find((function(e){return e.start.idx<=n[1]&&e.end.idx>=n[1]}))?x.AB.SUCCESS:x.AB.MISSING:x.AB.SUCCESS:x.AB.MISSING};return{assetKey:n,dimensions:t.map((function(e){return{name:e.name,partitionKeys:e.partitionKeys}})),stateForKey:function(e){return s(i?e.reverse():e)},stateForSingleDimension:function(e,n,t){if(0===o.length)return x.AB.MISSING;if(0===e&&1===o.length)return s([n]);var r=(0,c.Z)(o,2),l=r[0],u=r[1];if(i&&(e=1-e),0===e){if(t)return(0,v.rY)(t.map((function(e){return s([n,e])})));var d=l.partitionKeys.indexOf(n),p=a.find((function(e){return e.start.idx<=d&&e.end.idx>=d}));return(null===p||void 0===p?void 0:p.value)||x.AB.MISSING}if(1===e){if(t)return(0,v.rY)(t.map((function(e){return s([e,n])})));var f=u.partitionKeys.indexOf(n),m=a.filter((function(e){var n;return null===(n=e.subranges)||void 0===n?void 0:n.some((function(e){return e.start.idx<=f&&e.end.idx>=f}))}));return 0===m.length?x.AB.MISSING:m.length<a.length?x.AB.SUCCESS_MISSING:S(m,l.partitionKeys.length)?x.AB.SUCCESS:x.AB.SUCCESS_MISSING}throw new Error("stateForSingleDimension asked for third dimension")}}}function b(e,n){var t=[];if(0===e.length)return t;if("DefaultPartitions"===n.__typename){var r=e[0],i=r.partitionKeys.length;return n.materializedPartitions.length===i?[{start:{key:r.partitionKeys[0],idx:0},end:{key:r.partitionKeys[i-1],idx:i-1},value:x.AB.SUCCESS}]:n.materializedPartitions.map((function(e){var n=r.partitionKeys.indexOf(e);return{start:{key:e,idx:n},end:{key:e,idx:n},value:x.AB.SUCCESS}}))}var o,a=(0,l.Z)(n.ranges);try{for(a.s();!(o=a.n()).done;){var s=o.value;if("TimePartitionRange"===s.__typename)t.push({value:x.AB.SUCCESS,start:{key:s.startKey,idx:e[0].partitionKeys.indexOf(s.startKey)},end:{key:s.endKey,idx:e[0].partitionKeys.indexOf(s.endKey)}});else if("MaterializedPartitionRange2D"===s.__typename){if(2!==e.length)return console.warn("[addKeyIndexesToMaterializedRanges] Found 2D health data for 1D asset"),t;var u=(0,c.Z)(e,2),d=u[0],p=u[1],f=b([p],s.secondaryDim),m=S(f,p.partitionKeys.length);t.push({value:m?x.AB.SUCCESS:x.AB.SUCCESS_MISSING,subranges:f,start:{key:s.primaryDimStartKey,idx:d.partitionKeys.indexOf(s.primaryDimStartKey)},end:{key:s.primaryDimEndKey,idx:d.partitionKeys.indexOf(s.primaryDimEndKey)}})}else(0,y.UT)(s)}}catch(h){a.e(h)}finally{a.f()}return t}function S(e,n){var t,r=0,i=(0,l.Z)(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;if(o.start.idx!==r)return!1;r=o.end.idx+1}}catch(a){i.e(a)}finally{i.f()}return r===n}function N(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=g.useState([]),r=(0,c.Z)(t,2),i=r[0],l=r[1],u=(0,p.x)(),f=e.map((function(e){return JSON.stringify(e)})),m=JSON.stringify(f),y=f.find((function(e){return!i.some((function(t){return JSON.stringify(t.assetKey)===e&&t.fetchedAt===n}))}));return g.useMemo((function(){if(y){var e=JSON.parse(y),t=function(){var t=(0,s.Z)(d().mark((function t(){var r,i,s;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.query({query:w,fetchPolicy:"network-only",variables:{assetKey:{path:e.path}}});case 2:r=t.sent,i=r.data,s=j(i,e),l((function(t){return[].concat((0,a.Z)(t.filter((function(n){return!h()(n.assetKey,e)}))),[(0,o.Z)((0,o.Z)({},s),{},{fetchedAt:n})])}));case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}}),[u,y,n]),g.useMemo((function(){var e=JSON.parse(m);return i.filter((function(n){return e.includes(JSON.stringify(n.assetKey))}))}),[m,i])}var w=(0,f.Ps)(r||(r=(0,i.Z)(["\n  query PartitionHealthQuery($assetKey: AssetKeyInput!) {\n    assetNodeOrError(assetKey: $assetKey) {\n      ... on AssetNode {\n        id\n        partitionKeysByDimension {\n          name\n          partitionKeys\n        }\n        materializedPartitions {\n          ... on TimePartitions {\n            ranges {\n              startTime\n              endTime\n              startKey\n              endKey\n            }\n          }\n          ... on DefaultPartitions {\n            materializedPartitions\n          }\n          ... on MultiPartitions {\n            primaryDimensionName\n            ranges {\n              primaryDimStartKey\n              primaryDimEndKey\n              primaryDimStartTime\n              primaryDimEndTime\n              secondaryDim {\n                ... on TimePartitions {\n                  ranges {\n                    startTime\n                    endTime\n                    startKey\n                    endKey\n                  }\n                }\n                ... on DefaultPartitions {\n                  materializedPartitions\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n"])))},32369:function(e,n,t){t.d(n,{f:function(){return c}});var r,i=t(99500),o=t(73701),a=t(3159),s=t(325),l=t(79082);function c(e,n){var t=(0,o.a)(u,{variables:{repositoryLocationName:e.location,repositoryName:e.name,pipelineName:n}}).data;return s.useMemo((function(){return{partitionSet:"PartitionSets"===(null===t||void 0===t?void 0:t.partitionSetsOrError.__typename)?t.partitionSetsOrError.results[0]:void 0,partitionSetError:"PipelineNotFoundError"===(null===t||void 0===t?void 0:t.partitionSetsOrError.__typename)||"PythonError"===(null===t||void 0===t?void 0:t.partitionSetsOrError.__typename)?t.partitionSetsOrError:void 0}}),[t])}var u=(0,a.Ps)(r||(r=(0,i.Z)(["\n  query AssetJobPartitionSetsQuery(\n    $pipelineName: String!\n    $repositoryName: String!\n    $repositoryLocationName: String!\n  ) {\n    partitionSetsOrError(\n      pipelineName: $pipelineName\n      repositorySelector: {\n        repositoryName: $repositoryName\n        repositoryLocationName: $repositoryLocationName\n      }\n    ) {\n      __typename\n      ... on PipelineNotFoundError {\n        __typename\n        message\n      }\n      ... on PartitionSets {\n        __typename\n        results {\n          id\n          name\n          mode\n          solidSelection\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n"])),l.B)},66855:function(e,n,t){t.d(n,{fE:function(){return h},ZC:function(){return g},T8:function(){return y}});var r,i,o,a=t(99500),s=t(59019),l=t(73701),c=t(3159),u=t(58891),d=t.n(u),p=t(325),f=t(4735),m=t(52598);function h(e,n,t){var r=t.assetHasDefinedPartitions,i=n.asOf?"".concat(Number(n.asOf)+1):void 0,o=r?"partition":"time",a=void 0!==n.partition?"partition":void 0!==n.time||i?"time":o,c=r&&"partition"===a,u=(0,l.a)(x,{variables:c?{assetKey:{path:e.path},before:i,partitionInLast:120}:{assetKey:{path:e.path},before:i,limit:100}}),f=u.data,m=u.loading,h=u.refetch;return p.useMemo((function(){var e,n="Asset"===(null===f||void 0===f?void 0:f.assetOrError.__typename)?null===f||void 0===f?void 0:f.assetOrError:null,t=(null===n||void 0===n?void 0:n.assetMaterializations)||[],r=(null===n||void 0===n?void 0:n.assetObservations)||[],i=null===n||void 0===n||null===(e=n.definition)||void 0===e?void 0:e.partitionKeys;return{asset:n,loadedPartitionKeys:c&&i?i.slice(i.length-120):d()([].concat((0,s.Z)(t),(0,s.Z)(r)).map((function(e){return e.partition})).filter(Boolean)).sort(),materializations:t,observations:r,loading:m,refetch:h,xAxis:a}}),[f,m,h,c,a])}var g=(0,c.Ps)(r||(r=(0,a.Z)(["\n  fragment AssetMaterializationFragment on MaterializationEvent {\n    partition\n    tags {\n      key\n      value\n    }\n    runOrError {\n      ... on PipelineRun {\n        id\n        runId\n        mode\n        repositoryOrigin {\n          id\n          repositoryName\n          repositoryLocationName\n        }\n        status\n        pipelineName\n        pipelineSnapshotId\n      }\n    }\n    runId\n    timestamp\n    stepKey\n    label\n    description\n    metadataEntries {\n      ...MetadataEntryFragment\n    }\n    assetLineage {\n      ...AssetLineageFragment\n    }\n  }\n\n  ","\n  ","\n"])),f.it,m.Q),y=(0,c.Ps)(i||(i=(0,a.Z)(["\n  fragment AssetObservationFragment on ObservationEvent {\n    partition\n    tags {\n      key\n      value\n    }\n    runOrError {\n      ... on PipelineRun {\n        id\n        runId\n        mode\n        repositoryOrigin {\n          id\n          repositoryName\n          repositoryLocationName\n        }\n        status\n        pipelineName\n        pipelineSnapshotId\n      }\n    }\n    runId\n    timestamp\n    stepKey\n    label\n    description\n    metadataEntries {\n      ...MetadataEntryFragment\n    }\n  }\n\n  ","\n"])),f.it),x=(0,c.Ps)(o||(o=(0,a.Z)(["\n  query AssetEventsQuery(\n    $assetKey: AssetKeyInput!\n    $limit: Int\n    $before: String\n    $partitionInLast: Int\n  ) {\n    assetOrError(assetKey: $assetKey) {\n      ... on Asset {\n        id\n        key {\n          path\n        }\n        assetObservations(\n          limit: $limit\n          beforeTimestampMillis: $before\n          partitionInLast: $partitionInLast\n        ) {\n          ...AssetObservationFragment\n        }\n        assetMaterializations(\n          limit: $limit\n          beforeTimestampMillis: $before\n          partitionInLast: $partitionInLast\n        ) {\n          ...AssetMaterializationFragment\n        }\n\n        definition {\n          id\n          partitionKeys\n        }\n      }\n    }\n  }\n\n  ","\n  ","\n"])),y,g)},89493:function(e,n,t){t.d(n,{KC:function(){return Z},Fp:function(){return T},UU:function(){return z},L9:function(){return D}});var r,i,o,a,s=t(99500),l=t(95764),c=t(19065),u=t(59019),d=t(922),p=t(73701),f=t(3159),m=t(34056),h=t(23730),g=t(7838),y=t(61104),x=t(32030),v=t(34595),j=t(8412),b=t(6474),S=t(75453),N=t(325),w=t(52848),C=t(14156),k=t(79082),E=t(12436),P=t(27719),_=t(76314),K=t(33902),I=t(26306),A=t(32289),Z=function(e){var n=e.pipeline,t=e.base,r=e.onSaveSession,i=e.onSelectPreset,o=e.onSelectPartition,a=e.partitionSets,s=e.repoAddress,l=n.isJob,c=n.presets,d=N.useMemo((function(){return[].concat((0,u.Z)(c),(0,u.Z)(a)).sort((function(e,n){return e.name.localeCompare(n.name)}))}),[c,a]);return(0,A.jsxs)(L,{children:[l||d.length<1?null:(0,A.jsx)(F,{label:t?"presetName"in t?"Preset: ".concat(t.presetName):"Partition Set: ".concat(t.partitionsSetName):c.length&&!a.length?"Preset":!c.length&&a.length?"Partition Set":"Preset / Partition Set",configGenerators:d,onSelect:function(e){"PartitionSet"===e.__typename?r({mode:e.mode,base:{partitionsSetName:e.name,partitionName:null,tags:t?t.tags:null}}):i(e)}}),t&&"partitionsSetName"in t?(0,A.jsx)(O,{pipeline:n,partitionSetName:t.partitionsSetName,value:t.partitionName,onSelect:o,repoAddress:s}):null]})},O=N.memo((function(e){var n=e.partitionSetName,t=e.value,r=e.onSelect,i=e.repoAddress,o=N.useContext(w.I).basePath,a=(0,I.$)(i),s=(0,p.a)(R,{variables:{repositorySelector:a,partitionSetName:n},fetchPolicy:"network-only"}),d=s.data,f=s.loading,b="".concat("dagit.partition-sort-order","-").concat(o,"-").concat((0,K.Uz)(i),"-").concat(n),S=(0,_.U)(b,(function(e){return void 0===e?"asc":e})),k=(0,c.Z)(S,2),P=k[0],Z=k[1],O=N.useMemo((function(){var e="PartitionSet"===(null===d||void 0===d?void 0:d.partitionSetOrError.__typename)&&"Partitions"===(null===d||void 0===d?void 0:d.partitionSetOrError.partitionsOrError.__typename)?d.partitionSetOrError.partitionsOrError.results:[];return"asc"===P?e:(0,u.Z)(e).reverse()}),[d,P]),F="PartitionSet"===(null===d||void 0===d?void 0:d.partitionSetOrError.__typename)&&"Partitions"!==(null===d||void 0===d?void 0:d.partitionSetOrError.partitionsOrError.__typename)?d.partitionSetOrError.partitionsOrError:null,L=O.find((function(e){return e.name===t})),T=N.useCallback((function(e){e.preventDefault(),Z((function(e){return"asc"===e?"desc":"asc"}))}),[Z]),z=O.length?(0,A.jsx)(M,{onMouseDown:T,children:(0,A.jsx)(h.JO,{name:"sort_by_alpha",color:g.w.Gray400})}):void 0,D={placeholder:"Partition",style:{width:180},intent:(f?t:L)?m.S.NONE:m.S.DANGER,rightElement:z};return f&&0===O.length?(0,A.jsx)(y.U5,{inputProps:(0,l.Z)((0,l.Z)({},D),{},{rightElement:t?void 0:(0,A.jsx)(x.x,{flex:{direction:"column",justifyContent:"center"},padding:{right:4},style:{height:"30px"},children:(0,A.jsx)(v.$,{purpose:"body-text"})})}),items:[],itemRenderer:function(){return null},noResults:(0,A.jsx)(j.sN,{disabled:!0,text:"Loading..."}),inputValueRenderer:function(e){return e},selectedItem:t,onItemSelect:function(){}},"loading"):(F&&(0,C._)({body:(0,A.jsx)(E.T9,{error:F})}),(0,A.jsx)(y.U5,{defaultSelectedItem:L,items:O,inputProps:D,inputValueRenderer:function(e){return e.name},itemPredicate:function(e,n){return 0===e.length||n.name.includes(e)},itemRenderer:function(e,n){return(0,A.jsx)(j.sN,{active:n.modifiers.active,onClick:n.handleClick,text:e.name},e.name)},noResults:(0,A.jsx)(j.sN,{disabled:!0,text:"No presets."}),onItemSelect:function(e){r(a,n,e.name)}},L?L.name:"none"))})),F=N.memo((function(e){var n=e.configGenerators,t=e.label,r=e.onSelect,i=N.useRef(null);return(0,A.jsx)("div",{children:(0,A.jsx)(P.b,{shortcutLabel:"\u2325E",shortcutFilter:function(e){return"KeyE"===e.code&&e.altKey},onShortcut:function(){var e;return null===(e=i.current)||void 0===e?void 0:e.click()},children:(0,A.jsx)(b.P,{items:n,itemPredicate:function(e,n){return 0===e.length||n.name.includes(e)},itemListRenderer:function(e){var n=e.itemsParentRef,t=e.renderItem,r=e.filteredItems,i=r.filter((function(e){return"PipelinePreset"===e.__typename})).map(t).filter(Boolean),o=r.filter((function(e){return"PartitionSet"===e.__typename})).map(t).filter(Boolean),a=i.length>0&&o.length>0;return(0,A.jsxs)(j.v2,{ulRef:n,children:[a&&(0,A.jsx)(j.sN,{disabled:!0,text:"Presets"}),i,a&&(0,A.jsx)(j.R,{}),a&&(0,A.jsx)(j.sN,{disabled:!0,text:"Partition Sets"}),o]})},itemRenderer:function(e,n){return(0,A.jsx)(j.sN,{active:n.modifiers.active,onClick:n.handleClick,text:(0,A.jsxs)("div",{children:[e.name,(0,A.jsx)("div",{style:{opacity:.4,fontSize:"0.75rem"},children:[e.solidSelection?1===e.solidSelection.length?"Ops: ".concat(e.solidSelection[0]):"Ops: ".concat(e.solidSelection.length):"Ops: All","Mode: ".concat(e.mode)].join(" - ")})]})},e.name)},noResults:(0,A.jsx)(j.sN,{disabled:!0,text:"No presets."}),onItemSelect:r,children:(0,A.jsx)(S.zx,{ref:i,"data-test-id":"preset-selector-button",rightIcon:(0,A.jsx)(h.JO,{name:"expand_more"}),children:t})})})})})),M=d.ZP.button.withConfig({displayName:"ConfigEditorConfigPicker__SortButton",componentId:"sc-9oggai-0"})(["border:0;cursor:pointer;padding:4px;margin:3px 3px 0 0;background-color:",";border-radius:4px;transition:background-color 100ms;:hover,:focus{background-color:",";outline:none;","{background-color:",";}}"],g.w.White,g.w.Gray100,h.a1,g.w.Gray700),L=d.ZP.div.withConfig({displayName:"ConfigEditorConfigPicker__PickerContainer",componentId:"sc-9oggai-1"})(["display:flex;justify:space-between;align-items:center;gap:6px;"]),R=(0,f.Ps)(r||(r=(0,s.Z)(["\n  query ConfigPartitionsQuery(\n    $repositorySelector: RepositorySelector!\n    $partitionSetName: String!\n  ) {\n    partitionSetOrError(\n      repositorySelector: $repositorySelector\n      partitionSetName: $partitionSetName\n    ) {\n      __typename\n      ... on PartitionSet {\n        id\n        partitionsOrError {\n          ... on Partitions {\n            results {\n              ...ConfigPartitionResult\n            }\n          }\n          ...PythonErrorFragment\n        }\n      }\n    }\n  }\n\n  fragment ConfigPartitionResult on Partition {\n    name\n  }\n\n  ","\n"])),k.B),T=(0,f.Ps)(i||(i=(0,s.Z)(["\n  query ConfigPartitionSelectionQuery(\n    $repositorySelector: RepositorySelector!\n    $partitionSetName: String!\n    $partitionName: String!\n  ) {\n    partitionSetOrError(\n      repositorySelector: $repositorySelector\n      partitionSetName: $partitionSetName\n    ) {\n      __typename\n      ... on PartitionSet {\n        id\n        partition(partitionName: $partitionName) {\n          name\n          solidSelection\n          runConfigOrError {\n            ... on PartitionRunConfig {\n              yaml\n            }\n            ...PythonErrorFragment\n          }\n          mode\n          tagsOrError {\n            ... on PartitionTags {\n              results {\n                key\n                value\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n    }\n  }\n\n  ","\n"])),k.B),z=(0,f.Ps)(o||(o=(0,s.Z)(["\n  fragment ConfigEditorGeneratorPipelineFragment on Pipeline {\n    id\n    isJob\n    name\n    presets {\n      ...ConfigEditorPipelinePreset\n    }\n    tags {\n      key\n      value\n    }\n  }\n\n  fragment ConfigEditorPipelinePreset on PipelinePreset {\n    name\n    mode\n    solidSelection\n    runConfigYaml\n    tags {\n      key\n      value\n    }\n  }\n"]))),D=(0,f.Ps)(a||(a=(0,s.Z)(["\n  fragment ConfigEditorGeneratorPartitionSetsFragment on PartitionSets {\n    results {\n      id\n      ...PartitionSetForConfigEditor\n    }\n  }\n\n  fragment PartitionSetForConfigEditor on PartitionSet {\n    id\n    name\n    mode\n    solidSelection\n  }\n"])))},25859:function(e,n,t){t.d(n,{e:function(){return _},$:function(){return K}});var r,i,o=t(99500),a=t(73701),s=t(3159),l=t(922),c=(t(95550),t(325)),u=t(32289),d=(0,l.vJ)(r||(r=(0,o.Z)(["\n  .CodeMirror-hints,\n  .CodeMirror-hints.dagit {\n    z-index: 100;\n  }\n"]))),p=t(8358),f=t(27601),m=t(63579),h=t(79082),g=t(78093),y=t(96294),x=t(23196),v=t(76336),j=t(89493),b=t(44969),S=t(6364),N=t(19065),w=t(95764),C=t(88796),k=t(40433),E=function(e){var n=e.launchpadType,t=e.pipeline,r=e.partitionSets,i=e.repoAddress,o=e.sessionPresets,a=(0,C.Bv)(t,r),s=(0,C.h5)((0,w.Z)((0,w.Z)({},o),{},{runConfigYaml:a.runConfigYaml})),l=c.useState(s),d=(0,N.Z)(l,2),p=d[0],f=d[1];return(0,u.jsx)(k.Z,{launchpadType:n,session:p,onSave:function(e){var n=(0,w.Z)((0,w.Z)({},p),e);f(n)},pipeline:t,partitionSets:r,repoAddress:i})},P=c.lazy((function(){return t.e(566).then(t.bind(t,90566))})),_=function(e){var n=e.repoAddress,t=e.sessionPresets,r=e.assetJobName,i=e.open,o=e.setOpen;return(0,u.jsxs)(p.Vq,{style:{height:"90vh",width:"80%"},isOpen:i,canEscapeKeyClose:!0,canOutsideClickClose:!0,onClose:function(){return o(!1)},children:[(0,u.jsx)(p.fK,{icon:"layers",label:"Launchpad (configure assets)"}),(0,u.jsx)(d,{}),(0,u.jsx)(I,{launchpadType:"asset",pipelinePath:r,repoAddress:n,sessionPresets:t})]})},K=function(e){var n=e.repoAddress,t=(0,f.UO)(),r=t.pipelinePath,i=t.repoPath;return(0,m.xz)(n.location).canLaunchPipelineExecution.enabled?(0,u.jsx)(I,{launchpadType:"job",pipelinePath:r,repoAddress:n}):(0,u.jsx)(f.l_,{to:"/locations/".concat(i,"/pipeline_or_job/").concat(r)})},I=function(e){var n,t;(0,g.Px)();var r=e.pipelinePath,i=e.repoAddress,o=e.launchpadType,s=e.sessionPresets,l=(0,y.p3)(r),d=l.pipelineName,p=(0,v.Ux)(i),f=(0,v.E8)(p,d);(0,x.b)(l,f),(0,y.Bj)(e);var m=i.name,h=i.location,j=(0,a.a)(A,{variables:{repositoryName:m,repositoryLocationName:h,pipelineName:d},partialRefetch:!0}),N=null===j||void 0===j||null===(n=j.data)||void 0===n?void 0:n.pipelineOrError,w=null===j||void 0===j||null===(t=j.data)||void 0===t?void 0:t.partitionSetsOrError;if(!N||!w)return(0,u.jsx)(S.m,{});if("PipelineNotFoundError"===w.__typename||"PipelineNotFoundError"===N.__typename){var C="PipelineNotFoundError"===N.__typename?N.message:"No data returned from GraphQL";return""!==d?(0,u.jsx)(b.U,{icon:"error",title:f?"Job not found":"Pipeline not found",description:C}):(0,u.jsx)(b.U,{icon:"no-results",title:f?"Select a job":"Select a pipeline",description:C})}if("InvalidSubsetError"===N.__typename)throw new Error("Should never happen because we do not request a subset");return"PythonError"===N.__typename?(0,u.jsx)(b.U,{icon:"error",title:"Python Error",description:N.message}):w&&"PythonError"===w.__typename?(0,u.jsx)(b.U,{icon:"error",title:"Python Error",description:w.message}):"asset"===o?(0,u.jsx)(E,{launchpadType:o,pipeline:N,partitionSets:w,repoAddress:i,sessionPresets:s||{}}):(0,u.jsx)(c.Suspense,{fallback:(0,u.jsx)("div",{}),children:(0,u.jsx)(P,{launchpadType:o,pipeline:N,partitionSets:w,repoAddress:i})})},A=(0,s.Ps)(i||(i=(0,o.Z)(["\n  query LaunchpadRootQuery(\n    $pipelineName: String!\n    $repositoryName: String!\n    $repositoryLocationName: String!\n  ) {\n    pipelineOrError(\n      params: {\n        pipelineName: $pipelineName\n        repositoryName: $repositoryName\n        repositoryLocationName: $repositoryLocationName\n      }\n    ) {\n      ... on PipelineNotFoundError {\n        message\n      }\n      ... on Pipeline {\n        id\n        ...LaunchpadSessionPipelineFragment\n      }\n      ...PythonErrorFragment\n    }\n    partitionSetsOrError(\n      pipelineName: $pipelineName\n      repositorySelector: {\n        repositoryName: $repositoryName\n        repositoryLocationName: $repositoryLocationName\n      }\n    ) {\n      __typename\n      ... on PipelineNotFoundError {\n        message\n      }\n      ...LaunchpadSessionPartitionSetsFragment\n      ...PythonErrorFragment\n    }\n  }\n\n  fragment LaunchpadSessionPartitionSetsFragment on PartitionSets {\n    ...ConfigEditorGeneratorPartitionSetsFragment\n  }\n\n  fragment LaunchpadSessionPipelineFragment on Pipeline {\n    id\n    isJob\n    isAssetJob\n    ...ConfigEditorGeneratorPipelineFragment\n    modes {\n      id\n      name\n      description\n    }\n  }\n\n  ","\n  ","\n  ","\n"])),h.B,j.L9,j.UU)},40433:function(e,n,t){t.d(n,{Z:function(){return bn}});var r=t(99500),i=t(85358),o=t(59019),a=t(47427),s=t(19065),l=t(95764),c=t(922),u=t(95550),d=t.n(u),p=t(31522),f=t(73701),m=t(3159),h=t(57994),g=t(98907),y=t(64428),x=t(28463),v=(t(39388),t(50680),t(25559),t(44186),t(99912),t(94407),t(39519),t(36341),t(33961),t(36852),t(81452),t(6968),t(43615)),j=t.n(v),b=t(325),S=t(6796),N=t(24818),w=t(13091),C=t.n(w),k="CodeMirror-lint-markers";function E(e){e.parentNode&&e.parentNode.removeChild(e)}function P(e,n,t){var r=function(e,n,t){var r=document.createElement("div"),i=t.getBoundingClientRect();return r.className="CodeMirror-lint-tooltip",r.appendChild(n.cloneNode(!0)),document.body.appendChild(r),i.top>r.clientHeight?(r.style.top=i.top-r.clientHeight-5+"px",r.style.left=i.left+5+"px"):(r.style.top=i.top+5+"px",r.style.left=i.right+10+"px"),null!=r.style.opacity&&(r.style.opacity=1),r}(0,n,t);function i(){var e;C().off(t,"mouseout",i),r&&((e=r).parentNode&&(null==e.style.opacity&&E(e),e.style.opacity=0,setTimeout((function(){E(e)}),600)),r=null)}var o=setInterval((function(){if(r)for(var e=t;;e=e.parentNode){if(e&&11===e.nodeType&&(e=e.host),e===document.body)return;if(!e){i();break}}if(!r)return clearInterval(o)}),400);C().on(t,"mouseout",i)}function _(e){var n=e.state.lint;n.hasGutter&&e.clearGutter(k);for(var t=0;t<n.marked.length;++t)n.marked[t].clear();n.marked.length=0}function K(e,n,t,r){var i=document.createElement("div"),o=i;return i.className="CodeMirror-lint-marker CodeMirror-lint-marker-"+n,t&&((o=i.appendChild(document.createElement("div"))).className="CodeMirror-lint-marker CodeMirror-lint-marker-multiple"),!1!==r&&C().on(o,"mouseover",(function(n){P(0,e,o)})),i}function I(e){var n=e.severity;n||(n="error");var t=document.createElement("div");return t.className="CodeMirror-lint-message CodeMirror-lint-message-"+n,"undefined"!==typeof e.messageHTML?t.innerHTML=e.messageHTML:t.appendChild(document.createTextNode(e.message)),t}function A(e,n){_(e);for(var t,r,i=e.state.lint,o=i.options,a=function(e){for(var n=[],t=0;t<e.length;++t){var r=e[t],i=r.from.line;(n[i]||(n[i]=[])).push(r)}return n}(n),s=0;s<a.length;++s){var l=a[s];if(l){for(var c=null,u=i.hasGutter&&document.createDocumentFragment(),d=0;d<l.length;++d){var p=l[d],f=p.severity;f||(f="error"),r=f,c="error"===(t=c)?t:r,o.formatAnnotation&&(p=o.formatAnnotation(p)),i.hasGutter&&u.appendChild(I(p)),p.to&&i.marked.push(e.markText(p.from,p.to,{className:"CodeMirror-lint-mark CodeMirror-lint-mark-"+f,__annotation:p}))}i.hasGutter&&e.setGutterMarker(s,k,K(u,c,l.length>1,i.options.tooltips))}}o.onUpdateLinting&&o.onUpdateLinting(n,a,e)}function Z(e){var n=e.state.lint.options,t=n.options||n,r=n.getAnnotations||e.getHelper(C().Pos(0,0),"lint");if(r)if(n.async||r.async)!function(e,n,t){var r=e.state.lint,i=++r.waitingFor;function o(){i=-1,e.off("change",o)}e.on("change",o),n(e.getValue(),(function(n,t){e.off("change",o),r.waitingFor===i&&(t&&n instanceof C()&&(n=t),e.operation((function(){A(e,n)})))}),t,e)}(e,r,t);else{var i=r(e.getValue(),t,e);if(!i)return;i.then?i.then((function(n){e.operation((function(){A(e,n)}))})):e.operation((function(){A(e,i)}))}}function O(e){var n=e.state.lint;n&&(clearTimeout(n.timeout),n.timeout=setTimeout((function(){Z(e)}),n.options.delay||500))}function F(e,n){for(var t=(n.target||n.srcElement).getBoundingClientRect(),r=(t.left+t.right)/2,i=(t.top+t.bottom)/2,o=e.coordsChar({left:r,top:i},"client"),a=e.findMarksAt(o),s=e.getHelper(C().Pos(0,0),"dagster-docs")(e,o),l=[],c=0;c<a.length;++c){var u=a[c].__annotation;u&&l.push(u)}(s||l.length)&&function(e,n,t){var r=t.target||t.srcElement,i=document.createDocumentFragment();if(e){var o=document.createElement("div");o.textContent=e,i.appendChild(o),n.length&&(o.style.paddingBottom="4px",o.style.marginBottom="4px",o.style.borderBottom="1px solid rgba(0,0,0,0.25)")}for(var a=0;a<n.length;a++){var s=n[a];i.appendChild(I(s))}P(0,i,r)}(s,l,n)}function M(e,n,t){this.marked=[],this.options=n,this.timeout=null,this.hasGutter=t,this.onMouseOver=function(n){F(e,n)},this.waitingFor=0}var L,R=t(13235),T=t(32289);C().defineOption("lint",!1,(function(e,n,t){if(t&&t!==C().Init&&(_(e),!1!==e.state.lint.options.lintOnChange&&e.off("change",O),C().off(e.getWrapperElement(),"mouseover",e.state.lint.onMouseOver),clearTimeout(e.state.lint.timeout),delete e.state.lint),n){for(var r=e.getOption("gutters"),i=!1,o=0;o<r.length;++o)r[o]===k&&(i=!0);var a=e.state.lint=new M(e,(s=n)instanceof Function?{getAnnotations:s}:(s&&!0!==s||(s={}),s),i);!1!==a.options.lintOnChange&&e.on("change",O),!1!==a.options.tooltips&&"gutter"!==a.options.tooltips&&C().on(e.getWrapperElement(),"mouseover",a.onMouseOver)}var s})),C().defineExtension("performLint",(function(){this.state.lint&&Z(this)}));var z,D,G=/^[a-zA-Z0-9_@(]$/,$=j()((function(e){e.performLint()}),1e3),B=(0,c.vJ)(L||(L=(0,r.Z)(["\n  .react-codemirror2 .CodeMirror.cm-s-config-editor {\n    height: initial;\n    position: absolute;\n    inset: 0;\n  }\n"]))),U=function(e){(0,y.Z)(t,e);var n=(0,x.Z)(t);function t(){var e;(0,h.Z)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=n.call.apply(n,[this].concat(i)))._editor=void 0,e.moveCursor=function(n,t){var r;if(e._editor){e._editor.setCursor(n,t,{scroll:!1});var i=e._editor.getScrollInfo().clientHeight,o=e._editor.cursorCoords(!0,"local"),a=o.left,s=o.top;null===(r=e._editor)||void 0===r||r.scrollIntoView({left:a,right:a,top:s-20,bottom:s+(i-20)}),e._editor.focus()}},e.moveCursorToPath=function(n){if(e._editor){var t=e._editor.getDoc(),r=S.wL(e.props.configCode),i=(0,R.$P)(r,n,"key");if(i){var o=t.posFromIndex(i?i.start:0);e.moveCursor(o.line,o.ch)}}},e}return(0,g.Z)(t,[{key:"componentDidUpdate",value:function(e){this._editor&&e.configSchema!==this.props.configSchema&&this.performInitialPass()}},{key:"shouldComponentUpdate",value:function(e){return e.configCode!==this.props.configCode||e.readOnly!==this.props.readOnly||e.configSchema!==this.props.configSchema}},{key:"performInitialPass",value:function(){$(this._editor);var e=(0,R.Im)(this._editor).context;this.props.onHelpContextChange(e?{type:e.closestMappingType}:null)}},{key:"render",value:function(){var e=this;return(0,T.jsxs)("div",{style:{flex:1,position:"relative"},children:[(0,T.jsx)(B,{}),(0,T.jsx)(N.X9,{value:this.props.configCode,theme:["config-editor"],options:{mode:"yaml",lineNumbers:!0,readOnly:this.props.readOnly,indentUnit:2,smartIndent:!0,showCursorWhenSelecting:!0,lintOnChange:!1,lint:{checkConfig:this.props.checkConfig,lintOnChange:!1,onUpdateLinting:!1},hintOptions:{completeSingle:!1,closeOnUnfocus:!1,schema:this.props.configSchema},keyMap:"sublime",extraKeys:{"Cmd-Space":function(e){return e.showHint({completeSingle:!0})},"Ctrl-Space":function(e){return e.showHint({completeSingle:!0})},"Alt-Space":function(e){return e.showHint({completeSingle:!0})},"Shift-Tab":function(e){return e.execCommand("indentLess")},Tab:function(e){return e.execCommand("indentMore")},"Cmd-F":"findPersistent","Ctrl-F":"findPersistent"},gutters:["CodeMirror-foldgutter","CodeMirror-lint-markers","CodeMirror-linenumbers"],foldGutter:!0},editorDidMount:function(n){e._editor=n,e.performInitialPass()},onBeforeChange:function(n,t,r){e.props.onConfigChange(r)},onCursorActivity:function(n){if(n.getSelection().length)e.props.onHelpContextChange(null);else{var t=(0,R.Im)(n).context;e.props.onHelpContextChange(t?{type:t.closestMappingType}:null)}},onChange:function(e){$(e)},onBlur:function(e){$(e)},onKeyUp:function(e,n){G.test(n.key)&&e.execCommand("autocomplete")}})]})}}]),t}(b.Component),q=function(e,n){return(e&&e.type.key)===(n&&n.type.key)},V=t(7838),J=t(71725),Q=b.memo((function(e){var n=e.context,t=e.allInnerTypes;return n?(0,T.jsxs)(W,{children:[(0,T.jsx)(H,{children:(0,T.jsx)(J.L,{type:n.type,typesInScope:t,maxDepth:2})}),(0,T.jsx)(Y,{children:"Use Ctrl+Space to show auto-completions inline."})]}):(0,T.jsx)(W,{})}),(function(e,n){return q(e.context,n.context)})),Y=c.ZP.div.withConfig({displayName:"ConfigEditorHelp__AutocompletionsNote",componentId:"sc-1pjkbac-0"})(["font-size:0.75rem;text-align:center;padding:4px;border-top:1px solid ",";background:",";color:",";"],V.w.KeylineGray,V.w.Gray100,V.w.Gray500),H=c.ZP.div.withConfig({displayName:"ConfigEditorHelp__ConfigScrollWrap",componentId:"sc-1pjkbac-1"})(["padding:8px;color:",";flex:1;pointer-events:initial;max-height:100%;overflow-y:auto;"],V.w.Dark),W=c.ZP.div.withConfig({displayName:"ConfigEditorHelp__Container",componentId:"sc-1pjkbac-2"})(["position:relative;display:flex;flex-direction:column;background-color:",";height:100%;"],V.w.Gray50),X=t(32030),ee=t(17912),ne=t(88863),te=t(75453),re=t(23730),ie=t(6466),oe=t(3810),ae=t.n(oe),se=t(54972),le=t.n(se),ce=t(14156),ue=t(12436),de=t(27719),pe=t(39061),fe=(0,m.Ps)(z||(z=(0,r.Z)(["\n  fragment ConfigEditorRunConfigSchemaFragment on RunConfigSchema {\n    rootConfigType {\n      key\n    }\n    allConfigTypes {\n      ...AllConfigTypesForEditor\n    }\n  }\n\n  fragment AllConfigTypesForEditor on ConfigType {\n    key\n    description\n    isSelector\n    typeParamKeys\n    ... on RegularConfigType {\n      givenName\n    }\n    ... on MapConfigType {\n      keyLabelName\n    }\n    ... on EnumConfigType {\n      givenName\n      values {\n        value\n        description\n      }\n    }\n    ... on CompositeConfigType {\n      ...CompositeConfigTypeForSchema\n    }\n    ... on ScalarUnionConfigType {\n      key\n      scalarTypeKey\n      nonScalarTypeKey\n    }\n  }\n\n  fragment CompositeConfigTypeForSchema on CompositeConfigType {\n    fields {\n      name\n      description\n      isRequired\n      configTypeKey\n      defaultValueAsJson\n    }\n  }\n"]))),me=(0,m.Ps)(D||(D=(0,r.Z)(["\n  fragment ConfigEditorValidationFragment on PipelineConfigValidationResult {\n    __typename\n    ... on RunConfigValidationInvalid {\n      errors {\n        __typename\n        reason\n        message\n        stack {\n          entries {\n            __typename\n            ... on EvaluationStackPathEntry {\n              fieldName\n            }\n            ... on EvaluationStackListItemEntry {\n              listIndex\n            }\n            ... on EvaluationStackMapKeyEntry {\n              mapKey\n            }\n            ... on EvaluationStackMapValueEntry {\n              mapKey\n            }\n          }\n        }\n      }\n    }\n  }\n"])));function he(e){return e.map((function(e){switch(e.__typename){case"EvaluationStackPathEntry":return e.fieldName;case"EvaluationStackListItemEntry":return"".concat(e.listIndex);case"EvaluationStackMapKeyEntry":case"EvaluationStackMapValueEntry":return"".concat(e.mapKey)}}))}function ge(e,n){if("RunConfigValidationInvalid"!==n.__typename)return{isValid:!0};var t=n.errors.map((function(e){return{message:e.message,reason:e.reason,path:he(e.stack.entries)}})),r=S.ZP.parse(e),i=Object.keys(r);return t.forEach((function(e){0===e.path.length&&i.length&&(e.path=[i[0]])})),{isValid:!1,errors:t}}var ye,xe,ve=t(28064),je=t(33902),be=t(26306),Se=t(89493),Ne=t(6474),we=t(8412),Ce=function(e){var n=e.modeName?e.modes.find((function(n){return n.name===e.modeName})):e.modes[0];b.useEffect((function(){var t;n&&n.name!==e.modeName&&(null===(t=e.onModeChange)||void 0===t||t.call(e,n.name))}),[n,e.modeName]);var t=1===e.modes.length,r=!e.modeError,i=t&&r;return(0,T.jsx)(Ne.P,{activeItem:n,filterable:!0,disabled:i,items:e.modes,itemPredicate:function(e,n){return 0===e.length||n.name.includes(e)},itemRenderer:function(e,n){return(0,T.jsx)(we.sN,{active:n.modifiers.active,text:e.name,onClick:n.handleClick},e.name)},onItemSelect:function(n){var t;null===(t=e.onModeChange)||void 0===t||t.call(e,n.name)},children:(0,T.jsx)(te.zx,{icon:r?void 0:(0,T.jsx)(re.JO,{name:"error"}),intent:r?"none":"danger",title:i?"To add a mode, add a ModeDefinition to the pipeline.":"Current execution mode",disabled:i,rightIcon:(0,T.jsx)(re.JO,{name:"expand_more"}),"data-test-id":"mode-picker-button",children:r?n?"Mode: ".concat(n.name):"Select Mode":"Invalid Mode Selection"})})},ke=t(64451),Ee=t(33214),Pe=t(762),_e=t(25496),Ke=t(79082),Ie=t(27218),Ae=t(2112),Ze=t(65164),Oe=t(76336),Fe=(0,m.Ps)(ye||(ye=(0,r.Z)(["\n  query OpSelectorQuery($selector: PipelineSelector!, $requestScopeHandleID: String) {\n    pipelineOrError(params: $selector) {\n      __typename\n      ... on Pipeline {\n        id\n        name\n        solidHandles(parentHandleID: $requestScopeHandleID) {\n          handleID\n          solid {\n            name\n          }\n          ...GraphExplorerSolidHandleFragment\n        }\n      }\n      ... on PipelineNotFoundError {\n        message\n      }\n      ... on InvalidSubsetError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"])),Ae.Q,Ke.B),Me=function(e){var n=e.serverProvidedSubsetError,t=e.onChange,r=e.pipelineName,i=e.repoAddress,o=e.onFlattenGraphsChange,a=b.useState(!1),c=(0,s.Z)(a,2),u=c[0],d=c[1],p=b.useRef(null),m=e.flattenGraphs||!1,h=(0,l.Z)((0,l.Z)({},(0,be.$)(i)),{},{pipelineName:r}),g=(0,Oe.Ux)(i),y=(0,Oe.E8)(g,r),x=(0,f.a)(Fe,{variables:{selector:h,requestScopeHandleID:m?void 0:""}}),v=x.data,j=x.loading,S=e.query||"*",N=("Pipeline"===(null===v||void 0===v?void 0:v.pipelineOrError.__typename)?m?(0,Ie.i)(v.pipelineOrError.solidHandles):v.pipelineOrError.solidHandles:[]).map((function(e){return e.solid})),w=m||N.some((function(e){return"CompositeSolidDefinition"===e.definition.__typename})),C="Pipeline"!==(null===v||void 0===v?void 0:v.pipelineOrError.__typename)&&(null===v||void 0===v?void 0:v.pipelineOrError.message)||null,k=(0,_e.V)(N,S).all,E=!j&&0===k.length?y?"You must provide a valid op query or * to execute the entire job.":"You must provide a valid solid query or * to execute the entire pipeline.":n?n.message:C;return null!==v&&void 0!==v&&v.pipelineOrError?(0,T.jsx)(X.x,{flex:{direction:"row",alignItems:"center",gap:8},children:(0,T.jsx)(Pe.J,{isOpen:u&&!!E,position:"bottom-left",content:(0,T.jsx)(Le,{children:E}),children:(0,T.jsx)(de.b,{shortcutLabel:"\u2325S",shortcutFilter:function(e){return"KeyS"===e.code&&e.altKey},onShortcut:function(){var e;return null===(e=p.current)||void 0===e?void 0:e.focus()},children:(0,T.jsx)(Ze.j,{width:"*"!==S&&""!==S||u||w?350:90,intent:E?"danger":"none",items:N,ref:p,value:S,placeholder:"Type an op subset\u2026",onChange:function(e){""===e&&(e="*");var n=(0,_e.V)(N,e).all;n.length===N.length?t(null,e):t(n.map((function(e){return e.name})),e)},onFocus:function(){return d(!0)},onBlur:function(){return d(!1)},linkToPreview:{repoName:i.name,repoLocation:i.location,pipelineName:r,isJob:y},flattenGraphsEnabled:w,flattenGraphs:m,setFlattenGraphs:function(){o(!m)}})})})}):null},Le=c.ZP.div.withConfig({displayName:"OpSelector__PopoverErrorWrap",componentId:"sc-6j6o1g-0"})(["padding:4px 8px;border-radius:2px;border:1px solid ",";background:",";color:",";"],V.w.Red500,V.w.Red200,V.w.Red700),Re=t(16540),Te=t(81034),ze=t(12745),De=t(60652),Ge=t(11831),$e=t(54268),Be=t(50346),Ue=t(8546),qe=t(79540),Ve=["resources","ops","solids"];function Je(e){return!(!e||"object"!==typeof e||!("__typename"in e))}var Qe={invalid:{title:"You need to fix this configuration section.",intent:"danger"},missing:{title:"You need to add this configuration section.",intent:"danger"},present:{title:"This section is present and valid.",intent:"none"},none:{title:"This section is empty and valid.",intent:"none"}},Ye=function(e){var n,t=e.onRemoveExtraPaths,r=e.extraNodes,o=e.disabled,l=(0,qe.p)(),c={},u=[],p=(0,a.Z)(r);try{for(p.s();!(n=p.n()).done;){var f=n.value,m=f.split(".");if(2===m.length){var h=(0,s.Z)(m,2),g=h[0],y=h[1];c[g]||(c[g]=[]),c[g].push(y)}else u.push(f)}}catch(v){p.e(v)}finally{p.f()}var x=function(){var e=(0,i.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l({title:"Remove extra config",description:(0,T.jsxs)("div",{children:[(0,T.jsx)("p",{children:"You have provided extra configuration in your run config which does not conform to your\n            pipeline's config schema."}),Object.entries(c).length>0&&Object.entries(c).map((function(e){var n=(0,s.Z)(e,2),t=n[0],r=n[1];return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)("p",{children:["Extra ",t,":"]}),(0,T.jsx)("ul",{children:r.map((function(e){return(0,T.jsx)("li",{children:(0,T.jsx)(ze.EK,{children:e})},e)}))})]})})),u.length>0&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)("p",{children:"Other extra paths:"}),(0,T.jsx)("ul",{children:u.map((function(e){return(0,T.jsx)("li",{children:(0,T.jsx)(ze.EK,{children:e})},e)}))})]}),(0,T.jsx)("p",{children:"Clicking confirm will automatically remove this extra configuration from your run config."})]})});case 2:t(r);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,T.jsxs)(X.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,T.jsx)(te.zx,{disabled:o,onClick:x,children:"Remove extra config"}),o?(0,T.jsxs)(X.x,{flex:{direction:"row",gap:4,alignItems:"center"},children:[(0,T.jsx)(re.JO,{name:"check_circle",color:V.w.Green500}),"No extra config to remove"]}):null]})},He=function(e){var n=e.onScaffoldMissingConfig,t=e.missingNodes,r=e.disabled,o=(0,qe.p)(),a=(0,T.jsxs)("div",{children:[t.length>0&&(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)("p",{children:"Missing paths:"}),(0,T.jsx)("ul",{children:t.map((function(e){return(0,T.jsx)("li",{children:(0,T.jsx)(ze.EK,{children:e})},e)}))})]}),(0,T.jsx)("p",{children:"Clicking confirm will automatically scaffold this missing configuration into your run config with default values. You will need to change the values appropriately."})]}),s=function(){var e=(0,i.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o({title:"Scaffold missing config",description:a});case 2:n();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,T.jsxs)(X.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,T.jsx)(te.zx,{disabled:r,onClick:s,children:"Scaffold missing config"}),r?(0,T.jsxs)(X.x,{flex:{direction:"row",gap:4,alignItems:"center"},children:[(0,T.jsx)(re.JO,{name:"check_circle",color:V.w.Green500}),"No missing config"]}):null]})},We=function(e){var n=e.document,t=e.validation,r=e.onHighlightPath,i=e.launchpadType,l=e.onRemoveExtraPaths,c=e.onScaffoldMissingConfig,u=e.solidSelection,d=e.runConfigSchema,p=b.useState(!1),f=(0,s.Z)(p,2),m=f[0],h=f[1],g=b.useMemo((function(){if(!d)return{};var e=d.allConfigTypes,n=d.rootConfigType,t={},r=e.find((function(e){return e.key===n.key}));return"CompositeConfigType"!==(null===r||void 0===r?void 0:r.__typename)||r.fields.forEach((function(n){var r=e.find((function(e){return e.key===n.configTypeKey}));"CompositeConfigType"===(null===r||void 0===r?void 0:r.__typename)&&(t[n.name]=r)})),t}),[d]),y=[],x=[],v=[];if(t&&"RunConfigValidationInvalid"===t.__typename&&t.errors.forEach((function(e){var n=he(e.stack.entries);if(v.push({pathKey:n.join("."),error:e}),"MissingFieldConfigError"===e.__typename)x.push([].concat((0,o.Z)(n),[e.field.name]).join("."));else if("MissingFieldsConfigError"===e.__typename){var t,r=(0,a.Z)(e.fields);try{for(r.s();!(t=r.n()).done;){var i=t.value;x.push([].concat((0,o.Z)(n),[i.name]).join("."))}}catch(u){r.e(u)}finally{r.f()}}else if("FieldNotDefinedConfigError"===e.__typename)y.push([].concat((0,o.Z)(n),[e.fieldName]).join("."));else if("FieldsNotDefinedConfigError"===e.__typename){var s,l=(0,a.Z)(e.fieldNames);try{for(l.s();!(s=l.n()).done;){var c=s.value;y.push([].concat((0,o.Z)(n),[c]).join("."))}}catch(u){l.e(u)}finally{l.f()}}else"RuntimeMismatchConfigError"===e.__typename&&x.push(n.join("."))})),"InvalidSubsetError"===(null===t||void 0===t?void 0:t.__typename)&&v.push({pathKey:"",error:t.message}),"PythonError"===(null===t||void 0===t?void 0:t.__typename)){var j=(0,T.jsx)(ue.T9,{error:t});v.push({pathKey:"",error:(0,T.jsxs)("span",{children:["PythonError:"," ",(0,T.jsx)(De.Z,{onClick:function(){return(0,ce._)({body:j})},children:"Click for details"})]})})}var S=g.resources,N=g.ops,w=g.solids,C=(0,Te.Z)(g,Ve),k=!(null===N||void 0===N||!N.fields),E=function(e,t){var i=t.map((function(t){if(null!==u&&void 0!==u&&u.length&&(null===u||void 0===u||!u.includes(t.name)))return null;var i=[].concat((0,o.Z)(e),[t.name]),a=i.join("."),s=v.filter((function(e){return e.pathKey===a||e.pathKey.startsWith("".concat(a,"."))})).map((function(e){return e.error})),l=cn(i,n),c=x.some((function(e){return e.includes(i.join("."))})),d=s.length||c,p=i.some((function(e,n){return x.includes(i.slice(0,n+1).join("."))}));if(m&&!d)return!1;var f=p&&t.isRequired?"missing":d?"invalid":l?"present":"none";return(0,T.jsx)(Ge.u,{position:"bottom",content:Qe[f].title,intent:Qe[f].intent,children:(0,T.jsx)($e.V,{intent:Qe[f].intent,onClick:function(){var e=s.find(Je);r(e?he(e.stack.entries):i)},children:t.name},t.name)},t.name)})).filter(Boolean);return i.length?i:(0,T.jsx)(rn,{children:"Nothing to display."})};return(0,T.jsx)(ee.OS,{identifier:"run-preview",axis:"horizontal",first:(0,T.jsxs)(on,{children:[(0,T.jsxs)(nn,{children:[(0,T.jsx)(en,{children:"Errors"}),v.length?v.map((function(e,n){return(0,T.jsx)(ln,{error:e.error,onHighlight:r},n)})):(0,T.jsxs)(X.x,{flex:{direction:"row",gap:4,alignItems:"center"},children:[(0,T.jsx)(re.JO,{name:"check_circle",color:V.w.Green500}),"No errors"]})]}),(0,T.jsxs)(nn,{children:[(0,T.jsx)(en,{children:"Config actions:"}),(0,T.jsxs)(X.x,{flex:{direction:"column",gap:8},padding:{top:4,bottom:20},children:[(0,T.jsx)(He,{onScaffoldMissingConfig:c,missingNodes:x,disabled:!x.length}),(0,T.jsx)(Ye,{onRemoveExtraPaths:l,extraNodes:y,disabled:!y.length})]})]})]}),firstInitialPercent:50,firstMinSize:150,second:(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)("div",{style:{overflowY:"scroll",width:"100%",height:"100%"},children:[(0,T.jsxs)(sn,{children:[(0,T.jsxs)(nn,{children:[(0,T.jsx)(en,{children:"Runtime"}),(0,T.jsx)(tn,{children:E([],Object.keys(C).map((function(e){return{name:e,isRequired:!1}})))})]}),((null===S||void 0===S?void 0:S.fields.length)||0)>0&&(0,T.jsxs)(nn,{children:[(0,T.jsx)(en,{children:"Resources"}),(0,T.jsx)(tn,{children:E(["resources"],(null===S||void 0===S?void 0:S.fields)||[])})]})]}),(0,T.jsxs)(nn,{children:[(0,T.jsx)(en,{children:"asset"===i?"Assets (Ops)":"Ops"}),(0,T.jsx)(tn,{children:E([k?"ops":"solids"],(k?null===N||void 0===N?void 0:N.fields:null===w||void 0===w?void 0:w.fields)||[])})]}),(0,T.jsx)("div",{style:{height:50}})]}),(0,T.jsx)("div",{style:{position:"absolute",top:0,right:0,padding:"12px 15px 0px 10px",background:"rgba(255,255,255,0.7)"},children:(0,T.jsx)(Be.X,{label:"Errors Only",checked:m,onChange:function(){return h(!m)}})})]})})},Xe=(0,m.Ps)(xe||(xe=(0,r.Z)(["\n  fragment RunPreviewValidationFragment on PipelineConfigValidationResult {\n    __typename\n    ... on RunConfigValidationInvalid {\n      errors {\n        ...RunPreviewValidationErrors\n      }\n    }\n    ... on PipelineNotFoundError {\n      message\n    }\n    ... on InvalidSubsetError {\n      message\n    }\n    ...PythonErrorFragment\n  }\n\n  fragment RunPreviewValidationErrors on PipelineConfigValidationError {\n    reason\n    message\n    stack {\n      entries {\n        __typename\n        ... on EvaluationStackPathEntry {\n          fieldName\n        }\n        ... on EvaluationStackListItemEntry {\n          listIndex\n        }\n        ... on EvaluationStackMapKeyEntry {\n          mapKey\n        }\n        ... on EvaluationStackMapValueEntry {\n          mapKey\n        }\n      }\n    }\n    ... on MissingFieldConfigError {\n      field {\n        name\n      }\n    }\n    ... on MissingFieldsConfigError {\n      fields {\n        name\n      }\n    }\n    ... on FieldNotDefinedConfigError {\n      fieldName\n    }\n    ... on FieldsNotDefinedConfigError {\n      fieldNames\n    }\n  }\n\n  ","\n"])),Ke.B),en=c.ZP.div.withConfig({displayName:"RunPreview__SectionTitle",componentId:"sc-1d5bfcs-0"})(["color:",";text-transform:uppercase;font-size:12px;margin-bottom:8px;"],V.w.Gray400),nn=c.ZP.div.withConfig({displayName:"RunPreview__Section",componentId:"sc-1d5bfcs-1"})(["margin-top:14px;margin-left:10px;"]),tn=c.ZP.div.withConfig({displayName:"RunPreview__ItemSet",componentId:"sc-1d5bfcs-2"})(["display:flex;flex-direction:row;flex-wrap:wrap;gap:4px;"]),rn=c.ZP.div.withConfig({displayName:"RunPreview__ItemsEmptyNotice",componentId:"sc-1d5bfcs-3"})(["font-size:13px;padding-top:7px;padding-bottom:7px;"]),on=c.ZP.div.withConfig({displayName:"RunPreview__ErrorListContainer",componentId:"sc-1d5bfcs-4"})(["margin-left:10px;overflow-y:scroll;height:100%;"]),an=c.ZP.div.withConfig({displayName:"RunPreview__ErrorRowContainer",componentId:"sc-1d5bfcs-5"})(["text-align:left;font-size:13px;white-space:pre-wrap;word-break:break-word;font-family:",";cursor:pointer;display:flex;flex-direction:row;align-items:flex-start;border-bottom:1px solid #ccc;padding:8px;margin:8px 12px 0 -8px;&:last-child{border-bottom:0;margin-bottom:15px;}",""],Ue.b.monospace,(function(e){return e.hoverable&&"&:hover {\n      background: ".concat(V.w.Gray50,";\n    }\n  ")})),sn=c.ZP.div.withConfig({displayName:"RunPreview__RuntimeAndResourcesSection",componentId:"sc-1d5bfcs-6"})(["display:flex;gap:12px;@media (max-width:800px){flex-direction:column;}"]),ln=function(e){var n=e.error,t=e.onHighlight,r=n,i=null;Je(n)&&(r=n.message,i=n);var o=r;return"string"===typeof r&&r.length>400&&(o=function(e){var n=e.indexOf("{");-1===n&&(n=e.indexOf(". "));-1===n&&(n=400);return e.substr(0,n)+"... "}(r)),(0,T.jsxs)(an,{hoverable:!!i,onClick:function(){return i&&t(he(i.stack.entries))},children:[(0,T.jsx)("div",{style:{paddingRight:4},children:(0,T.jsx)(re.JO,{name:"error",color:V.w.Red500})}),(0,T.jsxs)("div",{children:[o,o!==r&&(0,T.jsxs)(T.Fragment,{children:["\xa0",(0,T.jsx)(De.Z,{onClick:function(){return(0,ce._)({body:(0,T.jsx)("div",{style:{whiteSpace:"pre-wrap"},children:r})})},children:"View all"})]})]})]})};function cn(e,n){if(!n||"object"!==typeof n)return!1;if(0===e.length)return!0;var t=(0,Re.Z)(e),r=t[0];return cn(t.slice(1),n[r])}var un,dn,pn=t(80610),fn=t(33547),mn=t(76341),hn=function e(n,t){var r=t[n];switch(r.__typename){case"CompositeConfigType":if(r.isSelector)return"<selector>";var i,o={},s=(0,a.Z)(r.fields);try{for(s.s();!(i=s.n()).done;){var l=i.value,c=l.name,u=l.isRequired,d=l.configTypeKey;u&&(o[c]=e(d,t))}}catch(p){s.e(p)}finally{s.f()}return o;case"ArrayConfigType":return[];case"MapConfigType":return{};case"NullableConfigType":return e(r.typeParamKeys[0],t);case"EnumConfigType":return r.values.map((function(e){return e.value})).join("|");case"ScalarUnionConfigType":return e(r.scalarTypeKey,t);case"RegularConfigType":return{String:"",Int:0,Float:0,Bool:!0,Any:"AnyType"}[r.key];default:(0,mn.UT)(r)}},gn=function(e){var n=e.allConfigTypes,t=e.rootConfigType,r=function(e){var n,t={},r=(0,a.Z)(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;t[i.key]=i}}catch(o){r.e(o)}finally{r.f()}return t}(n);return hn(t.key,r)},yn="The YAML you provided couldn't be parsed. Please fix the syntax errors and try again.",xn=function(e,n){switch(n.type){case"preview-loading":return(0,l.Z)((0,l.Z)({},e),{},{previewLoading:n.payload});case"set-preview":var t=n.payload,r=t.preview,i=t.previewedDocument,o=t.previewLoading;return(0,l.Z)((0,l.Z)({},e),{},{preview:r,previewedDocument:i,previewLoading:o});case"toggle-tag-editor":return(0,l.Z)((0,l.Z)({},e),{},{tagEditorOpen:n.payload});case"toggle-config-loading":return(0,l.Z)((0,l.Z)({},e),{},{configLoading:n.payload});case"set-editor-help-context":return(0,l.Z)((0,l.Z)({},e),{},{editorHelpContext:n.payload});default:return e}},vn=function(e){var n=e.launchpadType,t=e.children;return"asset"===n?(0,T.jsxs)(X.x,{flex:{direction:"row"},border:{side:"top",width:1,color:V.w.KeylineGray},padding:{right:12,vertical:8},children:[(0,T.jsx)("div",{style:{flexGrow:1}}),t]}):(0,T.jsx)("div",{style:{position:"absolute",bottom:12,right:12,zIndex:1},children:t})},jn={preview:null,previewLoading:!1,previewedDocument:null,configLoading:!1,editorHelpContext:null,tagEditorOpen:!1},bn=function(e){var n,t,r,c=e.launchpadType,u=e.session,m=e.onSave,h=e.partitionSets,g=e.pipeline,y=e.repoAddress,x=(0,p.x)(),v=b.useReducer(xn,jn),j=(0,s.Z)(v,2),N=j[0],w=j[1],C=b.useRef(!1),k=b.useRef(null),E=b.useRef(null),P=b.useRef(0),_=g.isJob,K=b.useMemo((function(){return u.tags||[]}),[u]),I=(0,l.Z)((0,l.Z)({},(0,be.$)(y)),{},{pipelineName:g.name,solidSelection:u.solidSelection||void 0,assetSelection:null===(n=u.assetSelection)||void 0===n?void 0:n.map((function(e){return{path:e.assetKey.path}}))}),A=(0,f.a)(En,{variables:{selector:I,mode:null===u||void 0===u?void 0:u.mode},partialRefetch:!0}),Z=null===A||void 0===A||null===(t=A.data)||void 0===t?void 0:t.runConfigSchemaOrError;b.useEffect((function(){return C.current=!0,function(){C.current=!1}}));var O,F,M=function(e){m(e)},L="RunConfigSchema"===(null===Z||void 0===Z?void 0:Z.__typename)?Z:void 0,R="ModeNotFoundError"===(null===Z||void 0===Z?void 0:Z.__typename)?Z:void 0,z=function(){var e=(0,i.Z)(d().mark((function e(n){var t,r,i,o,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P.current+=1,t=P.current,r=wn(n),w({type:"preview-loading",payload:!0}),e.next=6,x.query({fetchPolicy:"no-cache",query:Cn,variables:{runConfigData:r,pipeline:I,mode:u.mode||"default"}});case 6:return i=e.sent,o=i.data,C.current&&(a=t===P.current,w({type:"set-preview",payload:{preview:o,previewedDocument:r,previewLoading:!a&&N.previewLoading}})),e.abrupt("return",ge(r,o.isPipelineConfigValid));case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),D=function(e){var n=u.base?K.filter((function(n){var t,r;return(null===(t=u.base)||void 0===t?void 0:t.tags)&&!(null!==(r=u.base)&&void 0!==r&&r.tags.some((function(e){return e.key===n.key&&e.value===n.value})))&&!e.some((function(e){return e.key===n.key}))})):[];return[].concat((0,o.Z)(e),(0,o.Z)(n))},G=function(){var e=(0,i.Z)(d().mark((function e(n){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.tags.map(Sn),M({base:{presetName:n.name,tags:t},name:n.name,runConfigYaml:n.runConfigYaml||"",solidSelection:n.solidSelection,solidSelectionQuery:null===n.solidSelection?"*":n.solidSelection.join(","),mode:n.mode,tags:D(t),needsRefresh:!1});case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),$=function(){var e=(0,i.Z)(d().mark((function e(n,t,r,i){var o,a,s,l,c,p,f;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Y(),e.prev=1,o=u.base,e.next=5,x.query({query:Se.Fp,variables:{repositorySelector:n,partitionSetName:t,partitionName:r}});case 5:if(a=e.sent,(s=a.data)&&s.partitionSetOrError&&"PartitionSet"===s.partitionSetOrError.__typename&&s.partitionSetOrError.partition){e.next=10;break}return H(),e.abrupt("return");case 10:l=s.partitionSetOrError.partition,c=[],"PythonError"===l.tagsOrError.__typename?(0,ce._)({body:(0,T.jsx)(ue.T9,{error:l.tagsOrError})}):c=l.tagsOrError.results.map(Sn),"PythonError"===l.runConfigOrError.__typename?(p="",(0,ce._)({body:(0,T.jsx)(ue.T9,{error:l.runConfigOrError})})):p=l.runConfigOrError.yaml,f=i||l.solidSelection,M({name:l.name,base:Object.assign({},o,{partitionName:l.name,tags:c}),runConfigYaml:p,solidSelection:f,solidSelectionQuery:null===f?"*":f.join(","),mode:l.mode,tags:D(c),needsRefresh:!1}),e.next=20;break;case 18:e.prev=18,e.t0=e.catch(1);case 20:H();case 21:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(n,t,r,i){return e.apply(this,arguments)}}(),B=function(){var e=(0,i.Z)(d().mark((function e(n){var t,r,i,o,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("presetName"in n)){e.next=5;break}return t=n.presetName,(r=g.presets.find((function(e){return e.name===t})))&&G((0,l.Z)((0,l.Z)({},r),{},{solidSelection:u.solidSelection||r.solidSelection})),e.abrupt("return");case 5:if(i=n.partitionName,o=n.partitionsSetName,a=(0,be.$)(y),!i){e.next=12;break}return Y(),e.next=11,$(a,o,i,u.solidSelection);case 11:H();case 12:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),J=function(){return w({type:"toggle-tag-editor",payload:!0})},Y=function(){return w({type:"toggle-config-loading",payload:!0})},H=function(){return w({type:"toggle-config-loading",payload:!1})},W=N.preview,oe=N.previewLoading,se=N.previewedDocument,fe=N.configLoading,me=N.editorHelpContext,he=N.tagEditorOpen,ye=b.useMemo((function(){var e=u.base,n=u.needsRefresh;return e&&n&&("presetName"in e||e.partitionsSetName&&e.partitionName)?e:null}),[u]);"asset"===c&&(O="Materialize"),h.results.length&&u.base&&"partitionsSetName"in u.base&&!u.base.partitionName&&(F="This job is partitioned. Are you sure you want to launch a run without a partition specified?");var xe=(0,ke.C)().LaunchRootExecutionButton;return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(ee.OS,{axis:"vertical",identifier:"execution",firstMinSize:100,firstInitialPercent:75,first:(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(Ee.f,{isLoading:fe,message:"Generating configuration..."}),(0,T.jsxs)(pn.a,{children:[(0,T.jsx)(Se.KC,{pipeline:g,partitionSets:h.results,base:u.base,onSaveSession:M,onSelectPreset:G,onSelectPartition:$,repoAddress:y}),(0,T.jsx)(kn,{}),"asset"===c?(0,T.jsx)(ne.oi,{readOnly:!0,value:u.assetSelection?u.assetSelection.map((function(e){return(0,pe.Je)(e.assetKey)})).join(", "):"*"}):(0,T.jsx)(Me,{serverProvidedSubsetError:"InvalidSubsetError"===(null===W||void 0===W?void 0:W.isPipelineConfigValid.__typename)?W.isPipelineConfigValid:void 0,pipelineName:g.name,value:u.solidSelection||null,query:u.solidSelectionQuery||null,onChange:function(e,n){M({solidSelection:e,solidSelectionQuery:n})},flattenGraphs:u.flattenGraphs,onFlattenGraphsChange:function(e){M({flattenGraphs:e})},repoAddress:y}),_?(0,T.jsx)("span",{}):(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(kn,{}),(0,T.jsx)(Ce,{modes:g.modes,modeError:R,onModeChange:function(e){M({mode:e})},modeName:u.mode})]}),(0,T.jsx)(fn.U,{tagsFromDefinition:g.tags,tagsFromSession:K,onChange:function(e){var n={},t=[];e.forEach((function(e){e.key in n||(n[e.key]=e.value,t.push(e))})),M({tags:t})},open:he,onRequestClose:function(){return w({type:"toggle-tag-editor",payload:!1})}}),(0,T.jsx)("div",{style:{flex:1}}),(0,T.jsx)(de.b,{shortcutLabel:"\u2325T",shortcutFilter:function(e){return"KeyT"===e.code&&e.altKey},onShortcut:J,children:(0,T.jsx)(te.zx,{onClick:J,icon:(0,T.jsx)(re.JO,{name:"edit"}),children:"Edit tags"})}),(0,T.jsx)(kn,{}),(0,T.jsx)(ee.Uj,{axis:"horizontal",container:E})]}),g.tags.length||K.length?(0,T.jsx)(X.x,{padding:{vertical:8,left:12,right:0},border:{side:"bottom",width:1,color:V.w.Gray200},children:(0,T.jsx)(fn.x,{tagsFromDefinition:g.tags,tagsFromSession:K,onRequestEdit:J})}):null,ye?(0,T.jsx)(X.x,{padding:{vertical:8,horizontal:12},border:{side:"bottom",width:1,color:V.w.Gray200},children:(0,T.jsxs)(ie.Z,{direction:"row",spacing:8,alignItems:"center",children:[(0,T.jsx)(re.JO,{name:"warning",color:V.w.Yellow500}),(0,T.jsxs)("div",{children:[(0,je.Uz)(y)," has been manually refreshed, and this configuration may now be out of date."]}),(0,T.jsx)(te.zx,{intent:"primary",onClick:function(){return B(ye)},disabled:N.configLoading,children:"Refresh config"}),(0,T.jsx)(te.zx,{onClick:function(){M({needsRefresh:!1})},children:"Dismiss"})]})}):null,(0,T.jsx)(ee.OS,{ref:E,axis:"horizontal",identifier:"execution-editor",firstMinSize:100,firstInitialPercent:70,first:(0,T.jsx)(U,{ref:k,readOnly:!1,configSchema:L,configCode:u.runConfigYaml,onConfigChange:function(e){M({runConfigYaml:e})},onHelpContextChange:function(e){q(me,e)||w({type:"set-editor-help-context",payload:e})},checkConfig:z}),second:(0,T.jsx)(Q,{context:me,allInnerTypes:(null===L||void 0===L?void 0:L.allConfigTypes)||[]})})]}),second:(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(Ee.f,{isLoading:oe,message:L?"Checking config...":"Loading config schema..."}),(0,T.jsx)(We,{launchpadType:c,document:se,validation:W?W.isPipelineConfigValid:null,solidSelection:u.solidSelection,runConfigSchema:L,onHighlightPath:function(e){var n;return null===(n=k.current)||void 0===n?void 0:n.moveCursorToPath(e)},onRemoveExtraPaths:function(e){return function(e){try{var n,t=S.Qc(wn(u.runConfigYaml)),r=(0,a.Z)(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;Nn(t,i)}}catch(o){r.e(o)}finally{r.f()}M({runConfigYaml:S.Pz(t)})}catch(o){return void(0,ce._)({title:"Invalid YAML",body:yn})}}(e)},onScaffoldMissingConfig:function(){var e=L?gn(L):{};try{var n=S.Qc(wn(u.runConfigYaml)),t=ae()(e,n),r=S.Pz(t);M({runConfigYaml:r})}catch(i){(0,ce._)({title:"Invalid YAML",body:yn})}}})]})}),(0,T.jsx)(vn,{launchpadType:c,children:(0,T.jsx)(xe,{title:O,warning:F,pipelineName:g.name,getVariables:function(){var e,n;if(u){var t=wn(u.runConfigYaml);try{S.Qc(t)}catch(r){return void(0,ce._)({title:"Invalid YAML",body:yn})}return{executionParams:{runConfigData:t,selector:(0,l.Z)((0,l.Z)({},I),{},{assetSelection:u.assetSelection?u.assetSelection.map((function(e){return{path:e.assetKey.path}})):void 0}),mode:u.mode||"default",executionMetadata:{tags:le()([].concat((0,o.Z)(u.solidSelectionQuery?[{key:ve.H.SolidSelection,value:u.solidSelectionQuery}]:[]),(0,o.Z)(null!==u&&void 0!==u&&null!==(e=u.base)&&void 0!==e&&e.presetName?[{key:ve.H.PresetName,value:null===u||void 0===u||null===(n=u.base)||void 0===n?void 0:n.presetName}]:[]),(0,o.Z)(u.assetSelection?[{key:ve.H.StepSelection,value:u.assetSelection.flatMap((function(e){return e.opNames})).join(",")}]:[]),(0,o.Z)(K.map(Sn)),(0,o.Z)(g.tags.map(Sn))),(function(e){return e.key}))}}}}},disabled:"PipelineConfigValidationValid"!==(null===W||void 0===W||null===(r=W.isPipelineConfigValid)||void 0===r?void 0:r.__typename),behavior:"open"})})]})},Sn=function(e){return{key:e.key,value:e.value}},Nn=function(e,n){for(var t=n.split("."),r=0;r<t.length-1;r++)if("undefined"===typeof(e=e[t[r]]))return;var i=t.pop();i&&delete e[i]},wn=function(e){return(e||"").trim()||"{}"},Cn=(0,m.Ps)(un||(un=(0,r.Z)(["\n  query PreviewConfigQuery(\n    $pipeline: PipelineSelector!\n    $runConfigData: RunConfigData!\n    $mode: String!\n  ) {\n    isPipelineConfigValid(pipeline: $pipeline, runConfigData: $runConfigData, mode: $mode) {\n      ...ConfigEditorValidationFragment\n      ...RunPreviewValidationFragment\n    }\n  }\n\n  ","\n  ","\n"])),me,Xe),kn=c.ZP.div.withConfig({displayName:"LaunchpadSession__SessionSettingsSpacer",componentId:"sc-1pg2cql-0"})(["width:5px;"]),En=(0,m.Ps)(dn||(dn=(0,r.Z)(["\n  query PipelineExecutionConfigSchemaQuery($selector: PipelineSelector!, $mode: String) {\n    runConfigSchemaOrError(selector: $selector, mode: $mode) {\n      ...LaunchpadSessionRunConfigSchemaFragment\n    }\n  }\n\n  fragment LaunchpadSessionRunConfigSchemaFragment on RunConfigSchemaOrError {\n    __typename\n    ... on RunConfigSchema {\n      ...ConfigEditorRunConfigSchemaFragment\n    }\n    ... on ModeNotFoundError {\n      ...LaunchpadSessionModeNotFound\n    }\n  }\n\n  fragment LaunchpadSessionModeNotFound on ModeNotFoundError {\n    message\n  }\n\n  ","\n"])),fe)},44969:function(e,n,t){t.d(n,{U:function(){return c}});var r=t(95764),i=t(17912),o=t(34595),a=t(89646),s=(t(325),t(80610)),l=t(32289),c=function(e){return(0,l.jsx)(i.OS,{axis:"vertical",identifier:"execution",firstInitialPercent:75,firstMinSize:100,first:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.a,{children:(0,l.jsx)(o.$,{purpose:"section"})}),(0,l.jsx)(a.t,(0,r.Z)({},e))]}),second:(0,l.jsx)("div",{})})}},6364:function(e,n,t){t.d(n,{m:function(){return s}});var r=t(17912),i=(t(325),t(33214)),o=t(80610),a=t(32289),s=function(){return(0,a.jsx)(r.OS,{axis:"vertical",identifier:"execution",firstInitialPercent:75,firstMinSize:100,first:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.f,{isLoading:!0,message:"Loading pipeline and partition sets..."}),(0,a.jsx)(o.a,{})]}),second:(0,a.jsx)(i.f,{isLoading:!0,message:"Loading pipeline and partition sets..."})})}},33214:function(e,n,t){t.d(n,{f:function(){return s}});var r=t(922),i=t(6466),o=t(34595),a=(t(325),t(32289)),s=function(e){var n=e.isLoading,t=e.message;return(0,a.jsx)(l,{isLoading:n,children:(0,a.jsxs)(i.Z,{direction:"row",spacing:8,alignItems:"center",children:[(0,a.jsx)(o.$,{purpose:"body-text"}),(0,a.jsx)("div",{children:t})]})})},l=r.ZP.div.withConfig({displayName:"LoadingOverlay__LoadingOverlayContainer",componentId:"sc-1tqulki-0"})(["position:absolute;left:0;right:0;top:0;bottom:0;background-color:#fff;z-index:20;display:",";align-items:center;justify-content:center;opacity:",";transition:opacity 150ms linear;transition-delay:300ms;"],(function(e){return e.isLoading?"flex":"none"}),(function(e){return e.isLoading?"0.7":"0"}))},80610:function(e,n,t){t.d(n,{a:function(){return o}});var r=t(922),i=t(7838),o=r.ZP.div.withConfig({displayName:"SessionSettingsBar",componentId:"sc-6lzkvu-0"})(["color:white;display:flex;position:relative;border-bottom:1px solid ",";background:",";align-items:center;height:47px;padding:8px 10px;"],i.w.Gray200,i.w.White)},33547:function(e,n,t){t.d(n,{U:function(){return y},x:function(){return x}});var r=t(59019),i=t(19065),o=t(922),a=t(8358),s=t(6466),l=t(32030),c=t(11831),u=t(88863),d=t(75453),p=t(23730),f=t(325),m=t(27719),h=t(28064),g=t(32289),y=function(e){var n=e.tagsFromDefinition,t=void 0===n?[]:n,o=e.tagsFromSession,y=void 0===o?[]:o,x=e.open,v=e.onChange,b=e.onRequestClose,S=f.useState((function(){return y.length?y:[{key:"",value:""}]})),N=(0,i.Z)(S,2),w=N[0],C=N[1];f.useEffect((function(){x||C(y.length?y:[{key:"",value:""}])}),[y,x]);var k=w.map((function(e){return{key:e.key.trim(),value:e.value.trim()}})).filter((function(e){return e.key&&e.value})),E=w.map((function(e){return{key:e.key.trim(),value:e.value.trim()}})).filter((function(e){return!e.key!==!e.value})),P=function(){E.length||(v(k),b())},_=w===y||!!E.length,K=function(e,n,t){C((function(i){return[].concat((0,r.Z)(i.slice(0,t)),[{key:e,value:n}],(0,r.Z)(i.slice(t+1)))}))};return(0,g.jsxs)(a.Vq,{icon:"info",onClose:b,style:{minWidth:700},title:"Add tags to run",isOpen:x,children:[(0,g.jsx)(a.a7,{children:(0,g.jsxs)(s.Z,{spacing:16,direction:"column",children:[t.length?(0,g.jsxs)(s.Z,{direction:"column",spacing:8,children:[(0,g.jsx)(l.x,{margin:{left:2},style:{fontSize:"13px",fontWeight:500},children:"Tags from definition:"}),(0,g.jsx)(j,{children:t.map((function(e,n){var t=e.key;return w.some((function(e){return e.key===t}))?(0,g.jsx)(c.u,{content:"Overriden by custom tag value",placement:"top",children:(0,g.jsx)("span",{style:{opacity:.2},children:(0,g.jsx)(h.i,{tag:e},n)})},t):(0,g.jsx)(h.i,{tag:e},t)}))})]}):null,(0,g.jsxs)(l.x,{flex:{direction:"column",gap:12},children:[(0,g.jsx)("div",{children:"Custom tags:"}),(0,g.jsx)(l.x,{flex:{direction:"column",gap:8},children:w.map((function(e,n){var t=e.key,i=e.value;return(0,g.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:8},children:[(0,g.jsx)(u.oi,{placeholder:"Tag Key",value:t,onChange:function(e){return K(e.target.value,i,n)}}),(0,g.jsx)(u.oi,{placeholder:"Tag Value",value:i,onChange:function(e){return K(t,e.target.value,n)}}),(0,g.jsx)(d.zx,{disabled:1===w.length&&!t.trim()&&!i.trim(),onClick:function(){return function(e){C((function(n){return 0===e&&1===n.length?[{key:"",value:""}]:[].concat((0,r.Z)(n.slice(0,e)),(0,r.Z)(n.slice(e+1)))}))}(n)},icon:(0,g.jsx)(p.JO,{name:"delete"}),children:"Remove"})]},n)}))}),(0,g.jsx)(l.x,{margin:{left:2},flex:{direction:"row"},children:(0,g.jsx)(d.zx,{onClick:function(){C((function(e){return[].concat((0,r.Z)(e),[{key:"",value:""}])}))},icon:(0,g.jsx)(p.JO,{name:"add_circle"}),children:"Add custom tag"})})]})]})}),(0,g.jsxs)(a.cN,{children:[(0,g.jsx)(d.zx,{onClick:b,children:"Cancel"}),(0,g.jsx)(m.b,{shortcutLabel:"\u2325Enter",shortcutFilter:function(e){return"Enter"===e.code&&e.altKey},onShortcut:P,children:(0,g.jsx)(d.zx,{intent:"primary",onClick:P,disabled:_,children:"Apply"})})]})]})},x=function(e){var n=e.tagsFromSession,t=e.tagsFromDefinition;return(0,g.jsx)(v,{children:(0,g.jsxs)(j,{children:[t?t.map((function(e,t){var r=e.key;return n.some((function(e){return e.key===r}))?(0,g.jsx)(c.u,{content:"Overriden by custom tag value",placement:"top",children:(0,g.jsx)("span",{style:{opacity:.2},children:(0,g.jsx)(h.i,{tag:e},t)})},r):(0,g.jsx)(h.i,{tag:e},t)})):void 0,n.map((function(e,n){return(0,g.jsx)(h.i,{tag:e},n)}))]})})},v=o.ZP.div.withConfig({displayName:"TagEditor__Container",componentId:"f3ti0i-0"})(["align-items:flex-start;display:flex;flex-direction:row;"]),j=o.ZP.div.withConfig({displayName:"TagEditor__TagList",componentId:"f3ti0i-1"})(["display:flex;flex:1;flex-wrap:wrap;gap:4px;"])},98369:function(e,n,t){t.d(n,{i:function(){return z},$:function(){return $}});var r,i=t(99500),o=t(85358),a=t(95764),s=t(19065),l=t(95550),c=t.n(l),u=t(73701),d=t(49148),p=t(3159),f=t(32030),m=t(34595),h=t(89646),g=t(8358),y=t(50346),x=t(11831),v=t(23730),j=t(7838),b=t(75453),S=t(12745),N=t(325),w=t(27601),C=t(25496),k=t(47072),E=t(39151),P=t(22013),_=t(36523),K=t(33547),I=t(27218),A=t(2112),Z=t(65164),O=t(26306),F=t(79253),M=t(24502),L=t(95968),R=t(54920),T=t(32289),z=function(e){var n=e.partitionSetName,t=e.onLaunch,r=e.onCancel,i=e.onSubmit,o=e.repoAddress,l=e.partitionData,c=e.pipelineName,d=e.partitionNames,p=(0,w.k6)(),S=N.useState(Object.keys(l).filter((function(e){return!l[e]||l[e]===R.AB.FAILURE}))),P=(0,s.Z)(S,2),_=P[0],A=P[1],z=N.useState([R.AB.MISSING,R.AB.FAILURE]),B=(0,s.Z)(z,2),U=B[0],q=B[1],V=N.useMemo((function(){return _.filter((function(e){return U.includes(l[e])}))}),[_,U,l]),J=N.useState(!1),Q=(0,s.Z)(J,2),Y=Q[0],H=Q[1],W=N.useState([]),X=(0,s.Z)(W,2),ee=X[0],ne=X[1],te=N.useState(""),re=(0,s.Z)(te,2),ie=re[0],oe=re[1],ae=N.useState({reexecute:!1,fromFailure:!1}),se=(0,s.Z)(ae,2),le=se[0],ce=se[1],ue=(0,O.$)(o),de=(0,u.a)(G,{variables:{pipelineSelector:(0,a.Z)((0,a.Z)({},ue),{},{pipelineName:c})},fetchPolicy:"network-only"}).data,pe=N.useRef(!0);N.useEffect((function(){return pe.current=!0,function(){pe.current=!1}}),[t]);if(!de)return(0,T.jsx)(f.x,{margin:{vertical:32},flex:{justifyContent:"center"},children:(0,T.jsx)(m.$,{purpose:"section"})});if("PipelineSnapshot"!==de.pipelineSnapshotOrError.__typename)return(0,T.jsx)(f.x,{margin:20,children:(0,T.jsx)(h.t,{icon:"error",title:"Could not fetch job details"})});var fe=de.pipelineSnapshotOrError,me=de.instance,he=(0,I.i)(fe.solidHandles).map((function(e){return e.solid})),ge=(0,C.V)(he,ie),ye=(0,E.tc)({nodes:ge.all,mode:k.hS.FLAT}).boxes.map((function(e){return{x:e.x,name:e.node.name}})),xe=function(e){return l[e]===R.AB.FAILURE},ve=d.filter(xe);return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(g.a7,{children:(0,T.jsxs)(f.x,{flex:{direction:"column",gap:24},children:[(0,T.jsxs)($,{title:"Partitions",children:[(0,T.jsx)(f.x,{children:"Select partitions to materialize. Click and drag to select a range on the timeline."}),(0,T.jsx)(M.x,{selected:_,setSelected:function(e){var n=new Set(e);A(d.filter((function(e){return n.has(e)}))),le.fromFailure&&e.filter((function(e){return!xe(e)})).length>0&&ce((0,a.Z)((0,a.Z)({},le),{},{fromFailure:!1}))},partitionStateForKey:function(e){return l[e]},partitionKeys:d}),(0,T.jsx)(L.f,{value:U,partitionKeysForCounts:_.map((function(e){return{partitionKey:e,state:l[e]}})),allowed:le.fromFailure?[R.AB.FAILURE]:[R.AB.MISSING,R.AB.FAILURE,R.AB.QUEUED,R.AB.STARTED,R.AB.SUCCESS],onChange:q})]}),ve.length?(0,T.jsx)($,{title:"Reexecution",children:(0,T.jsx)(y.X,{checked:le.fromFailure,disabled:!V.every(xe),onChange:function(){var e=(0,a.Z)((0,a.Z)({},le),{},{fromFailure:!le.fromFailure,reexecute:!le.reexecute});e.fromFailure&&q([R.AB.FAILURE]),oe(""),ce(e)},label:(0,T.jsxs)(f.x,{flex:{display:"inline-flex",alignItems:"center"},children:[(0,T.jsx)(f.x,{margin:{right:4},children:"Re-execute from failures"}),(0,T.jsx)(x.u,{placement:"top",content:"For each partition, if the most recent run failed, launch a re-execution starting from the steps that failed. Only applies for selections of failed partitions.",children:(0,T.jsx)(v.JO,{name:"info",color:j.w.Gray500})})]})})}):null,(0,T.jsx)($,{title:(0,T.jsxs)(f.x,{flex:{display:"inline-flex",alignItems:"center"},children:[(0,T.jsx)(f.x,{margin:{right:4},children:"Step subset"}),(0,T.jsx)(x.u,{placement:"top",content:"Applies a step-selection to each run for the requested partitions.",children:(0,T.jsx)(v.JO,{name:"info",color:j.w.Gray500})})]}),children:(0,T.jsxs)(f.x,{flex:{direction:"row",alignItems:"center",gap:12},children:[(0,T.jsx)(Z.j,{disabled:le.fromFailure,width:520,items:he,value:ie,placeholder:"Type a step subset",onChange:oe,autoApplyChanges:!0}),ie?(0,T.jsxs)("div",{style:{color:j.w.Gray500},children:[ye.length," step",1===ye.length?"":"s"," selected"]}):null]})}),(0,T.jsxs)($,{title:"Tags",children:[(0,T.jsx)(K.U,{tagsFromSession:ee,onChange:ne,open:Y,onRequestClose:function(){return H(!1)}}),ee.length?(0,T.jsx)("div",{style:{border:"1px solid ".concat(j.w.Gray300),borderRadius:8,padding:3},children:(0,T.jsx)(K.x,{tagsFromSession:ee,onRequestEdit:function(){return H(!0)}})}):(0,T.jsx)("div",{children:(0,T.jsx)(b.zx,{onClick:function(){return H(!0)},children:"Add tags to backfill runs"})})]}),(0,T.jsxs)(f.x,{flex:{direction:"column",gap:16},children:[(0,T.jsx)(F.So,{instance:me}),(0,T.jsx)(F.d,{instance:me})]})]})}),(0,T.jsxs)(g.cN,{children:[(0,T.jsx)(b.zx,{intent:"none",onClick:r,children:"Cancel"}),(0,T.jsx)(D,{partitionNames:V,partitionSetName:n,reexecutionSteps:!le.fromFailure&&ge.all.length<he.length?ye.map((function(e){return e.name})):void 0,fromFailure:le.fromFailure,tags:ee,onSubmit:i,onSuccess:function(e){(0,F.Xd)(p,e),null===t||void 0===t||t(e,ie)},onError:function(e){(0,F.mv)(e)},repoAddress:o})]})]})},D=function(e){var n=e.partitionSetName,t=e.partitionNames,r=e.reexecutionSteps,i=e.fromFailure,a=e.tags,l=e.onSuccess,u=e.onError,p=e.onSubmit,f=e.repoAddress,m=(0,O.$)(f),h=N.useRef(!0),g=(0,d.D)(P.f),y=(0,s.Z)(g,2),x=y[0],v=y[1].loading;N.useEffect((function(){return h.current=!0,function(){h.current=!1}}),[l]);var j=function(){var e=(0,o.Z)(c().mark((function e(){var o,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(),e.next=3,x({variables:{backfillParams:{selector:{partitionSetName:n,repositorySelector:m},partitionNames:t,reexecutionSteps:r,fromFailure:i,tags:a}}});case 3:if(o=e.sent,s=o.data,h.current){e.next=7;break}return e.abrupt("return");case 7:s&&"LaunchBackfillSuccess"===s.launchPartitionBackfill.__typename?null===l||void 0===l||l(s.launchPartitionBackfill.backfillId):null===u||void 0===u||u(s);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=t.length,S=null===r||void 0===r?void 0:r.length,w=[v?"Submitting ".concat(b," ").concat(1===b?"run":"runs","\u2026"):b?"Submit ".concat(b," ").concat(1===b?"run":"runs"):"Select partitions to submit",!v&&S?"(".concat(S," selected ").concat(1===S?"step":"steps",")"):""].join(" ");return(0,T.jsx)(_.C,{runCount:b,config:{title:w,icon:"open_in_new",disabled:!b||v,onClick:j}})},G=(0,p.Ps)(r||(r=(0,i.Z)(["\n  query BackfillSelectorQuery($pipelineSelector: PipelineSelector!) {\n    pipelineSnapshotOrError(activePipelineSelector: $pipelineSelector) {\n      ... on PipelineSnapshot {\n        id\n        name\n        solidHandles {\n          handleID\n          solid {\n            name\n            definition {\n              name\n            }\n            inputs {\n              dependsOn {\n                solid {\n                  name\n                }\n              }\n            }\n            outputs {\n              dependedBy {\n                solid {\n                  name\n                }\n              }\n            }\n          }\n          ...GraphExplorerSolidHandleFragment\n        }\n      }\n    }\n    instance {\n      ...UsingDefaultLauncherAlertInstanceFragment\n      ...DaemonNotRunningAlertInstanceFragment\n    }\n  }\n\n  ","\n  ","\n  ","\n"])),A.Q,F.op,F.gk),$=function(e){var n=e.title,t=e.children;return(0,T.jsxs)(f.x,{flex:{direction:"column",gap:4},children:[(0,T.jsx)(S.pm,{children:n}),(0,T.jsx)(f.x,{flex:{direction:"column",gap:8},padding:{top:16},border:{width:1,color:j.w.KeylineGray,side:"top"},children:t})]})}},24502:function(e,n,t){t.d(n,{x:function(){return g}});var r=t(32030),i=t(75453),o=t(325),a=t(36613),s=t(19065),l=t(88863),c=t(23730),u=t(14156),d=t(74386),p=t(26961),f=t(32289),m=function(e){var n=e.value,t=e.onChange,r=e.partitionKeys,i=e.isTimeseries,a=o.useState(""),m=(0,s.Z)(a,2),h=m[0],g=m[1],y=o.useMemo((function(){return JSON.stringify(r)}),[r]);o.useEffect((function(){var e=JSON.parse(y);g(i?(0,p.Z8)(n,e):n.join(", "))}),[n,y,i]);var x=o.useMemo((function(){return 0===r.length?"Loading partition keys...":function(e,n){if(0===e.length)return"";if(e.length<4||!n)return"ex: ".concat(e[0],", ").concat(e[1]);return"ex: ".concat(e[0],", ").concat(e[1],", [").concat(e[2],"...").concat(e[e.length-1],"]")}(r,i)}),[r,i]),v=function(e){try{t((0,p.w$)(r,h).selectedKeys)}catch(n){e.preventDefault(),(0,u._)({body:n.message})}};return(0,f.jsx)(l.oi,{placeholder:x,value:h,style:{display:"flex",width:"100%",flex:1,flexGrow:1},onChange:function(e){return g(e.currentTarget.value)},onKeyDown:function(e){"Enter"===e.key&&v(e)},onBlur:v,rightElement:(0,f.jsx)(d.C,{style:{display:h.length?"initial":"none"},onClick:function(){return t([])},children:(0,f.jsx)(c.JO,{name:"cancel"})})})};var h=t(54920),g=function(e){var n=e.selected,t=e.setSelected,o=e.partitionKeys,s=e.partitionStateForKey,l=(0,a.vH)(o[0]);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(r.x,{flex:{direction:"row",alignItems:"center",gap:8},padding:{vertical:4},children:[(0,f.jsx)(r.x,{flex:{direction:"column"},style:{flex:1},children:(0,f.jsx)(m,{value:n,partitionKeys:o,onChange:t,isTimeseries:l})}),l&&(0,f.jsx)(i.zx,{small:!0,onClick:function(){return t(o.slice(-1))},children:"Latest"}),(0,f.jsx)(i.zx,{small:!0,onClick:function(){return t(o)},children:"All"})]}),(0,f.jsx)(r.x,{margin:{bottom:8},children:(0,f.jsx)(h.bq,{partitionNames:o,partitionStateForKey:s,splitPartitions:!l,selected:n,onSelect:t})})]})}},95968:function(e,n,t){t.d(n,{f:function(){return d}});var r=t(59019),i=t(47427),o=t(16798),a=t(32030),s=t(50346),l=t(325),c=t(54920),u=t(32289),d=function(e){var n=e.partitionKeysForCounts,t=e.value,d=e.onChange,p=e.allowed,f=e.disabled,m=l.useMemo((function(){var e,t,r=(e={},(0,o.Z)(e,c.AB.SUCCESS,0),(0,o.Z)(e,c.AB.SUCCESS_MISSING,0),(0,o.Z)(e,c.AB.MISSING,0),(0,o.Z)(e,c.AB.FAILURE,0),(0,o.Z)(e,c.AB.QUEUED,0),(0,o.Z)(e,c.AB.STARTED,0),e),a=(0,i.Z)(n);try{for(a.s();!(t=a.n()).done;){var s=t.value;r[s.state]=(r[s.state]||0)+1}}catch(l){a.e(l)}finally{a.f()}return r}),[n]);return(0,u.jsx)(a.x,{flex:{direction:"row",alignItems:"center",gap:12},style:{overflow:"hidden"},children:p.map((function(e){return(0,u.jsx)(s.X,{disabled:f,style:{marginBottom:0,marginLeft:10,minWidth:200},checked:t.includes(e)&&!f,label:"".concat((0,c.qg)(e)," (").concat(m[e],")"),onChange:function(){return d(t.includes(e)?t.filter((function(n){return n!==e})):[].concat((0,r.Z)(t),[e]))}},e)}))})}},57872:function(e,n,t){t.d(n,{Q:function(){return a}});var r=t(89646),i=(t(325),t(33902)),o=t(32289),a=function(e){var n=e.isGraph,t=e.repoAddress,a=e.result;return"PipelineSnapshotNotFoundError"===a.__typename?(0,o.jsx)(r.t,{icon:"error",title:n?"Graph snapshot not found":"Pipeline snapshot not found",description:a.message}):"PipelineNotFoundError"===a.__typename?(0,o.jsx)(r.t,{icon:"error",title:n?"Graph not found":"Pipeline not found",description:a.message}):"RepositoryNotFoundError"===a.__typename?(0,o.jsx)(r.t,{icon:"error",title:"".concat(t?(0,i.Uz)(t):"Definitions"," not found"),description:a.message}):"PythonError"===a.__typename?(0,o.jsx)(r.t,{icon:"error",title:"Query error",description:a.message}):(0,o.jsx)("span",{})}},23196:function(e,n,t){t.d(n,{b:function(){return o}});var r=t(325),i=t(82348),o=function(e,n){var t=e.pipelineName,o=r.useMemo((function(){return n?"Job: ".concat(t):"Pipeline: ".concat(t)}),[n,t]);(0,i.j)(o)}},74386:function(e,n,t){t.d(n,{C:function(){return a}});var r=t(922),i=t(23730),o=t(7838),a=r.ZP.button.withConfig({displayName:"ClearButton",componentId:"sc-1rz1pk2-0"})(["background:transparent;border:none;cursor:pointer;margin:0 -2px 0 0;padding:2px;","{background-color:",";transition:background-color 100ms linear;}:hover ",",:focus ","{background-color:",";}:active ","{background-color:",";}:focus{outline:none;}"],i.a1,o.w.Gray400,i.a1,i.a1,o.w.Gray700,i.a1,o.w.Dark)},14848:function(e,n,t){t.d(n,{G:function(){return o}});var r=t(922),i=t(8546),o=r.ZP.div.withConfig({displayName:"Version",componentId:"sc-1arl6ei-0"})(["font-family:",";font-size:16px;overflow:hidden;text-overflow:ellipsis;"],i.b.monospace)}}]);
//# sourceMappingURL=960.81edc91f.chunk.js.map