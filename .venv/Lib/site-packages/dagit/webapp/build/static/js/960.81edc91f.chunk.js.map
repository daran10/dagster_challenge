{"version":3,"file":"static/js/960.81edc91f.chunk.js","mappings":"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","sources":["../../core/src/asset-graph/AssetEdges.tsx","../../core/src/assets/LaunchAssetObservationButton.tsx","../../core/src/asset-graph/AssetGraphJobSidebar.tsx","../../core/src/assets/LastMaterializationMetadata.tsx","../../core/src/assets/AssetSidebarActivitySummary.tsx","../../core/src/asset-graph/SidebarAssetInfo.tsx","../../core/src/asset-graph/useFindAssetLocation.tsx","../../core/src/asset-graph/AssetGraphExplorer.tsx","../../core/src/asset-graph/AssetGroupNode.tsx","../../core/src/ui/markdownToPlaintext.ts","../../core/src/asset-graph/AssetNode.tsx","../../core/src/asset-graph/AssetRunLinking.tsx","../../core/src/asset-graph/ForeignNode.tsx","../../core/src/asset-graph/useAssetGraphData.tsx","../../core/src/asset-graph/useLiveDataForAssetKeys.tsx","../../core/src/assets/AssetConfig.tsx","../../core/src/assets/AssetDefinedInMultipleReposNotice.tsx","../../core/src/assets/AssetEventSystemTags.tsx","../../core/src/assets/AssetLineageElements.tsx","../../core/src/assets/AssetMaterializationGraphs.tsx","../../core/src/assets/AssetMetadata.tsx","../../core/src/assets/CurrentMinutesLateTag.tsx","../../core/src/assets/CurrentRunsBanner.tsx","../../core/src/assets/DependsOnSelfBanner.tsx","../../core/src/assets/FailedRunsSinceMaterializationBanner.tsx","../../core/src/assets/RunningBackfillsNotice.tsx","../../core/src/assets/LaunchAssetChoosePartitionsDialog.tsx","../../core/src/assets/LaunchAssetExecutionButton.tsx","../../core/src/assets/MultipartitioningSupport.tsx","../../core/src/assets/PartitionHealthSummary.tsx","../../core/src/assets/StaleTag.tsx","../../core/src/assets/groupByPartition.tsx","../../core/src/assets/usePartitionDimensionSelections.tsx","../../core/src/assets/usePartitionHealthData.tsx","../../core/src/assets/usePartitionNameForPipeline.tsx","../../core/src/assets/useRecentAssetEvents.tsx","../../core/src/launchpad/ConfigEditorConfigPicker.tsx","../../ui/src/components/ConfigEditorWithSchema.tsx","../../core/src/launchpad/LaunchpadTransientSessionContainer.tsx","../../core/src/launchpad/LaunchpadRoot.tsx","../../ui/src/components/configeditor/codemirror-yaml/lint.js","../../ui/src/components/ConfigEditor.tsx","../../ui/src/components/configeditor/isHelpContextEqual.ts","../../ui/src/components/configeditor/ConfigEditorHelp.tsx","../../core/src/configeditor/ConfigEditorUtils.tsx","../../core/src/launchpad/ConfigEditorModePicker.tsx","../../core/src/launchpad/OpSelector.tsx","../../core/src/launchpad/RunPreview.tsx","../../core/src/launchpad/scaffoldType.ts","../../core/src/launchpad/LaunchpadSession.tsx","../../core/src/launchpad/LaunchpadSessionError.tsx","../../core/src/launchpad/LaunchpadSessionLoading.tsx","../../core/src/launchpad/LoadingOverlay.tsx","../../core/src/launchpad/SessionSettingsBar.tsx","../../core/src/launchpad/TagEditor.tsx","../../core/src/partitions/BackfillSelector.tsx","../../core/src/partitions/DimensionRangeInput.tsx","../../core/src/partitions/DimensionRangeWizard.tsx","../../core/src/partitions/PartitionStateCheckboxes.tsx","../../core/src/pipelines/NonIdealPipelineQueryResult.tsx","../../core/src/pipelines/useJobTitle.tsx","../../core/src/ui/ClearButton.tsx","../../core/src/versions/Version.tsx"],"sourcesContent":["import {Colors} from '@dagster-io/ui';\nimport React from 'react';\n\nimport {buildSVGPath} from './Utils';\nimport {AssetLayoutEdge} from './layout';\n\nexport const AssetEdges: React.FC<{\n  edges: AssetLayoutEdge[];\n  highlighted: string | null;\n  strokeWidth?: number;\n  baseColor?: string;\n}> = ({edges, highlighted, strokeWidth = 4, baseColor = Colors.KeylineGray}) => {\n  // Note: we render the highlighted edges twice, but it's so that the first item with\n  // all the edges in it can remain memoized.\n  return (\n    <React.Fragment>\n      <AssetEdgeSet color={baseColor} edges={edges} strokeWidth={strokeWidth} />\n      <AssetEdgeSet\n        color={Colors.Blue500}\n        edges={edges.filter(({fromId, toId}) => highlighted === fromId || highlighted === toId)}\n        strokeWidth={strokeWidth}\n      />\n    </React.Fragment>\n  );\n};\n\nexport const AssetEdgeSet: React.FC<{\n  edges: AssetLayoutEdge[];\n  color: string;\n  strokeWidth: number;\n}> = React.memo(({edges, color, strokeWidth}) => (\n  <>\n    <defs>\n      <marker\n        id={`arrow${btoa(color)}`}\n        viewBox=\"0 0 8 10\"\n        refX=\"1\"\n        refY=\"5\"\n        markerUnits=\"strokeWidth\"\n        markerWidth={strokeWidth}\n        orient=\"auto\"\n      >\n        <path d=\"M 0 0 L 8 5 L 0 10 z\" fill={color} />\n      </marker>\n    </defs>\n    {edges.map((edge, idx) => (\n      <path\n        key={idx}\n        d={buildSVGPath({source: edge.from, target: edge.to})}\n        stroke={color}\n        strokeWidth={strokeWidth}\n        fill=\"none\"\n        markerEnd={`url(#arrow${btoa(color)})`}\n      />\n    ))}\n  </>\n));\n","import {ApolloClient, useApolloClient} from '@apollo/client';\nimport {Button, Spinner, Tooltip, Icon} from '@dagster-io/ui';\nimport React from 'react';\n\nimport {showCustomAlert} from '../app/CustomAlertProvider';\nimport {usePermissionsDEPRECATED} from '../app/Permissions';\nimport {useLaunchPadHooks} from '../launchpad/LaunchpadHooksContext';\nimport {LaunchPipelineExecutionMutationVariables} from '../runs/types/RunUtils.types';\nimport {buildRepoAddress} from '../workspace/buildRepoAddress';\nimport {repoAddressAsHumanString} from '../workspace/repoAddressAsString';\n\nimport {\n  buildAssetCollisionsAlert,\n  executionParamsForAssetJob,\n  getCommonJob,\n  LAUNCH_ASSET_LOADER_QUERY,\n} from './LaunchAssetExecutionButton';\nimport {AssetKey} from './types';\nimport {\n  LaunchAssetExecutionAssetNodeFragment,\n  LaunchAssetLoaderQuery,\n  LaunchAssetLoaderQueryVariables,\n} from './types/LaunchAssetExecutionButton.types';\n\ntype ObserveAssetsState =\n  | {type: 'none'}\n  | {type: 'loading'}\n  | {type: 'error'; error: string}\n  | {\n      type: 'single-run';\n      executionParams: LaunchPipelineExecutionMutationVariables['executionParams'];\n    };\n\nexport const LaunchAssetObservationButton: React.FC<{\n  assetKeys: AssetKey[]; // Memoization not required\n  intent?: 'primary' | 'none';\n  preferredJobName?: string;\n}> = ({assetKeys, preferredJobName, intent = 'none'}) => {\n  const {canLaunchPipelineExecution} = usePermissionsDEPRECATED();\n  const {useLaunchWithTelemetry} = useLaunchPadHooks();\n  const launchWithTelemetry = useLaunchWithTelemetry();\n\n  const [state, setState] = React.useState<ObserveAssetsState>({type: 'none'});\n  const client = useApolloClient();\n\n  const count = assetKeys.length > 1 ? ` (${assetKeys.length})` : '';\n  const label = `Observe sources ${count}`;\n\n  if (!assetKeys.length) {\n    return <span />;\n  }\n\n  if (!canLaunchPipelineExecution.enabled) {\n    return (\n      <Tooltip content=\"You do not have permission to observe source assets\">\n        <Button intent={intent} icon={<Icon name=\"observation\" />} disabled>\n          {label}\n        </Button>\n      </Tooltip>\n    );\n  }\n\n  const onClick = async (e: React.MouseEvent<any>) => {\n    if (state.type === 'loading') {\n      return;\n    }\n    setState({type: 'loading'});\n\n    const result = await client.query<LaunchAssetLoaderQuery, LaunchAssetLoaderQueryVariables>({\n      query: LAUNCH_ASSET_LOADER_QUERY,\n      variables: {assetKeys: assetKeys.map(({path}) => ({path}))},\n    });\n\n    if (result.data.assetNodeDefinitionCollisions.length) {\n      showCustomAlert(buildAssetCollisionsAlert(result.data));\n      setState({type: 'none'});\n      return;\n    }\n\n    const assets = result.data.assetNodes;\n    const forceLaunchpad = e.shiftKey;\n\n    const next = await stateForObservingAssets(client, assets, forceLaunchpad, preferredJobName);\n\n    if (next.type === 'error') {\n      showCustomAlert({\n        title: 'Unable to observe',\n        body: next.error,\n      });\n      setState({type: 'none'});\n      return;\n    }\n\n    if (next.type === 'single-run') {\n      await launchWithTelemetry({executionParams: next.executionParams}, 'toast');\n      setState({type: 'none'});\n    } else {\n      setState(next);\n    }\n  };\n\n  return (\n    <Button\n      intent={intent}\n      onClick={onClick}\n      icon={\n        state.type === 'loading' ? <Spinner purpose=\"body-text\" /> : <Icon name=\"observation\" />\n      }\n    >\n      {label}\n    </Button>\n  );\n};\n\nasync function stateForObservingAssets(\n  _client: ApolloClient<any>,\n  assets: LaunchAssetExecutionAssetNodeFragment[],\n  _forceLaunchpad: boolean,\n  preferredJobName?: string,\n): Promise<ObserveAssetsState> {\n  if (assets.some((x) => !x.isSource)) {\n    return {\n      type: 'error',\n      error: 'One or more non-source assets are selected and cannot be observed.',\n    };\n  }\n\n  if (assets.some((x) => !x.isObservable)) {\n    return {\n      type: 'error',\n      error: 'One or more of the selected source assets are unversioned and cannot be observed.',\n    };\n  }\n  const repoAddress = buildRepoAddress(\n    assets[0]?.repository.name || '',\n    assets[0]?.repository.location.name || '',\n  );\n  const repoName = repoAddressAsHumanString(repoAddress);\n\n  if (\n    !assets.every(\n      (a) =>\n        a.repository.name === repoAddress.name &&\n        a.repository.location.name === repoAddress.location,\n    )\n  ) {\n    return {\n      type: 'error',\n      error: `Assets must be in ${repoName} to be materialized together.`,\n    };\n  }\n\n  const jobName = getCommonJob(assets, preferredJobName);\n  if (!jobName) {\n    return {\n      type: 'error',\n      error: 'Assets must be in the same job to be observed together.',\n    };\n  }\n\n  return {\n    type: 'single-run',\n    executionParams: executionParamsForAssetJob(repoAddress, jobName, assets, []),\n  };\n}\n","import {gql, useQuery} from '@apollo/client';\nimport * as React from 'react';\n\nimport {PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorFragment';\nimport {PipelineSelector} from '../graphql/types';\nimport {NonIdealPipelineQueryResult} from '../pipelines/NonIdealPipelineQueryResult';\nimport {\n  SidebarContainerOverview,\n  SIDEBAR_ROOT_CONTAINER_FRAGMENT,\n} from '../pipelines/SidebarContainerOverview';\nimport {Loading} from '../ui/Loading';\nimport {buildRepoAddress} from '../workspace/buildRepoAddress';\n\nimport {\n  AssetGraphSidebarQuery,\n  AssetGraphSidebarQueryVariables,\n} from './types/AssetGraphJobSidebar.types';\n\nexport const AssetGraphJobSidebar: React.FC<{\n  pipelineSelector: PipelineSelector;\n}> = ({pipelineSelector}) => {\n  const queryResult = useQuery<AssetGraphSidebarQuery, AssetGraphSidebarQueryVariables>(\n    ASSET_GRAPH_JOB_SIDEBAR,\n    {\n      partialRefetch: true,\n      variables: {pipelineSelector},\n    },\n  );\n\n  const {repositoryName, repositoryLocationName} = pipelineSelector;\n  const repoAddress = buildRepoAddress(repositoryName, repositoryLocationName);\n\n  return (\n    <Loading queryResult={queryResult}>\n      {({pipelineSnapshotOrError}) => {\n        if (pipelineSnapshotOrError.__typename !== 'PipelineSnapshot') {\n          return (\n            <NonIdealPipelineQueryResult\n              isGraph\n              result={pipelineSnapshotOrError}\n              repoAddress={repoAddress}\n            />\n          );\n        }\n        return (\n          <SidebarContainerOverview container={pipelineSnapshotOrError} repoAddress={repoAddress} />\n        );\n      }}\n    </Loading>\n  );\n};\n\nconst ASSET_GRAPH_JOB_SIDEBAR = gql`\n  query AssetGraphSidebarQuery($pipelineSelector: PipelineSelector!) {\n    pipelineSnapshotOrError(activePipelineSelector: $pipelineSelector) {\n      ... on PipelineSnapshot {\n        id\n        ...SidebarRootContainerFragment\n      }\n      ... on PipelineNotFoundError {\n        message\n      }\n      ... on PipelineSnapshotNotFoundError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ${SIDEBAR_ROOT_CONTAINER_FRAGMENT}\n  ${PYTHON_ERROR_FRAGMENT}\n`;\n","import {gql} from '@apollo/client';\nimport {Box, Colors, Group, Icon, Mono, NonIdealState, Table} from '@dagster-io/ui';\nimport * as React from 'react';\nimport {Link} from 'react-router-dom';\nimport styled from 'styled-components/macro';\n\nimport {Timestamp} from '../app/time/Timestamp';\nimport {isHiddenAssetGroupJob, LiveDataForNode} from '../asset-graph/Utils';\nimport {StaleTag} from '../assets/StaleTag';\nimport {MetadataEntry, METADATA_ENTRY_FRAGMENT} from '../metadata/MetadataEntry';\nimport {PipelineReference} from '../pipelines/PipelineReference';\nimport {linkToRunEvent, titleForRun} from '../runs/RunUtils';\nimport {isThisThingAJob, useRepository} from '../workspace/WorkspaceContext';\nimport {buildRepoAddress} from '../workspace/buildRepoAddress';\n\nimport {AssetLineageElements} from './AssetLineageElements';\nimport {LatestMaterializationMetadataFragment} from './types/LastMaterializationMetadata.types';\n\nexport const LatestMaterializationMetadata: React.FC<{\n  latest: LatestMaterializationMetadataFragment | undefined;\n  liveData: LiveDataForNode | undefined;\n}> = ({latest, liveData}) => {\n  const latestRun = latest?.runOrError.__typename === 'Run' ? latest?.runOrError : null;\n  const repositoryOrigin = latestRun?.repositoryOrigin;\n  const repoAddress = repositoryOrigin\n    ? buildRepoAddress(repositoryOrigin.repositoryName, repositoryOrigin.repositoryLocationName)\n    : null;\n  const repo = useRepository(repoAddress);\n\n  if (!latest) {\n    return (\n      <Box padding={{top: 16, bottom: 32}}>\n        <NonIdealState\n          icon=\"materialization\"\n          title=\"No materializations\"\n          description=\"No materializations were found for this asset.\"\n        />\n      </Box>\n    );\n  }\n\n  const latestEvent = latest;\n  const latestAssetLineage = latestEvent?.assetLineage;\n\n  return (\n    <MetadataTable>\n      <tbody>\n        <tr>\n          <td>Run</td>\n          <td>\n            {latestRun ? (\n              <div>\n                <Box>\n                  {'Run '}\n                  <Link to={`/runs/${latestEvent.runId}?timestamp=${latestEvent.timestamp}`}>\n                    <Mono>{titleForRun({runId: latestEvent.runId})}</Mono>\n                  </Link>\n                </Box>\n                {!isHiddenAssetGroupJob(latestRun.pipelineName) && (\n                  <>\n                    <Box padding={{left: 8, top: 4}}>\n                      <PipelineReference\n                        showIcon\n                        pipelineName={latestRun.pipelineName}\n                        pipelineHrefContext={repoAddress || 'repo-unknown'}\n                        snapshotId={latestRun.pipelineSnapshotId}\n                        isJob={isThisThingAJob(repo, latestRun.pipelineName)}\n                      />\n                    </Box>\n                    <Group direction=\"row\" padding={{left: 8}} spacing={8} alignItems=\"center\">\n                      <Icon name=\"linear_scale\" color={Colors.Gray400} />\n                      <Link to={linkToRunEvent(latestRun, latestEvent)}>{latestEvent.stepKey}</Link>\n                    </Group>\n                  </>\n                )}\n              </div>\n            ) : (\n              'No materialization events'\n            )}\n          </td>\n          <td />\n        </tr>\n        {latest?.partition ? (\n          <tr>\n            <td>Partition</td>\n            <td>{latest ? latest.partition : 'No materialization events'}</td>\n            <td />\n          </tr>\n        ) : null}\n        <tr>\n          <td>Timestamp</td>\n          <td>\n            <Box flex={{gap: 8, alignItems: 'center'}}>\n              {latestEvent ? (\n                <Timestamp timestamp={{ms: Number(latestEvent.timestamp)}} />\n              ) : (\n                'No materialization events'\n              )}\n              {liveData && <StaleTag liveData={liveData} />}\n            </Box>\n          </td>\n          <td />\n        </tr>\n        {latestAssetLineage?.length ? (\n          <tr>\n            <td>Parent assets</td>\n            <td>\n              <AssetLineageElements\n                elements={latestAssetLineage}\n                timestamp={latestEvent.timestamp}\n              />\n            </td>\n            <td />\n          </tr>\n        ) : null}\n        {latestEvent?.metadataEntries.map((entry) => (\n          <tr key={`metadata-${entry.label}`}>\n            <td>{entry.label}</td>\n            <td>\n              <MetadataEntry\n                entry={entry}\n                expandSmallValues={true}\n                repoLocation={repoAddress?.location}\n              />\n            </td>\n            <td>{entry.description}</td>\n          </tr>\n        ))}\n      </tbody>\n    </MetadataTable>\n  );\n};\n\nconst MetadataTable = styled(Table)`\n  td:first-child {\n    white-space: nowrap;\n    width: 1px;\n    max-width: 400px;\n    word-break: break-word;\n    overflow: hidden;\n    text-overflow: ellipsis;\n  }\n`;\n\nexport const LATEST_MATERIALIZATION_METADATA_FRAGMENT = gql`\n  fragment LatestMaterializationMetadataFragment on MaterializationEvent {\n    partition\n    tags {\n      key\n      value\n    }\n    runOrError {\n      ... on PipelineRun {\n        id\n        runId\n        mode\n        pipelineName\n        pipelineSnapshotId\n        repositoryOrigin {\n          id\n          repositoryName\n          repositoryLocationName\n        }\n      }\n    }\n    runId\n    timestamp\n    stepKey\n    metadataEntries {\n      ...MetadataEntryFragment\n    }\n    assetLineage {\n      assetKey {\n        path\n      }\n      partitions\n    }\n  }\n\n  ${METADATA_ENTRY_FRAGMENT}\n`;\n","import {Body, Box, Colors, Spinner} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {LiveDataForNode} from '../asset-graph/Utils';\nimport {SidebarSection} from '../pipelines/SidebarComponents';\n\nimport {AssetEventSystemTags} from './AssetEventSystemTags';\nimport {AssetMaterializationGraphs} from './AssetMaterializationGraphs';\nimport {CurrentMinutesLateTag, freshnessPolicyDescription} from './CurrentMinutesLateTag';\nimport {CurrentRunsBanner} from './CurrentRunsBanner';\nimport {FailedRunsSinceMaterializationBanner} from './FailedRunsSinceMaterializationBanner';\nimport {LatestMaterializationMetadata} from './LastMaterializationMetadata';\nimport {useGroupedEvents} from './groupByPartition';\nimport {AssetKey} from './types';\nimport {useRecentAssetEvents} from './useRecentAssetEvents';\n\ninterface Props {\n  assetKey: AssetKey;\n  liveData?: LiveDataForNode;\n\n  // This timestamp is a \"hint\", when it changes this component will refetch\n  // to retrieve new data. Just don't want to poll the entire table query.\n  assetLastMaterializedAt: string | undefined;\n\n  // This is passed in because we need to know whether to default to partition\n  // grouping /before/ loading all the data.\n  assetHasDefinedPartitions: boolean;\n}\n\nexport const AssetSidebarActivitySummary: React.FC<Props> = ({\n  assetKey,\n  assetLastMaterializedAt,\n  assetHasDefinedPartitions,\n  liveData,\n}) => {\n  const {\n    materializations,\n    observations,\n    loadedPartitionKeys,\n    loading,\n    refetch,\n    xAxis,\n  } = useRecentAssetEvents(assetKey, {}, {assetHasDefinedPartitions});\n\n  const grouped = useGroupedEvents(xAxis, materializations, observations, loadedPartitionKeys);\n\n  React.useEffect(() => {\n    refetch();\n  }, [assetLastMaterializedAt, refetch]);\n\n  if (loading) {\n    return (\n      <Box padding={{vertical: 20}}>\n        <Spinner purpose=\"section\" />\n      </Box>\n    );\n  }\n  return (\n    <>\n      <FailedRunsSinceMaterializationBanner\n        liveData={liveData}\n        border={{side: 'top', width: 1, color: Colors.KeylineGray}}\n      />\n      <CurrentRunsBanner\n        liveData={liveData}\n        border={{side: 'top', width: 1, color: Colors.KeylineGray}}\n      />\n\n      {liveData?.freshnessPolicy && (\n        <SidebarSection title=\"Freshness policy\">\n          <Box margin={{horizontal: 24, vertical: 12}} flex={{gap: 12, alignItems: 'center'}}>\n            <CurrentMinutesLateTag liveData={liveData} />\n            <Body>{freshnessPolicyDescription(liveData.freshnessPolicy)}</Body>\n          </Box>\n        </SidebarSection>\n      )}\n\n      <SidebarSection title=\"Materialization in last run\">\n        {materializations[0] ? (\n          <div style={{margin: -1, maxWidth: '100%', overflowX: 'auto'}}>\n            <LatestMaterializationMetadata latest={materializations[0]} liveData={liveData} />\n          </div>\n        ) : (\n          <Box\n            margin={{horizontal: 24, vertical: 12}}\n            style={{color: Colors.Gray500, fontSize: '0.8rem'}}\n          >\n            No materializations found\n          </Box>\n        )}\n      </SidebarSection>\n      <SidebarSection title=\"Materialization system tags\" collapsedByDefault>\n        {materializations[0] ? (\n          <div style={{margin: -1, maxWidth: '100%', overflowX: 'auto'}}>\n            <AssetEventSystemTags event={materializations[0]} paddingLeft={24} />\n          </div>\n        ) : (\n          <Box\n            margin={{horizontal: 24, vertical: 12}}\n            style={{color: Colors.Gray500, fontSize: '0.8rem'}}\n          >\n            No materializations found\n          </Box>\n        )}\n      </SidebarSection>\n      <SidebarSection title=\"Metadata plots\">\n        <AssetMaterializationGraphs\n          xAxis={xAxis}\n          asSidebarSection\n          groups={grouped}\n          columnCount={1}\n        />\n      </SidebarSection>\n    </>\n  );\n};\n","import {gql, useQuery} from '@apollo/client';\nimport {Box, Colors, ConfigTypeSchema, Icon, Spinner} from '@dagster-io/ui';\nimport * as React from 'react';\nimport {Link} from 'react-router-dom';\nimport styled from 'styled-components/macro';\n\nimport {ASSET_NODE_CONFIG_FRAGMENT} from '../assets/AssetConfig';\nimport {AssetDefinedInMultipleReposNotice} from '../assets/AssetDefinedInMultipleReposNotice';\nimport {\n  AssetMetadataTable,\n  ASSET_NODE_OP_METADATA_FRAGMENT,\n  metadataForAssetNode,\n} from '../assets/AssetMetadata';\nimport {AssetSidebarActivitySummary} from '../assets/AssetSidebarActivitySummary';\nimport {DependsOnSelfBanner} from '../assets/DependsOnSelfBanner';\nimport {PartitionHealthSummary} from '../assets/PartitionHealthSummary';\nimport {assetDetailsPathForKey} from '../assets/assetDetailsPathForKey';\nimport {AssetKey} from '../assets/types';\nimport {usePartitionHealthData} from '../assets/usePartitionHealthData';\nimport {DagsterTypeSummary} from '../dagstertype/DagsterType';\nimport {DagsterTypeFragment} from '../dagstertype/types/DagsterType.types';\nimport {METADATA_ENTRY_FRAGMENT} from '../metadata/MetadataEntry';\nimport {Description} from '../pipelines/Description';\nimport {SidebarSection, SidebarTitle} from '../pipelines/SidebarComponents';\nimport {pluginForMetadata} from '../plugins';\nimport {Version} from '../versions/Version';\nimport {buildRepoAddress} from '../workspace/buildRepoAddress';\n\nimport {LiveDataForNode, displayNameForAssetKey, GraphNode, nodeDependsOnSelf} from './Utils';\nimport {SidebarAssetQuery, SidebarAssetQueryVariables} from './types/SidebarAssetInfo.types';\n\nexport const SidebarAssetInfo: React.FC<{\n  assetNode: GraphNode;\n  liveData: LiveDataForNode;\n}> = ({assetNode, liveData}) => {\n  const assetKey = assetNode.assetKey;\n  const partitionHealthData = usePartitionHealthData([assetKey]);\n  const {data} = useQuery<SidebarAssetQuery, SidebarAssetQueryVariables>(SIDEBAR_ASSET_QUERY, {\n    variables: {assetKey: {path: assetKey.path}},\n  });\n\n  const {lastMaterialization} = liveData || {};\n  const asset = data?.assetNodeOrError.__typename === 'AssetNode' ? data.assetNodeOrError : null;\n  if (!asset) {\n    return (\n      <>\n        <Header assetKey={assetKey} />\n        <Box padding={{vertical: 64}}>\n          <Spinner purpose=\"section\" />\n        </Box>\n      </>\n    );\n  }\n\n  const repoAddress = buildRepoAddress(asset.repository.name, asset.repository.location.name);\n  const {assetMetadata, assetType} = metadataForAssetNode(asset);\n  const hasAssetMetadata = assetType || assetMetadata.length > 0;\n  const assetConfigSchema = asset.configField?.configType;\n\n  const OpMetadataPlugin = asset.op?.metadata && pluginForMetadata(asset.op.metadata);\n\n  return (\n    <>\n      <Header assetKey={assetKey} opName={asset.op?.name} />\n\n      <AssetDefinedInMultipleReposNotice\n        assetKey={assetKey}\n        loadedFromRepo={repoAddress}\n        padded={false}\n      />\n\n      <AssetSidebarActivitySummary\n        assetKey={assetKey}\n        assetLastMaterializedAt={lastMaterialization?.timestamp}\n        assetHasDefinedPartitions={!!asset.partitionDefinition}\n        liveData={liveData}\n      />\n\n      <div style={{borderBottom: `2px solid ${Colors.Gray300}`}} />\n\n      {nodeDependsOnSelf(assetNode) && <DependsOnSelfBanner />}\n\n      {(asset.description || OpMetadataPlugin?.SidebarComponent || !hasAssetMetadata) && (\n        <SidebarSection title=\"Description\">\n          <Box padding={{vertical: 16, horizontal: 24}}>\n            <Description description={asset.description || 'No description provided.'} />\n          </Box>\n          {asset.op && OpMetadataPlugin?.SidebarComponent && (\n            <Box padding={{bottom: 16, horizontal: 24}}>\n              <OpMetadataPlugin.SidebarComponent definition={asset.op} repoAddress={repoAddress} />\n            </Box>\n          )}\n        </SidebarSection>\n      )}\n\n      {asset.opVersion && (\n        <SidebarSection title=\"Code Version\">\n          <Box padding={{vertical: 16, horizontal: 24}}>\n            <Version>{asset.opVersion}</Version>\n          </Box>\n        </SidebarSection>\n      )}\n\n      {assetConfigSchema && (\n        <SidebarSection title=\"Config\">\n          <Box padding={{vertical: 16, horizontal: 24}}>\n            <ConfigTypeSchema\n              type={assetConfigSchema}\n              typesInScope={assetConfigSchema.recursiveConfigTypes}\n            />\n          </Box>\n        </SidebarSection>\n      )}\n\n      {assetMetadata.length > 0 && (\n        <SidebarSection title=\"Metadata\">\n          <AssetMetadataTable assetMetadata={assetMetadata} repoLocation={repoAddress?.location} />\n        </SidebarSection>\n      )}\n\n      {assetType && <TypeSidebarSection assetType={assetType} />}\n\n      {asset.partitionDefinition && (\n        <SidebarSection title=\"Partitions\">\n          <Box padding={{vertical: 16, horizontal: 24}} flex={{direction: 'column', gap: 16}}>\n            <p>{asset.partitionDefinition.description}</p>\n            <PartitionHealthSummary assetKey={asset.assetKey} data={partitionHealthData} />\n          </Box>\n        </SidebarSection>\n      )}\n    </>\n  );\n};\n\nconst TypeSidebarSection: React.FC<{\n  assetType: DagsterTypeFragment;\n}> = ({assetType}) => {\n  return (\n    <SidebarSection title=\"Type\">\n      <DagsterTypeSummary type={assetType} />\n    </SidebarSection>\n  );\n};\n\nconst Header: React.FC<{assetKey: AssetKey; opName?: string}> = ({assetKey, opName}) => {\n  const displayName = displayNameForAssetKey(assetKey);\n\n  return (\n    <Box flex={{gap: 4, direction: 'column'}} margin={{left: 24, right: 12, vertical: 16}}>\n      <SidebarTitle\n        style={{\n          marginBottom: 0,\n          display: 'flex',\n          justifyContent: 'space-between',\n          flexWrap: 'wrap',\n        }}\n      >\n        <Box>{displayName}</Box>\n        {displayName !== opName ? (\n          <Box style={{opacity: 0.5}} flex={{gap: 6, alignItems: 'center'}}>\n            <Icon name=\"op\" size={16} />\n            {opName}\n          </Box>\n        ) : undefined}\n      </SidebarTitle>\n      <AssetCatalogLink to={assetDetailsPathForKey(assetKey)}>\n        {'View in Asset Catalog '}\n        <Icon name=\"open_in_new\" color={Colors.Link} />\n      </AssetCatalogLink>\n    </Box>\n  );\n};\nconst AssetCatalogLink = styled(Link)`\n  display: flex;\n  gap: 5px;\n  padding: 6px;\n  margin: -6px;\n  align-items: center;\n  white-space: nowrap;\n`;\n\nexport const SIDEBAR_ASSET_FRAGMENT = gql`\n  fragment SidebarAssetFragment on AssetNode {\n    id\n    description\n    ...AssetNodeConfigFragment\n    metadataEntries {\n      ...MetadataEntryFragment\n    }\n    partitionDefinition {\n      description\n    }\n    assetKey {\n      path\n    }\n    op {\n      name\n      description\n      metadata {\n        key\n        value\n      }\n    }\n    opVersion\n    repository {\n      id\n      name\n      location {\n        id\n        name\n      }\n    }\n\n    ...AssetNodeOpMetadataFragment\n  }\n\n  ${ASSET_NODE_CONFIG_FRAGMENT}\n  ${METADATA_ENTRY_FRAGMENT}\n  ${ASSET_NODE_OP_METADATA_FRAGMENT}\n`;\n\nconst SIDEBAR_ASSET_QUERY = gql`\n  query SidebarAssetQuery($assetKey: AssetKeyInput!) {\n    assetNodeOrError(assetKey: $assetKey) {\n      __typename\n      ... on AssetNode {\n        id\n        ...SidebarAssetFragment\n      }\n    }\n  }\n\n  ${SIDEBAR_ASSET_FRAGMENT}\n`;\n","import {gql, useApolloClient} from '@apollo/client';\nimport React from 'react';\n\nimport {AssetKey} from '../assets/types';\nimport {AssetKeyInput} from '../graphql/types';\nimport {buildRepoAddress} from '../workspace/buildRepoAddress';\nimport {RepoAddress} from '../workspace/types';\n\nimport {isHiddenAssetGroupJob} from './Utils';\nimport {\n  AssetForNavigationQuery,\n  AssetForNavigationQueryVariables,\n} from './types/useFindAssetLocation.types';\n\nexport interface AssetLocation {\n  assetKey: AssetKey;\n  opNames: string[];\n  jobName: string | null;\n  groupName: string | null;\n  repoAddress: RepoAddress | null;\n}\n\nexport function useFindAssetLocation() {\n  const apollo = useApolloClient();\n\n  return React.useCallback(\n    async (key: AssetKeyInput): Promise<AssetLocation> => {\n      const {data} = await apollo.query<AssetForNavigationQuery, AssetForNavigationQueryVariables>({\n        query: ASSET_FOR_NAVIGATION_QUERY,\n        variables: {key},\n      });\n      if (data?.assetOrError.__typename === 'Asset' && data?.assetOrError.definition) {\n        const def = data.assetOrError.definition;\n        return {\n          assetKey: key,\n          opNames: def.opNames,\n          jobName: def.jobNames.find((jobName) => !isHiddenAssetGroupJob(jobName)) || null,\n          groupName: def.groupName,\n          repoAddress: def.repository\n            ? buildRepoAddress(def.repository.name, def.repository.location.name)\n            : null,\n        };\n      }\n      return {assetKey: key, opNames: [], jobName: null, groupName: null, repoAddress: null};\n    },\n    [apollo],\n  );\n}\n\nconst ASSET_FOR_NAVIGATION_QUERY = gql`\n  query AssetForNavigationQuery($key: AssetKeyInput!) {\n    assetOrError(assetKey: $key) {\n      __typename\n      ... on Asset {\n        id\n        definition {\n          id\n          opNames\n          jobNames\n          groupName\n          repository {\n            id\n            name\n            location {\n              id\n              name\n            }\n          }\n        }\n      }\n    }\n  }\n`;\n","import {\n  Box,\n  Checkbox,\n  Colors,\n  NonIdealState,\n  SplitPanelContainer,\n  ErrorBoundary,\n} from '@dagster-io/ui';\nimport pickBy from 'lodash/pickBy';\nimport uniq from 'lodash/uniq';\nimport without from 'lodash/without';\nimport React from 'react';\nimport styled from 'styled-components/macro';\n\nimport {QueryRefreshCountdown, QueryRefreshState} from '../app/QueryRefresh';\nimport {LaunchAssetExecutionButton} from '../assets/LaunchAssetExecutionButton';\nimport {LaunchAssetObservationButton} from '../assets/LaunchAssetObservationButton';\nimport {AssetKey} from '../assets/types';\nimport {SVGViewport} from '../graph/SVGViewport';\nimport {useAssetLayout} from '../graph/asyncGraphLayout';\nimport {closestNodeInDirection} from '../graph/common';\nimport {\n  GraphExplorerOptions,\n  OptionsOverlay,\n  QueryOverlay,\n  RightInfoPanel,\n  RightInfoPanelContent,\n} from '../pipelines/GraphExplorer';\nimport {\n  EmptyDAGNotice,\n  EntirelyFilteredDAGNotice,\n  LargeDAGNotice,\n  LoadingNotice,\n} from '../pipelines/GraphNotices';\nimport {ExplorerPath} from '../pipelines/PipelinePathUtils';\nimport {GraphQueryInput} from '../ui/GraphQueryInput';\nimport {Loading} from '../ui/Loading';\n\nimport {AssetEdges} from './AssetEdges';\nimport {AssetGraphJobSidebar} from './AssetGraphJobSidebar';\nimport {AssetGroupNode} from './AssetGroupNode';\nimport {AssetNode, AssetNodeMinimal} from './AssetNode';\nimport {AssetNodeLink} from './ForeignNode';\nimport {SidebarAssetInfo} from './SidebarAssetInfo';\nimport {GraphData, graphHasCycles, LiveData, GraphNode, tokenForAssetKey} from './Utils';\nimport {AssetGraphLayout} from './layout';\nimport {AssetNodeForGraphQueryFragment} from './types/useAssetGraphData.types';\nimport {AssetGraphFetchScope, AssetGraphQueryItem, useAssetGraphData} from './useAssetGraphData';\nimport {AssetLocation, useFindAssetLocation} from './useFindAssetLocation';\nimport {useLiveDataForAssetKeys} from './useLiveDataForAssetKeys';\n\ntype AssetNode = AssetNodeForGraphQueryFragment;\n\ninterface Props {\n  options: GraphExplorerOptions;\n  setOptions?: (options: GraphExplorerOptions) => void;\n\n  fetchOptions: AssetGraphFetchScope;\n  fetchOptionFilters?: React.ReactNode;\n\n  explorerPath: ExplorerPath;\n  onChangeExplorerPath: (path: ExplorerPath, mode: 'replace' | 'push') => void;\n  onNavigateToSourceAssetNode: (node: AssetLocation) => void;\n}\n\nexport const MINIMAL_SCALE = 0.6;\nexport const GROUPS_ONLY_SCALE = 0.15;\n\nexport const AssetGraphExplorer: React.FC<Props> = (props) => {\n  const {\n    fetchResult,\n    assetGraphData,\n    graphQueryItems,\n    graphAssetKeys,\n    allAssetKeys,\n    applyingEmptyDefault,\n  } = useAssetGraphData(props.explorerPath.opsQuery, props.fetchOptions);\n\n  const {liveDataByNode, liveDataRefreshState, runWatchers} = useLiveDataForAssetKeys(\n    graphAssetKeys,\n  );\n\n  return (\n    <Loading allowStaleData queryResult={fetchResult}>\n      {() => {\n        if (!assetGraphData || !allAssetKeys) {\n          return <NonIdealState icon=\"error\" title=\"Query Error\" />;\n        }\n\n        const hasCycles = graphHasCycles(assetGraphData);\n\n        if (hasCycles) {\n          return (\n            <NonIdealState\n              icon=\"error\"\n              title=\"Cycle detected\"\n              description=\"Assets dependencies form a cycle\"\n            />\n          );\n        }\n        return (\n          <>\n            <AssetGraphExplorerWithData\n              key={props.explorerPath.pipelineName}\n              assetGraphData={assetGraphData}\n              allAssetKeys={allAssetKeys}\n              graphQueryItems={graphQueryItems}\n              applyingEmptyDefault={applyingEmptyDefault}\n              liveDataRefreshState={liveDataRefreshState}\n              liveDataByNode={liveDataByNode}\n              {...props}\n            />\n            {runWatchers}\n          </>\n        );\n      }}\n    </Loading>\n  );\n};\n\ntype WithDataProps = {\n  allAssetKeys: AssetKey[];\n  assetGraphData: GraphData;\n  graphQueryItems: AssetGraphQueryItem[];\n  liveDataByNode: LiveData;\n  liveDataRefreshState: QueryRefreshState;\n  applyingEmptyDefault: boolean;\n} & Props;\n\nexport const AssetGraphExplorerWithData: React.FC<WithDataProps> = ({\n  options,\n  setOptions,\n  explorerPath,\n  onChangeExplorerPath,\n  onNavigateToSourceAssetNode: onNavigateToSourceAssetNode,\n  liveDataRefreshState,\n  liveDataByNode,\n  assetGraphData,\n  graphQueryItems,\n  applyingEmptyDefault,\n  fetchOptions,\n  fetchOptionFilters,\n}) => {\n  const findAssetLocation = useFindAssetLocation();\n  const {layout, loading, async} = useAssetLayout(assetGraphData);\n  const viewportEl = React.useRef<SVGViewport>();\n\n  const [highlighted, setHighlighted] = React.useState<string | null>(null);\n\n  const selectedAssetValues = explorerPath.opNames[explorerPath.opNames.length - 1].split(',');\n  const selectedGraphNodes = Object.values(assetGraphData.nodes).filter((node) =>\n    selectedAssetValues.includes(tokenForAssetKey(node.definition.assetKey)),\n  );\n  const lastSelectedNode = selectedGraphNodes[selectedGraphNodes.length - 1];\n\n  const selectedDefinitions = selectedGraphNodes.map((a) => a.definition);\n  const allDefinitionsForMaterialize = applyingEmptyDefault\n    ? graphQueryItems.map((a) => a.node)\n    : Object.values(assetGraphData.nodes).map((a) => a.definition);\n\n  const onSelectNode = React.useCallback(\n    async (\n      e: React.MouseEvent<any> | React.KeyboardEvent<any>,\n      assetKey: {path: string[]},\n      node: GraphNode | null,\n    ) => {\n      e.stopPropagation();\n\n      const token = tokenForAssetKey(assetKey);\n      const nodeIsInDisplayedGraph = node?.definition;\n\n      if (!nodeIsInDisplayedGraph) {\n        // The asset's definition was not provided in our query for job.assetNodes. It's either\n        // in another job or asset group, or is a source asset not defined in any repository.\n        return onNavigateToSourceAssetNode(await findAssetLocation(assetKey));\n      }\n\n      // This asset is in a job and we can stay in the job graph explorer!\n      // If it's in our current job, allow shift / meta multi-selection.\n      let nextOpsNameSelection = token;\n\n      if (e.shiftKey || e.metaKey) {\n        let tokensToAdd = [token];\n        if (e.shiftKey && lastSelectedNode && node) {\n          const tokensInRange = opsInRange({\n            graph: assetGraphData,\n            from: lastSelectedNode,\n            to: node,\n          });\n          if (tokensInRange.length) {\n            tokensToAdd = tokensInRange;\n          }\n        }\n\n        const existing = explorerPath.opNames[0].split(',');\n        nextOpsNameSelection = (existing.includes(token)\n          ? without(existing, token)\n          : uniq([...existing, ...tokensToAdd])\n        ).join(',');\n      }\n\n      const nextCenter = layout?.nodes[nextOpsNameSelection[nextOpsNameSelection.length - 1]];\n      if (nextCenter) {\n        viewportEl.current?.zoomToSVGCoords(nextCenter.bounds.x, nextCenter.bounds.y, true);\n      }\n\n      onChangeExplorerPath(\n        {\n          ...explorerPath,\n          opNames: [nextOpsNameSelection],\n          opsQuery: nodeIsInDisplayedGraph\n            ? explorerPath.opsQuery\n            : `${explorerPath.opsQuery},++\"${token}\"++`,\n          pipelineName: explorerPath.pipelineName,\n        },\n        'replace',\n      );\n    },\n    [\n      explorerPath,\n      onChangeExplorerPath,\n      onNavigateToSourceAssetNode,\n      findAssetLocation,\n      lastSelectedNode,\n      assetGraphData,\n      layout,\n    ],\n  );\n\n  const [lastRenderedLayout, setLastRenderedLayout] = React.useState<AssetGraphLayout | null>(null);\n  const renderingNewLayout = lastRenderedLayout !== layout;\n\n  React.useEffect(() => {\n    if (!renderingNewLayout || !layout || !viewportEl.current) {\n      return;\n    }\n    // The first render where we have our layout and viewport, autocenter or\n    // focus on the selected node. (If selection was specified in the URL).\n    // Don't animate this change.\n    if (lastSelectedNode) {\n      // viewportEl.current.zoomToSVGBox(layout.nodes[lastSelectedNode.id].bounds, false);\n      viewportEl.current.focus();\n    } else {\n      viewportEl.current.autocenter(false);\n    }\n    setLastRenderedLayout(layout);\n  }, [renderingNewLayout, lastSelectedNode, layout, viewportEl]);\n\n  const onClickBackground = () =>\n    onChangeExplorerPath(\n      {...explorerPath, pipelineName: explorerPath.pipelineName, opNames: []},\n      'replace',\n    );\n\n  const onArrowKeyDown = (e: React.KeyboardEvent<any>, dir: string) => {\n    if (!layout) {\n      return;\n    }\n    const hasDefinition = (node: {id: string}) => !!assetGraphData.nodes[node.id]?.definition;\n    const layoutWithoutExternalLinks = {...layout, nodes: pickBy(layout.nodes, hasDefinition)};\n\n    const nextId = closestNodeInDirection(layoutWithoutExternalLinks, lastSelectedNode.id, dir);\n    const node = nextId && assetGraphData.nodes[nextId];\n    if (node && viewportEl.current) {\n      onSelectNode(e, node.assetKey, node);\n      viewportEl.current.zoomToSVGBox(layout.nodes[nextId].bounds, true);\n    }\n  };\n\n  const allowGroupsOnlyZoomLevel = !!(layout && Object.keys(layout.groups).length);\n\n  return (\n    <SplitPanelContainer\n      identifier=\"explorer\"\n      firstInitialPercent={70}\n      firstMinSize={400}\n      first={\n        <ErrorBoundary region=\"graph\">\n          {graphQueryItems.length === 0 ? (\n            <EmptyDAGNotice nodeType=\"asset\" isGraph />\n          ) : applyingEmptyDefault ? (\n            <LargeDAGNotice nodeType=\"asset\" />\n          ) : Object.keys(assetGraphData.nodes).length === 0 ? (\n            <EntirelyFilteredDAGNotice nodeType=\"asset\" />\n          ) : undefined}\n          {loading || !layout ? (\n            <LoadingNotice async={async} nodeType=\"asset\" />\n          ) : (\n            <SVGViewport\n              ref={(r) => (viewportEl.current = r || undefined)}\n              interactor={SVGViewport.Interactors.PanAndZoom}\n              graphWidth={layout.width}\n              graphHeight={layout.height}\n              graphHasNoMinimumZoom={allowGroupsOnlyZoomLevel}\n              onClick={onClickBackground}\n              onArrowKeyDown={onArrowKeyDown}\n              onDoubleClick={(e) => {\n                viewportEl.current?.autocenter(true);\n                e.stopPropagation();\n              }}\n              maxZoom={1.2}\n              maxAutocenterZoom={1.0}\n            >\n              {({scale}) => (\n                <SVGContainer width={layout.width} height={layout.height}>\n                  <AssetEdges\n                    highlighted={highlighted}\n                    edges={layout.edges}\n                    strokeWidth={allowGroupsOnlyZoomLevel ? Math.max(4, 3 / scale) : 4}\n                    baseColor={\n                      allowGroupsOnlyZoomLevel && scale < GROUPS_ONLY_SCALE\n                        ? Colors.Gray400\n                        : Colors.KeylineGray\n                    }\n                  />\n\n                  {Object.values(layout.groups)\n                    .sort((a, b) => a.id.length - b.id.length)\n                    .map((group) => (\n                      <foreignObject\n                        key={group.id}\n                        {...group.bounds}\n                        onDoubleClick={(e) => {\n                          if (!viewportEl.current) {\n                            return;\n                          }\n                          const targetScale = viewportEl.current.scaleForSVGBounds(\n                            group.bounds.width,\n                            group.bounds.height,\n                          );\n                          viewportEl.current.zoomToSVGBox(group.bounds, true, targetScale * 0.9);\n                          e.stopPropagation();\n                        }}\n                      >\n                        <AssetGroupNode group={group} scale={scale} />\n                      </foreignObject>\n                    ))}\n\n                  {Object.values(layout.nodes).map(({id, bounds}) => {\n                    const graphNode = assetGraphData.nodes[id];\n                    const path = JSON.parse(id);\n                    if (allowGroupsOnlyZoomLevel && scale < GROUPS_ONLY_SCALE) {\n                      return;\n                    }\n                    return (\n                      <foreignObject\n                        {...bounds}\n                        key={id}\n                        onMouseEnter={() => setHighlighted(id)}\n                        onMouseLeave={() => setHighlighted(null)}\n                        onClick={(e) => onSelectNode(e, {path}, graphNode)}\n                        onDoubleClick={(e) => {\n                          viewportEl.current?.zoomToSVGBox(bounds, true, 1.2);\n                          e.stopPropagation();\n                        }}\n                        style={{overflow: 'visible'}}\n                      >\n                        {!graphNode ? (\n                          <AssetNodeLink assetKey={{path}} />\n                        ) : scale < MINIMAL_SCALE ? (\n                          <AssetNodeMinimal\n                            definition={graphNode.definition}\n                            liveData={liveDataByNode[graphNode.id]}\n                            selected={selectedGraphNodes.includes(graphNode)}\n                          />\n                        ) : (\n                          <AssetNode\n                            definition={graphNode.definition}\n                            liveData={liveDataByNode[graphNode.id]}\n                            selected={selectedGraphNodes.includes(graphNode)}\n                          />\n                        )}\n                      </foreignObject>\n                    );\n                  })}\n                </SVGContainer>\n              )}\n            </SVGViewport>\n          )}\n          {setOptions && (\n            <OptionsOverlay>\n              <Checkbox\n                format=\"switch\"\n                label=\"View as Asset Graph\"\n                checked={options.preferAssetRendering}\n                onChange={() => {\n                  onChangeExplorerPath(\n                    {...explorerPath, opNames: selectedDefinitions[0]?.opNames || []},\n                    'replace',\n                  );\n                  setOptions({\n                    ...options,\n                    preferAssetRendering: !options.preferAssetRendering,\n                  });\n                }}\n              />\n            </OptionsOverlay>\n          )}\n\n          <Box\n            flex={{direction: 'column', alignItems: 'flex-end', gap: 8}}\n            style={{position: 'absolute', right: 12, top: 8}}\n          >\n            <Box flex={{alignItems: 'center', gap: 12}}>\n              <QueryRefreshCountdown\n                refreshState={liveDataRefreshState}\n                dataDescription=\"materializations\"\n              />\n              <LaunchAssetObservationButton\n                preferredJobName={explorerPath.pipelineName}\n                assetKeys={(selectedDefinitions.length\n                  ? selectedDefinitions\n                  : allDefinitionsForMaterialize\n                )\n                  .filter((a) => a.isObservable)\n                  .map((n) => n.assetKey)}\n              />\n              <LaunchAssetExecutionButton\n                preferredJobName={explorerPath.pipelineName}\n                liveDataForStale={liveDataByNode}\n                scope={\n                  selectedDefinitions.length\n                    ? {selected: selectedDefinitions}\n                    : {all: allDefinitionsForMaterialize}\n                }\n              />\n            </Box>\n          </Box>\n          <QueryOverlay>\n            {fetchOptionFilters}\n\n            <GraphQueryInput\n              items={graphQueryItems}\n              value={explorerPath.opsQuery}\n              placeholder=\"Type an asset subset…\"\n              onChange={(opsQuery) => onChangeExplorerPath({...explorerPath, opsQuery}, 'replace')}\n              popoverPosition=\"bottom-left\"\n            />\n          </QueryOverlay>\n        </ErrorBoundary>\n      }\n      second={\n        selectedGraphNodes.length === 1 && selectedGraphNodes[0] ? (\n          <RightInfoPanel>\n            <RightInfoPanelContent>\n              <ErrorBoundary region=\"asset sidebar\" resetErrorOnChange={[selectedGraphNodes[0].id]}>\n                <SidebarAssetInfo\n                  assetNode={selectedGraphNodes[0]}\n                  liveData={liveDataByNode[selectedGraphNodes[0].id]}\n                />\n              </ErrorBoundary>\n            </RightInfoPanelContent>\n          </RightInfoPanel>\n        ) : fetchOptions.pipelineSelector ? (\n          <RightInfoPanel>\n            <RightInfoPanelContent>\n              <ErrorBoundary region=\"asset job sidebar\">\n                <AssetGraphJobSidebar pipelineSelector={fetchOptions.pipelineSelector} />\n              </ErrorBoundary>\n            </RightInfoPanelContent>\n          </RightInfoPanel>\n        ) : null\n      }\n    />\n  );\n};\n\nconst SVGContainer = styled.svg`\n  overflow: visible;\n  border-radius: 0;\n`;\n\n// Helpers\n\nconst graphDirectionOf = ({\n  graph,\n  from,\n  to,\n}: {\n  graph: GraphData;\n  from: GraphNode;\n  to: GraphNode;\n}) => {\n  const stack = [from];\n  while (stack.length) {\n    const node = stack.pop()!;\n\n    const downstream = [...Object.keys(graph.downstream[node.id] || {})]\n      .map((n) => graph.nodes[n])\n      .filter(Boolean);\n    if (downstream.some((d) => d.id === to.id)) {\n      return 'downstream';\n    }\n    stack.push(...downstream);\n  }\n  return 'upstream';\n};\n\nconst opsInRange = (\n  {graph, from, to}: {graph: GraphData; from: GraphNode; to: GraphNode},\n  seen: string[] = [],\n) => {\n  if (!from) {\n    return [];\n  }\n  if (from.id === to.id) {\n    return [...to.definition.opNames];\n  }\n\n  if (seen.length === 0 && graphDirectionOf({graph, from, to}) === 'upstream') {\n    [from, to] = [to, from];\n  }\n\n  const downstream = [...Object.keys(graph.downstream[from.id] || {})]\n    .map((n) => graph.nodes[n])\n    .filter(Boolean);\n\n  const ledToTarget: string[] = [];\n\n  for (const node of downstream) {\n    if (seen.includes(node.id)) {\n      continue;\n    }\n    const result: string[] = opsInRange({graph, from: node, to}, [...seen, from.id]);\n    if (result.length) {\n      ledToTarget.push(...from.definition.opNames, ...result);\n    }\n  }\n  return uniq(ledToTarget);\n};\n","import {Box, Colors, FontFamily, Icon, Mono} from '@dagster-io/ui';\nimport React from 'react';\nimport {Link} from 'react-router-dom';\nimport styled from 'styled-components/macro';\n\nimport {withMiddleTruncation} from '../app/Util';\nimport {buildRepoPathForHuman} from '../workspace/buildRepoAddress';\nimport {workspacePath} from '../workspace/workspacePath';\n\nimport {MINIMAL_SCALE, GROUPS_ONLY_SCALE} from './AssetGraphExplorer';\nimport {GroupLayout} from './layout';\n\nexport const AssetGroupNode: React.FC<{group: GroupLayout; scale: number}> = ({group, scale}) => {\n  const {\n    repositoryLocationName,\n    repositoryDisambiguationRequired,\n    repositoryName,\n    groupName,\n  } = group;\n\n  return (\n    <div style={{position: 'relative', width: '100%', height: '100%'}}>\n      {scale > GROUPS_ONLY_SCALE && (\n        <Box flex={{alignItems: 'flex-end'}} style={{height: 70}}>\n          <Mono\n            style={{\n              fontWeight: 600,\n              userSelect: 'none',\n              fontSize: scale > MINIMAL_SCALE ? '16px' : '32px',\n              display: 'flex',\n              gap: 6,\n            }}\n          >\n            <Icon\n              name=\"asset_group\"\n              color={Colors.Gray400}\n              size={scale > MINIMAL_SCALE ? 20 : 48}\n            />\n            <Box flex={{direction: 'column'}}>\n              <Link\n                style={{color: Colors.Gray400}}\n                onClick={(e) => e.stopPropagation()}\n                to={workspacePath(\n                  repositoryName,\n                  repositoryLocationName,\n                  `/asset-groups/${groupName}`,\n                )}\n              >\n                {groupName}\n              </Link>\n              {repositoryDisambiguationRequired && (\n                <GroupRepoName style={{marginBottom: '0.5em'}}>\n                  {withMiddleTruncation(\n                    buildRepoPathForHuman(repositoryName, repositoryLocationName),\n                    {\n                      maxLength: 45,\n                    },\n                  )}\n                </GroupRepoName>\n              )}\n            </Box>\n          </Mono>\n        </Box>\n      )}\n\n      <GroupOutline\n        style={{\n          inset: 0,\n          top: 75,\n          position: 'absolute',\n          background:\n            scale < GROUPS_ONLY_SCALE ? `rgba(234, 234, 234, 1)` : `rgba(217, 217, 217, 0.25)`,\n        }}\n      />\n\n      {scale < GROUPS_ONLY_SCALE ? (\n        <Box\n          flex={{justifyContent: 'center', alignItems: 'center'}}\n          style={{inset: 0, position: 'absolute', fontSize: `${12 / scale}px`, userSelect: 'none'}}\n        >\n          <Box\n            flex={{direction: 'column', alignItems: 'center'}}\n            style={{fontWeight: 600, fontFamily: FontFamily.monospace}}\n          >\n            {groupName}\n            {repositoryDisambiguationRequired && (\n              <GroupRepoName>\n                {withMiddleTruncation(\n                  buildRepoPathForHuman(repositoryName, repositoryLocationName),\n                  {\n                    maxLength: 45,\n                  },\n                )}\n              </GroupRepoName>\n            )}\n          </Box>\n        </Box>\n      ) : undefined}\n    </div>\n  );\n};\n\nconst GroupOutline = styled.div`\n  width: 100%;\n  border-radius: 10px;\n  pointer-events: none;\n`;\n\nconst GroupRepoName = styled.div`\n  font-size: 0.8em;\n  line-height: 0.6em;\n  white-space: nowrap;\n  color: ${Colors.Gray400};\n`;\n","import LRUCache from 'lru-cache';\nimport remark from 'remark';\nimport gfm from 'remark-gfm';\nimport toPlainText from 'remark-plain-text';\n\nconst Remark = remark()\n  .use(gfm)\n  .use(toPlainText as any);\nconst markdownCache = new LRUCache<string, string>({max: 500});\nexport const markdownToPlaintext = (md: string) => {\n  // Compile the Markdown file to plain text:\n  const cached = markdownCache.get(md);\n  if (cached) {\n    return cached;\n  }\n\n  // Clean up escaping left behind.\n  const str = Remark.processSync(md).toString().replace(/\\\\/g, '').trim();\n  markdownCache.set(md, str);\n\n  return str;\n};\n","import {gql} from '@apollo/client';\nimport {Colors, Icon, FontFamily, Box, Caption, Spinner} from '@dagster-io/ui';\nimport isEqual from 'lodash/isEqual';\nimport React from 'react';\nimport {Link} from 'react-router-dom';\nimport styled from 'styled-components/macro';\n\nimport {withMiddleTruncation} from '../app/Util';\nimport {humanizedLateString, isAssetLate} from '../assets/CurrentMinutesLateTag';\nimport {isAssetStale} from '../assets/StaleTag';\nimport {assetDetailsPathForKey} from '../assets/assetDetailsPathForKey';\nimport {AssetComputeKindTag} from '../graph/OpTags';\nimport {TimestampDisplay} from '../schedules/TimestampDisplay';\nimport {markdownToPlaintext} from '../ui/markdownToPlaintext';\n\nimport {AssetLatestRunSpinner, AssetRunLink} from './AssetRunLinking';\nimport {LiveDataForNode} from './Utils';\nimport {ASSET_NODE_NAME_MAX_LENGTH} from './layout';\nimport {AssetNodeFragment} from './types/AssetNode.types';\n\nexport const AssetNode: React.FC<{\n  definition: AssetNodeFragment;\n  liveData?: LiveDataForNode;\n  selected: boolean;\n}> = React.memo(({definition, selected, liveData}) => {\n  const displayName = definition.assetKey.path[definition.assetKey.path.length - 1];\n  const isSource = definition.isSource;\n\n  return (\n    <AssetInsetForHoverEffect>\n      <AssetNodeContainer $selected={selected}>\n        <AssetNodeBox $selected={selected} $isSource={isSource}>\n          <Name $isSource={isSource}>\n            <span style={{marginTop: 1}}>\n              <Icon name={isSource ? 'source_asset' : 'asset'} />\n            </span>\n            <div style={{overflow: 'hidden', textOverflow: 'ellipsis'}}>\n              {withMiddleTruncation(displayName, {\n                maxLength: ASSET_NODE_NAME_MAX_LENGTH,\n              })}\n            </div>\n            <div style={{flex: 1}} />\n          </Name>\n          {definition.description ? (\n            <Description $color={Colors.Gray800}>\n              {markdownToPlaintext(definition.description).split('\\n')[0]}\n            </Description>\n          ) : (\n            <Description $color={Colors.Gray400}>No description</Description>\n          )}\n          {isSource && !definition.isObservable ? null : (\n            <AssetNodeStatusRow definition={definition} liveData={liveData} />\n          )}\n          <AssetComputeKindTag definition={definition} style={{right: -2, paddingTop: 7}} />\n        </AssetNodeBox>\n      </AssetNodeContainer>\n    </AssetInsetForHoverEffect>\n  );\n}, isEqual);\n\nexport const AssetNodeStatusBox: React.FC<{background: string}> = ({background, children}) => (\n  <Box\n    padding={{horizontal: 8}}\n    style={{\n      borderBottomLeftRadius: 6,\n      borderBottomRightRadius: 6,\n      whiteSpace: 'nowrap',\n      lineHeight: '12px',\n      height: 24,\n    }}\n    flex={{justifyContent: 'space-between', alignItems: 'center', gap: 6}}\n    background={background}\n  >\n    {children}\n  </Box>\n);\n\ninterface StatusRowProps {\n  definition: AssetNodeFragment;\n  liveData: LiveDataForNode | undefined;\n}\n\nexport const AssetNodeStatusRow: React.FC<StatusRowProps> = (props) => {\n  const info = buildAssetNodeStatusRow(props);\n  return <AssetNodeStatusBox background={info.background}>{info.content}</AssetNodeStatusBox>;\n};\n\nfunction getStepKey(definition: AssetNodeFragment) {\n  // Used for linking to the run with this step highlighted. We only support highlighting\n  // a single step, so just use the first one.\n  const firstOp = definition.opNames.length ? definition.opNames[0] : null;\n  return firstOp || '';\n}\n\nexport function buildAssetNodeStatusRow({\n  definition,\n  liveData,\n}: {\n  definition: AssetNodeFragment;\n  liveData: LiveDataForNode | undefined;\n}) {\n  if (!liveData) {\n    return {\n      background: Colors.Gray100,\n      border: Colors.Gray300,\n      content: (\n        <>\n          <Spinner purpose=\"caption-text\" />\n          <Caption style={{flex: 1}} color={Colors.Gray800}>\n            Loading...\n          </Caption>\n        </>\n      ),\n    };\n  }\n\n  const {\n    lastMaterialization,\n    runWhichFailedToMaterialize,\n    inProgressRunIds,\n    unstartedRunIds,\n  } = liveData;\n\n  const materializingRunId = inProgressRunIds[0] || unstartedRunIds[0];\n  const late = isAssetLate(liveData);\n\n  if (definition.isSource) {\n    if (materializingRunId) {\n      return {\n        background: Colors.Gray100,\n        border: Colors.Gray300,\n        content: (\n          <>\n            <AssetLatestRunSpinner liveData={liveData} />\n            <Caption style={{flex: 1}} color={Colors.Gray800}>\n              Observing...\n            </Caption>\n            <AssetRunLink runId={materializingRunId} />\n          </>\n        ),\n      };\n    }\n    if (liveData?.lastObservation) {\n      return {\n        background: Colors.Gray100,\n        border: Colors.Gray300,\n        content: (\n          <>\n            <Caption>Observed</Caption>\n            <Caption style={{textAlign: 'right'}}>\n              <AssetRunLink\n                runId={liveData.lastObservation.runId}\n                event={{\n                  stepKey: getStepKey(definition),\n                  timestamp: liveData.lastObservation.timestamp,\n                }}\n              >\n                <TimestampDisplay\n                  timestamp={Number(liveData.lastObservation.timestamp) / 1000}\n                  timeFormat={{showSeconds: false, showTimezone: false}}\n                />\n              </AssetRunLink>\n            </Caption>\n          </>\n        ),\n      };\n    }\n    return {\n      background: Colors.Gray100,\n      border: Colors.Gray300,\n      content: (\n        <>\n          <Caption>Never observed</Caption>\n          <Caption>–</Caption>\n        </>\n      ),\n    };\n  }\n\n  if (materializingRunId) {\n    return {\n      background: Colors.Blue50,\n      border: Colors.Blue500,\n      content: (\n        <>\n          <AssetLatestRunSpinner liveData={liveData} />\n          <Caption style={{flex: 1}} color={Colors.Gray800}>\n            Materializing...\n          </Caption>\n          <AssetRunLink runId={materializingRunId} />\n        </>\n      ),\n    };\n  }\n\n  if (liveData.partitionStats) {\n    const {numPartitions, numMaterialized} = liveData.partitionStats;\n    const numMissing = numPartitions - numMaterialized;\n    return {\n      background: late ? Colors.Red50 : numMissing ? Colors.Yellow50 : Colors.Green50,\n      border: late ? Colors.Red500 : numMissing ? Colors.Yellow500 : Colors.Green500,\n      content: (\n        <>\n          <Caption color={late ? Colors.Red700 : numMissing ? Colors.Yellow700 : Colors.Green700}>\n            {`${numPartitions.toLocaleString()} partitions`}\n          </Caption>\n          <Caption>\n            <Link\n              to={assetDetailsPathForKey(definition.assetKey, {view: 'partitions'})}\n              target=\"_blank\"\n              rel=\"noreferrer\"\n            >\n              {late\n                ? humanizedLateString(liveData.freshnessInfo.currentMinutesLate)\n                : `${numMissing.toLocaleString()} missing`}\n            </Link>\n          </Caption>\n        </>\n      ),\n    };\n  }\n\n  const lastMaterializationLink = lastMaterialization ? (\n    <Caption>\n      <AssetRunLink\n        runId={lastMaterialization.runId}\n        event={{stepKey: getStepKey(definition), timestamp: lastMaterialization.timestamp}}\n      >\n        <TimestampDisplay\n          timestamp={Number(lastMaterialization.timestamp) / 1000}\n          timeFormat={{showSeconds: false, showTimezone: false}}\n        />\n      </AssetRunLink>\n    </Caption>\n  ) : undefined;\n\n  if (runWhichFailedToMaterialize || late) {\n    return {\n      background: Colors.Red50,\n      border: Colors.Red500,\n      content: (\n        <>\n          <Caption color={Colors.Red700}>\n            {runWhichFailedToMaterialize && late\n              ? `Failed (Late)`\n              : late\n              ? humanizedLateString(liveData.freshnessInfo.currentMinutesLate)\n              : 'Failed'}\n          </Caption>\n\n          {runWhichFailedToMaterialize ? (\n            <Caption>\n              <AssetRunLink runId={runWhichFailedToMaterialize.id}>\n                <TimestampDisplay\n                  timestamp={Number(runWhichFailedToMaterialize.endTime)}\n                  timeFormat={{showSeconds: false, showTimezone: false}}\n                />\n              </AssetRunLink>\n            </Caption>\n          ) : (\n            lastMaterializationLink\n          )}\n        </>\n      ),\n    };\n  }\n\n  if (!lastMaterialization) {\n    return {\n      background: Colors.Yellow50,\n      border: Colors.Yellow500,\n      content: <Caption color={Colors.Yellow700}>Never materialized</Caption>,\n    };\n  }\n\n  if (!liveData.freshnessPolicy && isAssetStale(liveData)) {\n    return {\n      background: Colors.Yellow50,\n      border: Colors.Yellow500,\n      content: (\n        <>\n          <Caption color={Colors.Yellow700}>Stale</Caption>\n          {lastMaterializationLink}\n        </>\n      ),\n    };\n  }\n  return {\n    background: Colors.Green50,\n    border: Colors.Green500,\n    content: (\n      <>\n        <Caption color={Colors.Green700}>Materialized</Caption>\n        {lastMaterializationLink}\n      </>\n    ),\n  };\n}\n\nexport const AssetNodeMinimal: React.FC<{\n  selected: boolean;\n  liveData?: LiveDataForNode;\n  definition: AssetNodeFragment;\n}> = ({selected, definition, liveData}) => {\n  const {isSource, assetKey} = definition;\n  const {border, background} = buildAssetNodeStatusRow({definition, liveData});\n  const displayName = assetKey.path[assetKey.path.length - 1];\n\n  return (\n    <AssetInsetForHoverEffect>\n      <MinimalAssetNodeContainer $selected={selected}>\n        <MinimalAssetNodeBox\n          $selected={selected}\n          $isSource={isSource}\n          $background={background}\n          $border={border}\n        >\n          <div style={{position: 'absolute', bottom: 6, left: 6}}>\n            <AssetLatestRunSpinner liveData={liveData} purpose=\"section\" />\n          </div>\n\n          <MinimalName style={{fontSize: 30}} $isSource={isSource}>\n            {withMiddleTruncation(displayName, {maxLength: 14})}\n          </MinimalName>\n        </MinimalAssetNodeBox>\n      </MinimalAssetNodeContainer>\n    </AssetInsetForHoverEffect>\n  );\n};\n\nexport const ASSET_NODE_LIVE_FRAGMENT = gql`\n  fragment AssetNodeLiveFragment on AssetNode {\n    id\n    opNames\n    repository {\n      id\n    }\n    assetKey {\n      path\n    }\n    assetMaterializations(limit: 1) {\n      ...AssetNodeLiveMaterialization\n    }\n    freshnessPolicy {\n      ...AssetNodeLiveFreshnessPolicy\n    }\n    freshnessInfo {\n      ...AssetNodeLiveFreshnessInfo\n    }\n    assetObservations(limit: 1) {\n      ...AssetNodeLiveObservation\n    }\n    currentLogicalVersion\n    projectedLogicalVersion\n    partitionStats {\n      numMaterialized\n      numPartitions\n    }\n  }\n\n  fragment AssetNodeLiveFreshnessPolicy on FreshnessPolicy {\n    maximumLagMinutes\n    cronSchedule\n  }\n\n  fragment AssetNodeLiveFreshnessInfo on AssetFreshnessInfo {\n    currentMinutesLate\n  }\n\n  fragment AssetNodeLiveMaterialization on MaterializationEvent {\n    timestamp\n    runId\n  }\n\n  fragment AssetNodeLiveObservation on ObservationEvent {\n    timestamp\n    runId\n  }\n`;\n\n// Note: This fragment should only contain fields that are needed for\n// useAssetGraphData and the Asset DAG. Some pages of Dagit request this\n// fragment for every AssetNode on the instance. Add fields with care!\n//\nexport const ASSET_NODE_FRAGMENT = gql`\n  fragment AssetNodeFragment on AssetNode {\n    id\n    graphName\n    jobNames\n    opNames\n    opVersion\n    description\n    computeKind\n    isPartitioned\n    isObservable\n    isSource\n    assetKey {\n      ...AssetNodeKey\n    }\n  }\n\n  fragment AssetNodeKey on AssetKey {\n    path\n  }\n`;\n\nconst AssetInsetForHoverEffect = styled.div`\n  padding: 10px 4px 2px 4px;\n  height: 100%;\n`;\n\nexport const AssetNodeContainer = styled.div<{$selected: boolean}>`\n  user-select: none;\n  cursor: default;\n  padding: 4px;\n`;\n\nconst AssetNodeShowOnHover = styled.span`\n  display: none;\n`;\n\nexport const AssetNodeBox = styled.div<{$isSource: boolean; $selected: boolean}>`\n  ${(p) =>\n    p.$isSource\n      ? `border: 2px dashed ${p.$selected ? Colors.Gray600 : Colors.Gray300}`\n      : `border: 2px solid ${p.$selected ? Colors.Blue500 : Colors.Blue200}`};\n\n  ${(p) =>\n    p.$isSource\n      ? `outline: 3px solid ${p.$selected ? Colors.Gray300 : 'transparent'}`\n      : `outline: 3px solid ${p.$selected ? Colors.Blue200 : 'transparent'}`};\n\n  background: ${Colors.White};\n  border-radius: 8px;\n  position: relative;\n  &:hover {\n    box-shadow: rgba(0, 0, 0, 0.12) 0px 2px 12px 0px;\n    ${AssetNodeShowOnHover} {\n      display: initial;\n    }\n  }\n`;\nconst Name = styled.div<{$isSource: boolean}>`\n  /** Keep in sync with DISPLAY_NAME_PX_PER_CHAR */\n  display: flex;\n  padding: 3px 6px;\n  background: ${(p) => (p.$isSource ? Colors.Gray100 : Colors.Blue50)};\n  font-family: ${FontFamily.monospace};\n  border-top-left-radius: 7px;\n  border-top-right-radius: 7px;\n  font-weight: 600;\n  gap: 4px;\n`;\n\nconst MinimalAssetNodeContainer = styled(AssetNodeContainer)`\n  height: 100%;\n`;\n\nconst MinimalAssetNodeBox = styled.div<{\n  $isSource: boolean;\n  $selected: boolean;\n  $background: string;\n  $border: string;\n}>`\n  background: ${(p) => p.$background};\n  ${(p) =>\n    p.$isSource\n      ? `border: 4px dashed ${p.$selected ? Colors.Gray500 : p.$border}`\n      : `border: 4px solid ${p.$selected ? Colors.Blue500 : p.$border}`};\n\n  ${(p) =>\n    p.$isSource\n      ? `outline: 8px solid ${p.$selected ? Colors.Gray300 : 'transparent'}`\n      : `outline: 8px solid ${p.$selected ? Colors.Blue200 : 'transparent'}`};\n\n  border-radius: 10px;\n  position: relative;\n  padding: 4px;\n  height: 100%;\n  min-height: 46px;\n  &:hover {\n    box-shadow: rgba(0, 0, 0, 0.12) 0px 2px 12px 0px;\n  }\n`;\n\nconst MinimalName = styled(Name)`\n  font-weight: 600;\n  white-space: nowrap;\n  position: absolute;\n  background: none;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n`;\n\nconst Description = styled.div<{$color: string}>`\n  padding: 6px 8px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  color: ${(p) => p.$color};\n  border-top: 1px solid ${Colors.Blue50};\n  background: ${Colors.White};\n  font-size: 12px;\n`;\n","import {Colors, Icon, Tooltip, Box, Spinner, Tag, CaptionMono} from '@dagster-io/ui';\nimport React from 'react';\nimport {Link} from 'react-router-dom';\n\nimport {CurrentMinutesLateTag} from '../assets/CurrentMinutesLateTag';\nimport {titleForRun, linkToRunEvent} from '../runs/RunUtils';\n\nimport {LiveDataForNode, MISSING_LIVE_DATA} from './Utils';\n\nexport const AssetLatestRunSpinner: React.FC<{\n  liveData?: LiveDataForNode;\n  purpose?: 'caption-text' | 'body-text' | 'section';\n}> = ({liveData, purpose = 'body-text'}) => {\n  if (liveData?.inProgressRunIds?.length) {\n    return (\n      <Tooltip content=\"A run is currently rematerializing this asset.\">\n        <Spinner purpose={purpose} />\n      </Tooltip>\n    );\n  }\n  if (liveData?.unstartedRunIds?.length) {\n    return (\n      <Tooltip content=\"A run has started that will rematerialize this asset soon.\">\n        <Spinner purpose={purpose} stopped />\n      </Tooltip>\n    );\n  }\n  return null;\n};\n\nexport const AssetLatestRunWithNotices: React.FC<{\n  liveData?: LiveDataForNode;\n  includeFreshness: boolean;\n  includeRunStatus: boolean;\n}> = ({liveData, includeFreshness, includeRunStatus}) => {\n  const {\n    lastMaterialization,\n    unstartedRunIds,\n    inProgressRunIds,\n    runWhichFailedToMaterialize,\n    stepKey,\n  } = liveData || MISSING_LIVE_DATA;\n\n  const buildRunTagContent = () => {\n    if (inProgressRunIds?.length > 0) {\n      return (\n        <Box flex={{gap: 4, alignItems: 'center'}}>\n          {includeRunStatus && <AssetLatestRunSpinner liveData={liveData} />}\n          <AssetRunLink runId={inProgressRunIds[0]} />\n        </Box>\n      );\n    }\n    if (unstartedRunIds?.length > 0) {\n      return (\n        <Box flex={{gap: 4, alignItems: 'center'}}>\n          {includeRunStatus && <AssetLatestRunSpinner liveData={liveData} />}\n          <AssetRunLink runId={unstartedRunIds[0]} />\n        </Box>\n      );\n    }\n    if (runWhichFailedToMaterialize?.__typename === 'Run') {\n      return (\n        <Box flex={{gap: 4, alignItems: 'center'}}>\n          {includeRunStatus && (\n            <Tooltip\n              content={`Run ${titleForRun({\n                runId: runWhichFailedToMaterialize.id,\n              })} failed to materialize this asset`}\n            >\n              <Icon name=\"warning\" color={Colors.Red500} />\n            </Tooltip>\n          )}\n          <AssetRunLink runId={runWhichFailedToMaterialize.id} />\n        </Box>\n      );\n    }\n    if (lastMaterialization) {\n      return (\n        <Box flex={{gap: 6, alignItems: 'center'}}>\n          <AssetRunLink\n            runId={lastMaterialization.runId}\n            event={{stepKey, timestamp: lastMaterialization.timestamp}}\n          />\n        </Box>\n      );\n    }\n    return undefined;\n  };\n\n  const runTagContent = buildRunTagContent();\n\n  if (!includeFreshness) {\n    return runTagContent || <span>–</span>;\n  }\n\n  return (\n    <Box flex={{direction: 'row', gap: 4}}>\n      {runTagContent ? <Tag>{runTagContent}</Tag> : <span>–</span>}\n      {liveData && <CurrentMinutesLateTag liveData={liveData} policyOnHover />}\n    </Box>\n  );\n};\n\nexport const AssetRunLink: React.FC<{\n  runId: string;\n  event?: Parameters<typeof linkToRunEvent>[1];\n}> = ({runId, children, event}) => (\n  <Link\n    to={event ? linkToRunEvent({runId}, event) : `/runs/${runId}`}\n    target=\"_blank\"\n    rel=\"noreferrer\"\n  >\n    {children || <CaptionMono>{titleForRun({runId})}</CaptionMono>}\n  </Link>\n);\n","import {Colors, Icon, FontFamily} from '@dagster-io/ui';\nimport React from 'react';\nimport styled from 'styled-components/macro';\n\nimport {withMiddleTruncation} from '../app/Util';\n\nimport {displayNameForAssetKey} from './Utils';\nimport {ASSET_LINK_NAME_MAX_LENGTH} from './layout';\n\nexport const AssetNodeLink: React.FC<{\n  assetKey: {path: string[]};\n}> = React.memo(({assetKey}) => (\n  <AssetNodeLinkContainer>\n    <Icon name=\"open_in_new\" color={Colors.Link} />\n    <span className=\"label\">\n      {withMiddleTruncation(displayNameForAssetKey(assetKey), {\n        maxLength: ASSET_LINK_NAME_MAX_LENGTH,\n      })}\n    </span>\n  </AssetNodeLinkContainer>\n));\n\nconst AssetNodeLinkContainer = styled.div`\n  display: flex;\n  padding: 4px 8px 6px;\n  line-height: 30px;\n  font-family: ${FontFamily.monospace};\n  color: ${Colors.Link};\n  align-items: center;\n  font-weight: 600;\n  gap: 4px;\n  &:hover .label {\n    color: ${Colors.Link};\n    text-decoration: underline;\n  }\n`;\n","import {gql, useQuery} from '@apollo/client';\nimport groupBy from 'lodash/groupBy';\nimport keyBy from 'lodash/keyBy';\nimport reject from 'lodash/reject';\nimport React from 'react';\n\nimport {filterByQuery, GraphQueryItem} from '../app/GraphQueryImpl';\nimport {AssetKey} from '../assets/types';\nimport {AssetGroupSelector, PipelineSelector} from '../graphql/types';\n\nimport {ASSET_NODE_FRAGMENT} from './AssetNode';\nimport {buildGraphData, GraphData, toGraphId, tokenForAssetKey} from './Utils';\nimport {AssetGraphQuery, AssetNodeForGraphQueryFragment} from './types/useAssetGraphData.types';\n\nexport interface AssetGraphFetchScope {\n  hideEdgesToNodesOutsideQuery?: boolean;\n  hideNodesMatching?: (node: AssetNodeForGraphQueryFragment) => boolean;\n  pipelineSelector?: PipelineSelector;\n  groupSelector?: AssetGroupSelector;\n}\n\nexport type AssetGraphQueryItem = GraphQueryItem & {\n  node: AssetNode;\n};\n\n/** Fetches data for rendering an asset graph:\n *\n * @param pipelineSelector: Optionally scope to an asset job, or pass null for the global graph\n *\n * @param opsQuery: filter the returned graph using selector syntax string (eg: asset_name++)\n *\n * @param filterNodes: filter the returned graph using the provided function. The global graph\n * uses this option to implement the \"3 of 4 repositories\" picker.\n */\nexport function useAssetGraphData(opsQuery: string, options: AssetGraphFetchScope) {\n  const fetchResult = useQuery<AssetGraphQuery>(ASSET_GRAPH_QUERY, {\n    notifyOnNetworkStatusChange: true,\n    variables: {\n      pipelineSelector: options.pipelineSelector,\n      groupSelector: options.groupSelector,\n    },\n  });\n\n  const nodes = fetchResult.data?.assetNodes;\n\n  const {\n    assetGraphData,\n    graphQueryItems,\n    graphAssetKeys,\n    allAssetKeys,\n    applyingEmptyDefault,\n  } = React.useMemo(() => {\n    if (nodes === undefined) {\n      return {\n        graphAssetKeys: [],\n        graphQueryItems: [],\n        assetGraphData: null,\n        applyingEmptyDefault: false,\n      };\n    }\n\n    // Apply any filters provided by the caller. This is where we do repo filtering\n    let matching = nodes;\n    if (options.hideNodesMatching) {\n      matching = reject(matching, options.hideNodesMatching);\n    }\n\n    // Filter the set of all AssetNodes down to those matching the `opsQuery`.\n    // In the future it might be ideal to move this server-side, but we currently\n    // get to leverage the useQuery cache almost 100% of the time above, making this\n    // super fast after the first load vs a network fetch on every page view.\n    const graphQueryItems = buildGraphQueryItems(matching);\n    const {all, applyingEmptyDefault} = filterByQuery(graphQueryItems, opsQuery);\n\n    // Assemble the response into the data structure used for layout, traversal, etc.\n    const assetGraphData = buildGraphData(all.map((n) => n.node));\n    if (options.hideEdgesToNodesOutsideQuery) {\n      removeEdgesToHiddenAssets(assetGraphData, nodes);\n    }\n\n    return {\n      allAssetKeys: matching.map((n) => n.assetKey),\n      graphAssetKeys: all.map((n) => ({path: n.node.assetKey.path})),\n      assetGraphData,\n      graphQueryItems,\n      applyingEmptyDefault,\n    };\n  }, [nodes, opsQuery, options.hideEdgesToNodesOutsideQuery, options.hideNodesMatching]);\n\n  return {\n    fetchResult,\n    assetGraphData,\n    graphQueryItems,\n    graphAssetKeys,\n    allAssetKeys,\n    applyingEmptyDefault,\n  };\n}\n\ntype AssetNode = AssetNodeForGraphQueryFragment;\n\nconst buildGraphQueryItems = (nodes: AssetNode[]) => {\n  const items: {[name: string]: AssetGraphQueryItem} = {};\n\n  for (const node of nodes) {\n    const name = tokenForAssetKey(node.assetKey);\n    items[name] = {\n      node,\n      name,\n      inputs: node.dependencyKeys.map((key) => ({\n        dependsOn: [{solid: {name: tokenForAssetKey(key)}}],\n      })),\n      outputs: node.dependedByKeys.map((key) => ({\n        dependedBy: [{solid: {name: tokenForAssetKey(key)}}],\n      })),\n    };\n  }\n  return Object.values(items);\n};\n\nconst removeEdgesToHiddenAssets = (graphData: GraphData, allNodes: AssetNode[]) => {\n  const allNodesById = groupBy(allNodes, (n) => toGraphId(n.assetKey));\n  const notSourceAsset = (id: string) => !!allNodesById[id];\n\n  for (const node of Object.keys(graphData.upstream)) {\n    for (const edge of Object.keys(graphData.upstream[node])) {\n      if (!graphData.nodes[edge] && notSourceAsset(node)) {\n        delete graphData.upstream[node][edge];\n        delete graphData.downstream[edge][node];\n      }\n    }\n  }\n\n  for (const node of Object.keys(graphData.downstream)) {\n    for (const edge of Object.keys(graphData.downstream[node])) {\n      if (!graphData.nodes[edge] && notSourceAsset(node)) {\n        delete graphData.upstream[edge][node];\n        delete graphData.downstream[node][edge];\n      }\n    }\n  }\n};\n\nexport const calculateGraphDistances = (items: GraphQueryItem[], assetKey: AssetKey) => {\n  const map = keyBy(items, (g) => g.name);\n  const start = map[tokenForAssetKey(assetKey)];\n  if (!start) {\n    return {upstream: 0, downstream: 0};\n  }\n\n  const dfsUpstream = (name: string, depth: number): number => {\n    const next = map[name].inputs\n      .flatMap((i) => i.dependsOn.map((d) => d.solid.name))\n      .filter((dname) => dname !== name);\n\n    return Math.max(depth, ...next.map((dname) => dfsUpstream(dname, depth + 1)));\n  };\n  const dfsDownstream = (name: string, depth: number): number => {\n    const next = map[name].outputs\n      .flatMap((i) => i.dependedBy.map((d) => d.solid.name))\n      .filter((dname) => dname !== name);\n\n    return Math.max(depth, ...next.map((dname) => dfsDownstream(dname, depth + 1)));\n  };\n\n  return {\n    upstream: dfsUpstream(start.name, 0),\n    downstream: dfsDownstream(start.name, 0),\n  };\n};\n\nconst ASSET_GRAPH_QUERY = gql`\n  query AssetGraphQuery($pipelineSelector: PipelineSelector, $groupSelector: AssetGroupSelector) {\n    assetNodes(pipeline: $pipelineSelector, group: $groupSelector) {\n      id\n      ...AssetNodeForGraphQuery\n    }\n  }\n\n  fragment AssetNodeForGraphQuery on AssetNode {\n    id\n    groupName\n    repository {\n      id\n      name\n      location {\n        id\n        name\n      }\n    }\n    dependencyKeys {\n      path\n    }\n    dependedByKeys {\n      path\n    }\n    ...AssetNodeFragment\n  }\n\n  ${ASSET_NODE_FRAGMENT}\n`;\n","import {gql, NetworkStatus, useQuery, useSubscription} from '@apollo/client';\nimport uniq from 'lodash/uniq';\nimport React from 'react';\n\nimport {useQueryRefreshAtInterval} from '../app/QueryRefresh';\nimport {AssetKeyInput} from '../graphql/types';\nimport {useDidLaunchEvent} from '../runs/RunUtils';\n\nimport {ASSET_NODE_LIVE_FRAGMENT} from './AssetNode';\nimport {buildLiveData, tokenForAssetKey} from './Utils';\nimport {\n  AssetGraphLiveQuery,\n  AssetGraphLiveQueryVariables,\n  AssetLiveRunLogsSubscription,\n  AssetLiveRunLogsSubscriptionVariables,\n} from './types/useLiveDataForAssetKeys.types';\n\nconst SUBSCRIPTION_IDLE_POLL_RATE = 30 * 1000;\nconst SUBSCRIPTION_MAX_POLL_RATE = 2 * 1000;\n\n/** Fetches the last materialization, \"upstream changed\", and other live state\n * for the assets in the given pipeline or in the given set of asset keys (or both).\n *\n * Note: The \"upstream changed\" flag cascades, so it may not appear if the upstream\n * node that has changed is not in scope.\n */\nexport function useLiveDataForAssetKeys(assetKeys: AssetKeyInput[]) {\n  const liveResult = useQuery<AssetGraphLiveQuery, AssetGraphLiveQueryVariables>(\n    ASSETS_GRAPH_LIVE_QUERY,\n    {\n      skip: assetKeys.length === 0,\n      variables: {assetKeys},\n      notifyOnNetworkStatusChange: true,\n    },\n  );\n\n  const liveDataByNode = React.useMemo(() => {\n    return liveResult.data ? buildLiveData(liveResult.data) : {};\n  }, [liveResult.data]);\n\n  // Track whether the data is being refetched so incoming asset events don't trigger\n  // duplicate requests for live data.\n  const fetching = React.useRef(false);\n  fetching.current = [NetworkStatus.refetch, NetworkStatus.loading].includes(\n    liveResult.networkStatus,\n  );\n\n  const timerRef = React.useRef<NodeJS.Timeout | null>(null);\n\n  const onRefreshDebounced = React.useCallback(() => {\n    // This is a basic `throttle`, except that if it fires and finds the live\n    // query is already refreshing it debounces again.\n    const refetch = liveResult.refetch;\n    const fire = () => {\n      if (fetching.current) {\n        timerRef.current = setTimeout(fire, SUBSCRIPTION_MAX_POLL_RATE);\n      } else {\n        timerRef.current = null;\n        refetch();\n      }\n    };\n    if (!timerRef.current) {\n      timerRef.current = setTimeout(fire, SUBSCRIPTION_MAX_POLL_RATE);\n    }\n  }, [timerRef, liveResult.refetch]);\n\n  React.useEffect(() => {\n    return () => {\n      timerRef.current && clearTimeout(timerRef.current);\n    };\n  }, []);\n\n  // If the event log storage does not support streaming us asset events, fall back to\n  // a polling approach and trigger a single refresh when a run is launched for immediate feedback\n  const liveDataRefreshState = useQueryRefreshAtInterval(liveResult, SUBSCRIPTION_IDLE_POLL_RATE);\n\n  useDidLaunchEvent(liveResult.refetch, SUBSCRIPTION_MAX_POLL_RATE);\n\n  const assetKeyTokens = React.useMemo(() => new Set(assetKeys.map(tokenForAssetKey)), [assetKeys]);\n  const assetStepKeys = React.useMemo(\n    () => new Set(liveResult.data?.assetNodes.flatMap((n) => n.opNames) || []),\n    [liveResult],\n  );\n\n  const runInProgressId = uniq(\n    Object.values(liveDataByNode).flatMap((p) => [...p.unstartedRunIds, ...p.inProgressRunIds]),\n  )\n    .sort()\n    .slice(0, 3);\n\n  const runWatchers = (\n    <>\n      {runInProgressId.map((runId) => (\n        <RunLogObserver\n          runId={runId}\n          key={runId}\n          assetKeyTokens={assetKeyTokens}\n          assetStepKeys={assetStepKeys}\n          callback={onRefreshDebounced}\n        />\n      ))}\n    </>\n  );\n\n  return {\n    liveDataByNode,\n    liveDataRefreshState,\n    runWatchers,\n    assetKeys,\n  };\n}\n\nconst RunLogObserver: React.FC<{\n  runId: string;\n  assetKeyTokens: Set<string>;\n  assetStepKeys: Set<string>;\n  callback: () => void;\n}> = React.memo(({runId, assetKeyTokens, assetStepKeys, callback}) => {\n  // Useful for testing this component:\n  const counter = React.useRef(0);\n  React.useEffect(() => {\n    console.log(`Subscribed to ${runId}`);\n    return () => console.log(`Unsubscribed from ${runId} after ${counter.current} messages`);\n  }, [runId]);\n\n  useSubscription<AssetLiveRunLogsSubscription, AssetLiveRunLogsSubscriptionVariables>(\n    ASSET_LIVE_RUN_LOGS_SUBSCRIPTION,\n    {\n      fetchPolicy: 'no-cache',\n      variables: {runId},\n      onSubscriptionData: (data) => {\n        const logs = data.subscriptionData.data?.pipelineRunLogs;\n        if (logs?.__typename !== 'PipelineRunLogsSubscriptionSuccess') {\n          return;\n        }\n\n        counter.current += logs.messages.length;\n\n        if (\n          logs.messages.some((m) => {\n            if (\n              m.__typename === 'AssetMaterializationPlannedEvent' ||\n              m.__typename === 'MaterializationEvent' ||\n              m.__typename === 'ObservationEvent'\n            ) {\n              return m.assetKey && assetKeyTokens.has(tokenForAssetKey(m.assetKey));\n            }\n            if (\n              m.__typename === 'ExecutionStepFailureEvent' ||\n              m.__typename === 'ExecutionStepStartEvent'\n            ) {\n              return m.stepKey && assetStepKeys.has(m.stepKey);\n            }\n            return false;\n          })\n        ) {\n          callback();\n        }\n      },\n    },\n  );\n\n  return <span />;\n});\n\nexport const ASSET_LATEST_INFO_FRAGMENT = gql`\n  fragment AssetLatestInfoFragment on AssetLatestInfo {\n    assetKey {\n      path\n    }\n    unstartedRunIds\n    inProgressRunIds\n    latestRun {\n      id\n      ...AssetLatestInfoRun\n    }\n  }\n\n  fragment AssetLatestInfoRun on Run {\n    status\n    endTime\n    id\n  }\n`;\n\nconst ASSETS_GRAPH_LIVE_QUERY = gql`\n  query AssetGraphLiveQuery($assetKeys: [AssetKeyInput!]!) {\n    assetNodes(assetKeys: $assetKeys, loadMaterializations: true) {\n      id\n      ...AssetNodeLiveFragment\n    }\n    assetsLatestInfo(assetKeys: $assetKeys) {\n      ...AssetLatestInfoFragment\n    }\n  }\n\n  ${ASSET_NODE_LIVE_FRAGMENT}\n  ${ASSET_LATEST_INFO_FRAGMENT}\n`;\n\nconst ASSET_LIVE_RUN_LOGS_SUBSCRIPTION = gql`\n  subscription AssetLiveRunLogsSubscription($runId: ID!) {\n    pipelineRunLogs(runId: $runId, cursor: \"HEAD\") {\n      __typename\n      ... on PipelineRunLogsSubscriptionSuccess {\n        messages {\n          __typename\n          ... on AssetMaterializationPlannedEvent {\n            assetKey {\n              path\n            }\n          }\n          ... on MaterializationEvent {\n            assetKey {\n              path\n            }\n          }\n          ... on ObservationEvent {\n            assetKey {\n              path\n            }\n          }\n          ... on ExecutionStepStartEvent {\n            stepKey\n          }\n          ... on ExecutionStepFailureEvent {\n            stepKey\n          }\n        }\n      }\n    }\n  }\n`;\n","import {gql} from '@apollo/client';\n\nimport {CONFIG_TYPE_SCHEMA_FRAGMENT} from '../typeexplorer/ConfigTypeSchema';\n\nexport const ASSET_NODE_CONFIG_FRAGMENT = gql`\n  fragment AssetNodeConfigFragment on AssetNode {\n    id\n    configField {\n      name\n      isRequired\n      configType {\n        ...ConfigTypeSchemaFragment\n        recursiveConfigTypes {\n          ...ConfigTypeSchemaFragment\n        }\n      }\n    }\n  }\n\n  ${CONFIG_TYPE_SCHEMA_FRAGMENT}\n`;\n","import {gql, useQuery} from '@apollo/client';\nimport {Alert, Box, ButtonLink, Colors} from '@dagster-io/ui';\nimport React from 'react';\n\nimport {showCustomAlert} from '../app/CustomAlertProvider';\nimport {displayNameForAssetKey} from '../asset-graph/Utils';\nimport {buildRepoPathForHuman} from '../workspace/buildRepoAddress';\nimport {repoAddressAsHumanString} from '../workspace/repoAddressAsString';\nimport {RepoAddress} from '../workspace/types';\n\nimport {AssetKey} from './types';\nimport {\n  AssetDefinitionCollisionQuery,\n  AssetDefinitionCollisionQueryVariables,\n} from './types/AssetDefinedInMultipleReposNotice.types';\n\nexport const MULTIPLE_DEFINITIONS_WARNING = 'Multiple asset definitions found';\n\nexport const AssetDefinedInMultipleReposNotice: React.FC<{\n  assetKey: AssetKey;\n  loadedFromRepo: RepoAddress;\n  padded?: boolean;\n}> = ({assetKey, loadedFromRepo, padded}) => {\n  const {data} = useQuery<AssetDefinitionCollisionQuery, AssetDefinitionCollisionQueryVariables>(\n    ASSET_DEFINITION_COLLISION_QUERY,\n    {\n      variables: {assetKeys: [{path: assetKey.path}]},\n    },\n  );\n\n  const collision = data?.assetNodeDefinitionCollisions[0];\n  if (!collision) {\n    return <span />;\n  }\n\n  const allReposWithAsset = collision.repositories.map((r) =>\n    repoAddressAsHumanString({name: r.name, location: r.location.name}),\n  );\n\n  return (\n    <Box\n      padding={padded ? {vertical: 16, left: 24, right: 12} : {}}\n      border={{side: 'bottom', width: 1, color: Colors.KeylineGray}}\n    >\n      <Alert\n        intent=\"warning\"\n        title={MULTIPLE_DEFINITIONS_WARNING}\n        description={\n          <>\n            This asset was loaded from{' '}\n            {buildRepoPathForHuman(loadedFromRepo.name, loadedFromRepo.location)}, but duplicate\n            definitions were found in{' '}\n            <ButtonLink\n              underline=\"always\"\n              color={Colors.Yellow700}\n              onClick={() =>\n                showCustomAlert({\n                  title: MULTIPLE_DEFINITIONS_WARNING,\n                  body: (\n                    <>\n                      Code locations containing an asset definition for{' '}\n                      <strong>{displayNameForAssetKey(assetKey)}</strong>:\n                      <ul>\n                        {allReposWithAsset.map((addr) => (\n                          <li key={addr}>{addr}</li>\n                        ))}\n                      </ul>\n                    </>\n                  ),\n                })\n              }\n            >\n              {allReposWithAsset.length - 1} other repo{allReposWithAsset.length === 2 ? '' : 's'}\n            </ButtonLink>\n            . You should rename these assets to avoid collisions.\n          </>\n        }\n      />\n    </Box>\n  );\n};\n\nconst ASSET_DEFINITION_COLLISION_QUERY = gql`\n  query AssetDefinitionCollisionQuery($assetKeys: [AssetKeyInput!]!) {\n    assetNodeDefinitionCollisions(assetKeys: $assetKeys) {\n      assetKey {\n        path\n      }\n      repositories {\n        id\n        name\n        location {\n          id\n          name\n        }\n      }\n    }\n  }\n`;\n","import {Box, ButtonLink, Caption, Colors, Icon, Mono} from '@dagster-io/ui';\nimport React from 'react';\nimport styled from 'styled-components/macro';\n\nimport {useStateWithStorage} from '../hooks/useStateWithStorage';\nimport {DagsterTag} from '../runs/RunTag';\n\nimport {AssetEventGroup} from './groupByPartition';\n\n// There can be other keys in the event tags, but we want to show these two\n// at the top consistently regardless of their alphabetical / backend ordering.\nconst ORDER = ['dagster/logical_version', 'dagster/code_version'];\n\nexport const AssetEventSystemTags: React.FC<{\n  event: AssetEventGroup['latest'] | null;\n  paddingLeft?: number;\n  collapsible?: boolean;\n}> = ({event, paddingLeft, collapsible}) => {\n  const [shown, setShown] = useStateWithStorage('show-asset-system-tags', Boolean);\n\n  if (collapsible && !shown) {\n    return (\n      <Caption>\n        <ButtonLink onClick={() => setShown(true)}>\n          <Box flex={{alignItems: 'center'}}>\n            <span>Show tags ({event?.tags.length || 0})</span>\n            <Icon name=\"arrow_drop_down\" style={{transform: 'rotate(0deg)'}} />\n          </Box>\n        </ButtonLink>\n      </Caption>\n    );\n  }\n\n  return (\n    <>\n      <AssetEventSystemTagsTable>\n        <tbody>\n          {event?.tags.length ? (\n            [...event.tags]\n              .sort((a, b) => ORDER.indexOf(b.key) - ORDER.indexOf(a.key))\n              .map((t) => (\n                <tr key={t.key}>\n                  <td style={{paddingLeft}}>\n                    <Mono>{t.key.replace(DagsterTag.Namespace, '')}</Mono>\n                  </td>\n                  <td>{t.value}</td>\n                </tr>\n              ))\n          ) : (\n            <tr>\n              <td>No tags to display.</td>\n            </tr>\n          )}\n        </tbody>\n      </AssetEventSystemTagsTable>\n      {collapsible && (\n        <Caption>\n          <ButtonLink onClick={() => setShown(false)}>\n            <Box flex={{alignItems: 'center'}}>\n              <span>Hide tags</span>\n              <Icon name=\"arrow_drop_down\" style={{transform: 'rotate(180deg)'}} />\n            </Box>\n          </ButtonLink>\n        </Caption>\n      )}\n    </>\n  );\n};\n\nconst AssetEventSystemTagsTable = styled.table`\n  width: 100%;\n  border-spacing: 0;\n  border-collapse: collapse;\n\n  tr td:first-child {\n    max-width: 300px;\n    word-wrap: break-word;\n    width: 25%;\n  }\n  tr td {\n    border: 1px solid ${Colors.KeylineGray};\n    padding: 8px 12px;\n    font-size: 14px;\n    vertical-align: top;\n  }\n`;\n","import {gql} from '@apollo/client';\nimport {Box, ButtonLink, Tooltip} from '@dagster-io/ui';\nimport React from 'react';\nimport {Link} from 'react-router-dom';\n\nimport {Timestamp} from '../app/time/Timestamp';\n\nimport {assetDetailsPathForKey} from './assetDetailsPathForKey';\nimport {AssetLineageFragment} from './types/AssetLineageElements.types';\n\nconst AssetLineageInfoElement: React.FC<{\n  lineage_info: AssetLineageFragment;\n  timestamp: string;\n}> = ({lineage_info, timestamp}) => {\n  const partition_list_label = lineage_info.partitions.length === 1 ? 'Partition' : 'Partitions';\n  const partition_list_str = lineage_info.partitions\n    .map((partition) => `\"${partition}\"`)\n    .join(', ');\n  const to = assetDetailsPathForKey(lineage_info.assetKey, {asOf: timestamp});\n\n  return (\n    <Box margin={{bottom: 4}}>\n      {lineage_info.partitions.length > 0\n        ? `${partition_list_label} ${partition_list_str} of `\n        : ''}\n      <Tooltip\n        content={\n          <>\n            View snapshot as of{' '}\n            <Timestamp\n              timestamp={{ms: Number(timestamp)}}\n              timeFormat={{showSeconds: true, showTimezone: true}}\n            />\n          </>\n        }\n        modifiers={{offset: {enabled: true, options: {offset: [0, 16]}}}}\n        placement=\"right\"\n      >\n        <Link to={to}>\n          <Box flex={{display: 'inline-flex', alignItems: 'center'}}>\n            {lineage_info.assetKey.path\n              .map((p, i) => <span key={i}>{p}</span>)\n              .reduce(\n                (accum, curr, ii) => [\n                  ...accum,\n                  ii > 0 ? (\n                    <React.Fragment key={`${ii}-space`}>&nbsp;{'>'}&nbsp;</React.Fragment>\n                  ) : null,\n                  curr,\n                ],\n                [] as React.ReactNode[],\n              )}\n          </Box>\n        </Link>\n      </Tooltip>\n    </Box>\n  );\n};\n\nconst MAX_COLLAPSED = 5;\n\nexport const AssetLineageElements: React.FC<{\n  elements: AssetLineageFragment[];\n  timestamp: string;\n}> = ({elements, timestamp}) => {\n  const [collapsed, setCollapsed] = React.useState(true);\n\n  return (\n    <div>\n      {elements.length > MAX_COLLAPSED && (\n        <ButtonLink onClick={() => setCollapsed(!collapsed)}>\n          {collapsed ? 'Show More' : 'Show Less'}\n        </ButtonLink>\n      )}\n      {(collapsed ? elements.slice(elements.length - MAX_COLLAPSED) : elements).map((info, idx) => (\n        <AssetLineageInfoElement key={idx} lineage_info={info} timestamp={timestamp} />\n      ))}\n    </div>\n  );\n};\n\nexport const ASSET_LINEAGE_FRAGMENT = gql`\n  fragment AssetLineageFragment on AssetLineageInfo {\n    assetKey {\n      path\n    }\n    partitions\n  }\n`;\n","import {\n  Box,\n  Colors,\n  NonIdealState,\n  Caption,\n  Subheading,\n  ExternalAnchorButton,\n} from '@dagster-io/ui';\nimport flatMap from 'lodash/flatMap';\nimport uniq from 'lodash/uniq';\nimport * as React from 'react';\n\nimport {AssetValueGraph, AssetValueGraphData} from './AssetValueGraph';\nimport {AssetEventGroup} from './groupByPartition';\n\nexport const AssetMaterializationGraphs: React.FC<{\n  groups: AssetEventGroup[];\n  xAxis: 'partition' | 'time';\n  asSidebarSection?: boolean;\n  columnCount?: number;\n}> = (props) => {\n  const [xHover, setXHover] = React.useState<string | number | null>(null);\n\n  const reversed = React.useMemo(() => {\n    return [...props.groups].reverse();\n  }, [props.groups]);\n\n  const graphDataByMetadataLabel = extractNumericData(reversed, props.xAxis);\n  const graphLabels = Object.keys(graphDataByMetadataLabel).slice(0, 20).sort();\n\n  if (process.env.NODE_ENV === 'test') {\n    return <span />; // chartjs and our useViewport hook don't play nicely with jest\n  }\n\n  return (\n    <>\n      <div\n        style={{\n          display: 'grid',\n          gridTemplateColumns: `1fr `.repeat(props.columnCount || 2),\n          justifyContent: 'stretch',\n        }}\n      >\n        {graphLabels.map((label) => (\n          <Box\n            key={label}\n            style={{width: '100%'}}\n            border={{side: 'bottom', width: 1, color: Colors.KeylineGray}}\n          >\n            <Box\n              style={{width: '100%'}}\n              border={{side: 'right', width: 1, color: Colors.KeylineGray}}\n            >\n              {props.asSidebarSection ? (\n                <Box padding={{horizontal: 24, top: 8}} flex={{justifyContent: 'space-between'}}>\n                  <Caption style={{fontWeight: 700}}>{label}</Caption>\n                </Box>\n              ) : (\n                <Box\n                  padding={{horizontal: 24, vertical: 16}}\n                  border={{side: 'bottom', width: 1, color: Colors.KeylineGray}}\n                  flex={{justifyContent: 'space-between'}}\n                >\n                  <Subheading>{label}</Subheading>\n                </Box>\n              )}\n              <Box padding={{horizontal: 24, vertical: 16}}>\n                <AssetValueGraph\n                  label={label}\n                  width=\"100%\"\n                  data={graphDataByMetadataLabel[label]}\n                  xHover={xHover}\n                  onHoverX={(x) => x !== xHover && setXHover(x)}\n                />\n              </Box>\n            </Box>\n          </Box>\n        ))}\n      </div>\n      {graphLabels.length === 0 ? (\n        props.asSidebarSection ? (\n          <Box\n            margin={{horizontal: 24, vertical: 12}}\n            style={{color: Colors.Gray500, fontSize: '0.8rem'}}\n          >\n            No numeric metadata entries available to be graphed.\n          </Box>\n        ) : (\n          <Box padding={{horizontal: 24, top: 64}}>\n            <NonIdealState\n              shrinkable\n              icon=\"asset_plot\"\n              title=\"Asset plots are automatically generated by metadata\"\n              description=\"Include numeric metadata entries in your materializations and observations to see data graphed by time or partition.\"\n              action={\n                <ExternalAnchorButton href=\"https://docs.dagster.io/concepts/assets/software-defined-assets#recording-materialization-metadata\">\n                  View documentation\n                </ExternalAnchorButton>\n              }\n            />\n          </Box>\n        )\n      ) : (\n        props.xAxis === 'partition' && (\n          <Box padding={{vertical: 16, horizontal: 24}} style={{color: Colors.Gray400}}>\n            When graphing values by partition, the highest data point for each materialized event\n            label is displayed.\n          </Box>\n        )\n      )}\n    </>\n  );\n};\n\n/**\n * Helper function that iterates over the asset materializations and assembles time series data\n * and stats for all numeric metadata entries. This function makes the following guaruntees:\n *\n * - If a metadata entry is sparsely emitted, points are still included for missing x values\n *   with y = NaN. (For compatiblity with react-chartjs-2)\n * - If a metadata entry is generated many times for the same partition, and xAxis = partition,\n *   the MAX value emitted is used as the data point.\n *\n * Assumes that the data is pre-sorted in ascending partition order if using xAxis = partition.\n */\nconst extractNumericData = (datapoints: AssetEventGroup[], xAxis: 'time' | 'partition') => {\n  const series: {\n    [metadataEntryLabel: string]: AssetValueGraphData;\n  } = {};\n\n  // Build a set of the numeric metadata entry labels (note they may be sparsely emitted)\n  const numericMetadataLabels = uniq(\n    flatMap(datapoints, (e) =>\n      (e.latest?.metadataEntries || [])\n        .filter((k) => ['IntMetadataEntry', 'FloatMetadataEntry'].includes(k.__typename))\n        .map((k) => k.label),\n    ),\n  );\n\n  const append = (label: string, {x, y}: {x: number | string; y: number}) => {\n    series[label] = series[label] || {minX: 0, maxX: 0, minY: 0, maxY: 0, values: [], xAxis};\n\n    if (xAxis === 'partition') {\n      // If the xAxis is partition keys, the graph may only contain one value for each partition.\n      // If the existing sample for the partition was null, replace it. Otherwise take the\n      // most recent value.\n      const existingForPartition = series[label].values.find((v) => v.x === x);\n      if (existingForPartition) {\n        if (!isNaN(y)) {\n          existingForPartition.y = y;\n        }\n        return;\n      }\n    }\n    series[label].values.push({\n      xNumeric: typeof x === 'number' ? x : series[label].values.length,\n      x,\n      y,\n    });\n  };\n\n  for (const {partition, latest} of datapoints) {\n    const x = (xAxis === 'partition' ? partition : Number(latest?.timestamp)) || null;\n\n    if (x === null) {\n      // exclude materializations where partition = null from partitioned graphs\n      continue;\n    }\n\n    // Add an entry for every numeric metadata label\n    for (const label of numericMetadataLabels) {\n      const entry = latest?.metadataEntries.find((l) => l.label === label);\n      if (!entry) {\n        append(label, {x, y: NaN});\n        continue;\n      }\n\n      let y = NaN;\n      if (entry.__typename === 'IntMetadataEntry') {\n        if (entry.intValue !== null) {\n          y = entry.intValue;\n        } else {\n          // will incur precision loss here\n          y = parseInt(entry.intRepr);\n        }\n      }\n      if (entry.__typename === 'FloatMetadataEntry' && entry.floatValue !== null) {\n        y = entry.floatValue;\n      }\n      append(label, {x, y});\n    }\n  }\n\n  for (const serie of Object.values(series)) {\n    const xs = serie.values.map((v) => v.xNumeric);\n    const ys = serie.values.map((v) => v.y).filter((v) => !isNaN(v));\n    serie.minXNumeric = Math.min(...xs);\n    serie.maxXNumeric = Math.max(...xs);\n    serie.minY = Math.min(...ys);\n    serie.maxY = Math.max(...ys);\n  }\n  return series;\n};\n","import {gql} from '@apollo/client';\nimport {Box, MetadataTable} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {DAGSTER_TYPE_FRAGMENT} from '../dagstertype/DagsterType';\nimport {DagsterTypeFragment} from '../dagstertype/types/DagsterType.types';\nimport {MetadataEntry, METADATA_ENTRY_FRAGMENT} from '../metadata/MetadataEntry';\nimport {MetadataEntryFragment} from '../metadata/types/MetadataEntry.types';\n\nimport {AssetNodeOpMetadataFragment} from './types/AssetMetadata.types';\n\nexport const metadataForAssetNode = (\n  assetNode: AssetNodeOpMetadataFragment,\n): {assetType?: DagsterTypeFragment; assetMetadata: MetadataEntryFragment[]} => {\n  const assetType = assetNode.type ? assetNode.type : undefined;\n  const assetMetadata = assetNode.metadataEntries || [];\n  return {assetType, assetMetadata};\n};\n\nexport const AssetMetadataTable: React.FC<{\n  assetMetadata: MetadataEntryFragment[];\n  repoLocation: string;\n}> = ({assetMetadata, repoLocation}) => {\n  const rows = assetMetadata.map((entry) => {\n    return {\n      key: entry.label,\n      value: <MetadataEntry entry={entry} repoLocation={repoLocation} />,\n    };\n  });\n  return (\n    <Box padding={{vertical: 16, horizontal: 24}}>\n      <MetadataTable rows={rows} />\n    </Box>\n  );\n};\n\nexport const ASSET_NODE_OP_METADATA_FRAGMENT = gql`\n  fragment AssetNodeOpMetadataFragment on AssetNode {\n    id\n    metadataEntries {\n      ...MetadataEntryFragment\n    }\n    type {\n      ...DagsterTypeFragment\n    }\n  }\n\n  ${METADATA_ENTRY_FRAGMENT}\n  ${DAGSTER_TYPE_FRAGMENT}\n`;\n","import {Tooltip, Tag} from '@dagster-io/ui';\nimport dayjs from 'dayjs';\nimport duration from 'dayjs/plugin/duration';\nimport relativeTime from 'dayjs/plugin/relativeTime';\nimport React from 'react';\n\nimport {LiveDataForNode} from '../asset-graph/Utils';\nimport {AssetNodeLiveFreshnessPolicyFragment} from '../asset-graph/types/AssetNode.types';\nimport {humanCronString} from '../schedules/humanCronString';\n\nconst STALE_OVERDUE_MSG = `A materialization incorporating more recent upstream data is overdue.`;\nconst STALE_UNMATERIALIZED_MSG = `This asset has never been materialized.`;\n\ndayjs.extend(duration);\ndayjs.extend(relativeTime);\n\ntype LiveDataWithMinutesLate = LiveDataForNode & {\n  freshnessInfo: NonNullable<LiveDataForNode['freshnessInfo']> & {currentMinutesLate: number};\n};\n\nexport function isAssetLate(liveData?: LiveDataForNode): liveData is LiveDataWithMinutesLate {\n  return (\n    (liveData?.freshnessInfo && (liveData?.freshnessInfo.currentMinutesLate || 0) > 0) || false\n  );\n}\n\nexport const humanizedLateString = (minLate: number) =>\n  `${dayjs.duration(minLate, 'minutes').humanize(false)} late`;\n\nexport const CurrentMinutesLateTag: React.FC<{\n  liveData: LiveDataForNode;\n  policyOnHover?: boolean;\n}> = ({liveData, policyOnHover}) => {\n  const {freshnessInfo, freshnessPolicy} = liveData;\n  const description = policyOnHover ? freshnessPolicyDescription(freshnessPolicy) : '';\n\n  if (!freshnessInfo) {\n    return null;\n  }\n\n  if (freshnessInfo.currentMinutesLate === null) {\n    return (\n      <Tooltip\n        content={<div style={{maxWidth: 400}}>{`${STALE_UNMATERIALIZED_MSG} ${description}`}</div>}\n      >\n        <Tag intent=\"danger\" icon=\"warning\">\n          Late\n        </Tag>\n      </Tooltip>\n    );\n  }\n\n  if (freshnessInfo.currentMinutesLate === 0) {\n    return description ? (\n      <Tooltip content={freshnessPolicyDescription(freshnessPolicy)}>\n        <Tag intent=\"success\" icon=\"check_circle\" />\n      </Tooltip>\n    ) : (\n      <Tag intent=\"success\" icon=\"check_circle\" />\n    );\n  }\n\n  return (\n    <Tooltip content={<div style={{maxWidth: 400}}>{`${STALE_OVERDUE_MSG} ${description}`}</div>}>\n      <Tag intent=\"danger\" icon=\"warning\">\n        {humanizedLateString(freshnessInfo.currentMinutesLate)}\n      </Tag>\n    </Tooltip>\n  );\n};\n\nexport const freshnessPolicyDescription = (\n  freshnessPolicy: AssetNodeLiveFreshnessPolicyFragment | null,\n) => {\n  if (!freshnessPolicy) {\n    return '';\n  }\n\n  const {cronSchedule, maximumLagMinutes} = freshnessPolicy;\n  const nbsp = '\\xa0';\n  const cronDesc = cronSchedule ? humanCronString(cronSchedule, 'UTC').replace(/^At /, '') : '';\n  const lagDesc =\n    maximumLagMinutes % 30 === 0\n      ? `${maximumLagMinutes / 60} hour${maximumLagMinutes / 60 !== 1 ? 's' : ''}`\n      : `${maximumLagMinutes} min`;\n\n  if (cronDesc) {\n    return `By ${cronDesc}, this asset should incorporate all data up to ${lagDesc} before that${nbsp}time.`;\n  } else {\n    return `At any point in time, this asset should incorporate all data up to ${lagDesc} before that${nbsp}time.`;\n  }\n};\n","import {Alert, Box, Spinner} from '@dagster-io/ui';\nimport {BorderSetting} from '@dagster-io/ui/src/components/types';\nimport React from 'react';\nimport {Link} from 'react-router-dom';\n\nimport {LiveDataForNode} from '../asset-graph/Utils';\nimport {titleForRun} from '../runs/RunUtils';\n\nexport const CurrentRunsBanner: React.FC<{liveData?: LiveDataForNode; border: BorderSetting}> = ({\n  liveData,\n  border,\n}) => {\n  const {inProgressRunIds = [], unstartedRunIds = []} = liveData || {};\n\n  if (inProgressRunIds.length === 0 && unstartedRunIds.length === 0) {\n    return null;\n  }\n  return (\n    <Box padding={{vertical: 16, left: 24, right: 12}} border={border}>\n      <Alert\n        intent=\"info\"\n        icon={<Spinner purpose=\"body-text\" />}\n        title={\n          <div style={{fontWeight: 400}}>\n            {inProgressRunIds.length > 0 && (\n              <>\n                {inProgressRunIds.map((runId) => (\n                  <React.Fragment key={runId}>\n                    Run{' '}\n                    <Link to={`/runs/${runId}`}>\n                      {titleForRun({\n                        runId,\n                      })}\n                    </Link>\n                  </React.Fragment>\n                ))}{' '}\n                {inProgressRunIds.length === 1 ? 'is' : 'are'} currently refreshing this asset.\n              </>\n            )}\n            {unstartedRunIds.length > 0 && (\n              <>\n                {unstartedRunIds.map((runId) => (\n                  <React.Fragment key={runId}>\n                    Run{' '}\n                    <Link to={`/runs/${runId}`}>\n                      {titleForRun({\n                        runId,\n                      })}\n                    </Link>\n                  </React.Fragment>\n                ))}{' '}\n                {unstartedRunIds.length === 1 ? 'has' : 'have'} started and will refresh this asset.\n              </>\n            )}\n          </div>\n        }\n      />\n    </Box>\n  );\n};\n","import {Alert, Box, Colors, Icon} from '@dagster-io/ui';\nimport React from 'react';\n\nexport const DependsOnSelfBanner: React.FC = () => {\n  return (\n    <Box\n      padding={{vertical: 16, left: 24, right: 12}}\n      border={{side: 'bottom', width: 1, color: Colors.KeylineGray}}\n    >\n      <Alert\n        intent=\"info\"\n        icon={\n          <Icon name=\"history_toggle_off\" size={16} color={Colors.Blue700} style={{marginTop: 1}} />\n        }\n        title={\n          <div style={{fontWeight: 400}}>This asset depends on earlier partitions of itself. </div>\n        }\n      />\n    </Box>\n  );\n};\n","import {Alert, Box} from '@dagster-io/ui';\nimport {BorderSetting} from '@dagster-io/ui/src/components/types';\nimport React from 'react';\nimport {Link} from 'react-router-dom';\n\nimport {LiveDataForNode} from '../asset-graph/Utils';\nimport {titleForRun} from '../runs/RunUtils';\n\nexport const FailedRunsSinceMaterializationBanner: React.FC<{\n  liveData?: LiveDataForNode;\n  border: BorderSetting;\n}> = ({liveData, border}) => {\n  const {runWhichFailedToMaterialize} = liveData || {};\n\n  if (runWhichFailedToMaterialize) {\n    return (\n      <Box padding={{vertical: 16, left: 24, right: 12}} border={border}>\n        <Alert\n          intent=\"error\"\n          title={\n            <div style={{fontWeight: 400}}>\n              Run{' '}\n              <Link to={`/runs/${runWhichFailedToMaterialize.id}`}>\n                {titleForRun({runId: runWhichFailedToMaterialize.id})}\n              </Link>{' '}\n              failed to materialize this asset.\n            </div>\n          }\n        />\n      </Box>\n    );\n  }\n  return null;\n};\n","import {gql, useQuery} from '@apollo/client';\nimport {Box, Colors, Icon} from '@dagster-io/ui';\nimport React from 'react';\nimport {Link} from 'react-router-dom';\n\nimport {\n  RunningBackfillsNoticeQuery,\n  RunningBackfillsNoticeQueryVariables,\n} from './types/RunningBackfillsNotice.types';\n\nexport const RunningBackfillsNotice: React.FC<{partitionSetName: string}> = ({\n  partitionSetName,\n}) => {\n  const {data} = useQuery<RunningBackfillsNoticeQuery, RunningBackfillsNoticeQueryVariables>(\n    RUNNING_BACKFILLS_NOTICE_QUERY,\n  );\n\n  const runningBackfills =\n    data?.partitionBackfillsOrError.__typename === 'PartitionBackfills'\n      ? data.partitionBackfillsOrError.results\n      : [];\n\n  const runningBackfillCount = runningBackfills.filter(\n    (r) => r.partitionSetName === partitionSetName,\n  ).length;\n\n  if (runningBackfillCount === 0) {\n    return <span />;\n  }\n  return (\n    <div style={{color: Colors.Gray400, maxWidth: 350}}>\n      {runningBackfillCount === 1\n        ? 'Note: A backfill has been requested for this job and may be refreshing displayed assets. '\n        : `Note: ${runningBackfillCount} backfills have been requested for this job and may be refreshing displayed assets. `}\n      <Link to=\"/overview/backfills\" target=\"_blank\">\n        <Box flex={{gap: 4, display: 'inline-flex', alignItems: 'center'}}>\n          View <Icon name=\"open_in_new\" color={Colors.Link} />\n        </Box>\n      </Link>\n    </div>\n  );\n};\n\nconst RUNNING_BACKFILLS_NOTICE_QUERY = gql`\n  query RunningBackfillsNoticeQuery {\n    partitionBackfillsOrError(status: REQUESTED) {\n      __typename\n      ... on PartitionBackfills {\n        results {\n          partitionSetName\n          backfillId\n        }\n      }\n    }\n  }\n`;\n","import {gql, useApolloClient, useQuery} from '@apollo/client';\nimport {\n  Box,\n  Button,\n  ButtonLink,\n  Colors,\n  Dialog,\n  DialogBody,\n  DialogFooter,\n  DialogHeader,\n  Tooltip,\n  Alert,\n  Checkbox,\n  Icon,\n} from '@dagster-io/ui';\nimport reject from 'lodash/reject';\nimport React from 'react';\nimport {useHistory} from 'react-router-dom';\n\nimport {showCustomAlert} from '../app/CustomAlertProvider';\nimport {PipelineRunTag} from '../app/ExecutionSessionStorage';\nimport {usePermissionsForLocation} from '../app/Permissions';\nimport {PythonErrorInfo} from '../app/PythonErrorInfo';\nimport {displayNameForAssetKey, isHiddenAssetGroupJob} from '../asset-graph/Utils';\nimport {PartitionHealthSummary} from '../assets/PartitionHealthSummary';\nimport {AssetKey} from '../assets/types';\nimport {LaunchBackfillParams} from '../graphql/types';\nimport {LAUNCH_PARTITION_BACKFILL_MUTATION} from '../instance/BackfillUtils';\nimport {\n  LaunchPartitionBackfillMutation,\n  LaunchPartitionBackfillMutationVariables,\n} from '../instance/types/BackfillUtils.types';\nimport {CONFIG_PARTITION_SELECTION_QUERY} from '../launchpad/ConfigEditorConfigPicker';\nimport {useLaunchPadHooks} from '../launchpad/LaunchpadHooksContext';\nimport {TagContainer, TagEditor} from '../launchpad/TagEditor';\nimport {\n  ConfigPartitionSelectionQuery,\n  ConfigPartitionSelectionQueryVariables,\n} from '../launchpad/types/ConfigEditorConfigPicker.types';\nimport {\n  DaemonNotRunningAlert,\n  DAEMON_NOT_RUNNING_ALERT_INSTANCE_FRAGMENT,\n  showBackfillErrorToast,\n  showBackfillSuccessToast,\n  UsingDefaultLauncherAlert,\n  USING_DEFAULT_LAUNCH_ERALERT_INSTANCE_FRAGMENT,\n} from '../partitions/BackfillMessaging';\nimport {Section} from '../partitions/BackfillSelector';\nimport {DimensionRangeWizard} from '../partitions/DimensionRangeWizard';\nimport {PartitionState} from '../partitions/PartitionStatus';\nimport {assembleIntoSpans, stringForSpan} from '../partitions/SpanRepresentation';\nimport {DagsterTag} from '../runs/RunTag';\nimport {RepoAddress} from '../workspace/types';\n\nimport {executionParamsForAssetJob} from './LaunchAssetExecutionButton';\nimport {explodePartitionKeysInSelection, mergedAssetHealth} from './MultipartitioningSupport';\nimport {RunningBackfillsNotice} from './RunningBackfillsNotice';\nimport {\n  LaunchAssetChoosePartitionsQuery,\n  LaunchAssetChoosePartitionsQueryVariables,\n} from './types/LaunchAssetChoosePartitionsDialog.types';\nimport {PartitionDefinitionForLaunchAssetFragment} from './types/LaunchAssetExecutionButton.types';\nimport {usePartitionDimensionSelections} from './usePartitionDimensionSelections';\nimport {PartitionDimensionSelection, usePartitionHealthData} from './usePartitionHealthData';\nimport {usePartitionNameForPipeline} from './usePartitionNameForPipeline';\n\ninterface Props {\n  open: boolean;\n  setOpen: (open: boolean) => void;\n  repoAddress: RepoAddress;\n  assetJobName: string;\n  assets: {\n    assetKey: AssetKey;\n    opNames: string[];\n    partitionDefinition: PartitionDefinitionForLaunchAssetFragment | null;\n  }[];\n  upstreamAssetKeys: AssetKey[]; // single layer of upstream dependencies\n}\n\nexport const LaunchAssetChoosePartitionsDialog: React.FC<Props> = (props) => {\n  const title = `Launch runs to materialize ${\n    props.assets.length > 1\n      ? `${props.assets.length} assets`\n      : displayNameForAssetKey(props.assets[0].assetKey)\n  }`;\n\n  return (\n    <Dialog\n      style={{width: 700}}\n      isOpen={props.open}\n      canEscapeKeyClose\n      canOutsideClickClose\n      onClose={() => props.setOpen(false)}\n    >\n      <DialogHeader icon=\"layers\" label={title} />\n      <LaunchAssetChoosePartitionsDialogBody {...props} />\n    </Dialog>\n  );\n};\n\n// Note: This dialog loads a lot of data - the body is broken into a separate\n// component so we can be *sure* the hooks won't load data until it's opened.\n// (<Dialog> does not render it's children until open=true)\n//\n// Additionally, we want the dialog to reset when it's closed and re-opened so\n// that partition health, etc. is up-to-date.\n//\nconst LaunchAssetChoosePartitionsDialogBody: React.FC<Props> = ({\n  setOpen,\n  assets,\n  repoAddress,\n  assetJobName,\n  upstreamAssetKeys,\n}) => {\n  const partitionedAssets = assets.filter((a) => !!a.partitionDefinition);\n\n  const {canLaunchPartitionBackfill} = usePermissionsForLocation(repoAddress.location);\n  const [launching, setLaunching] = React.useState(false);\n  const [tagEditorOpen, setTagEditorOpen] = React.useState<boolean>(false);\n  const [tags, setTags] = React.useState<PipelineRunTag[]>([]);\n\n  const [previewCount, setPreviewCount] = React.useState(0);\n  const morePreviewsCount = partitionedAssets.length - previewCount;\n\n  const assetHealth = usePartitionHealthData(partitionedAssets.map((a) => a.assetKey));\n  const mergedHealth = React.useMemo(() => mergedAssetHealth(assetHealth), [assetHealth]);\n\n  const knownDimensions = partitionedAssets[0].partitionDefinition?.dimensionTypes || [];\n  const [missingOnly, setMissingOnly] = React.useState(true);\n  const [selections, setSelections] = usePartitionDimensionSelections({\n    knownDimensionNames: knownDimensions.map((d) => d.name),\n    modifyQueryString: false,\n    assetHealth: mergedHealth,\n  });\n\n  const keysInSelection = React.useMemo(\n    () =>\n      explodePartitionKeysInSelection(selections, (dimensionKeys: string[]) => {\n        // Note: If the merged asset health for a given partition is \"partial\", we want\n        // to group it into \"missing\" within the backfill UI. We don't have a fine-grained\n        // way to run just the missing assets within the partition.\n        //\n        // The alternative would be to offer a \"Partial\" checkbox alongside \"Missing\",\n        // but defining missing as \"missing for /any/ asset I've selected\" is simpler.\n        //\n        const state = mergedHealth.stateForKey(dimensionKeys);\n        return state === PartitionState.SUCCESS_MISSING ? PartitionState.MISSING : state;\n      }),\n    [selections, mergedHealth],\n  );\n\n  const [launchWithRangesAsTags, setLaunchWithRangesAsTags] = React.useState(false);\n  const canLaunchWithRangesAsTags =\n    selections.every((s) => s.selectedRanges.length === 1) &&\n    selections.some((s) => s.selectedKeys.length > 1);\n\n  const keysFiltered = React.useMemo(\n    () =>\n      missingOnly\n        ? keysInSelection.filter((key) => key.state === PartitionState.MISSING)\n        : keysInSelection,\n    [keysInSelection, missingOnly],\n  );\n\n  const client = useApolloClient();\n  const history = useHistory();\n  const instanceResult = useQuery<\n    LaunchAssetChoosePartitionsQuery,\n    LaunchAssetChoosePartitionsQueryVariables\n  >(LAUNCH_ASSET_CHOOSE_PARTITIONS_QUERY);\n  const instance = instanceResult.data?.instance;\n\n  const {useLaunchWithTelemetry} = useLaunchPadHooks();\n  const launchWithTelemetry = useLaunchWithTelemetry();\n  const launchAsBackfill = !launchWithRangesAsTags && keysFiltered.length !== 1;\n\n  React.useEffect(() => {\n    !canLaunchWithRangesAsTags && setLaunchWithRangesAsTags(false);\n  }, [canLaunchWithRangesAsTags]);\n\n  React.useEffect(() => {\n    launchWithRangesAsTags && setMissingOnly(false);\n  }, [launchWithRangesAsTags]);\n\n  // Find the partition set name. This seems like a bit of a hack, unclear\n  // how it would work if there were two different partition spaces in the asset job\n  const {partitionSet, partitionSetError} = usePartitionNameForPipeline(repoAddress, assetJobName);\n\n  const onLaunch = async () => {\n    setLaunching(true);\n\n    if (!partitionSet) {\n      setLaunching(false);\n      showCustomAlert({\n        title: `Unable to find partition set on ${assetJobName}`,\n        body: partitionSetError ? <PythonErrorInfo error={partitionSetError} /> : <span />,\n      });\n      return;\n    }\n\n    if (launchAsBackfill) {\n      await onLaunchAsBackfill();\n    } else {\n      await onLaunchAsSingleRun();\n    }\n    setLaunching(false);\n  };\n\n  const onLaunchAsSingleRun = async () => {\n    const {data: tagAndConfigData} = await client.query<\n      ConfigPartitionSelectionQuery,\n      ConfigPartitionSelectionQueryVariables\n    >({\n      query: CONFIG_PARTITION_SELECTION_QUERY,\n      fetchPolicy: 'network-only',\n      variables: {\n        repositorySelector: {\n          repositoryLocationName: repoAddress.location,\n          repositoryName: repoAddress.name,\n        },\n        partitionSetName: partitionSet!.name,\n        partitionName: keysFiltered[0].partitionKey,\n      },\n    });\n\n    if (\n      !tagAndConfigData ||\n      !tagAndConfigData.partitionSetOrError ||\n      tagAndConfigData.partitionSetOrError.__typename !== 'PartitionSet' ||\n      !tagAndConfigData.partitionSetOrError.partition\n    ) {\n      return;\n    }\n\n    const {partition} = tagAndConfigData.partitionSetOrError;\n\n    if (partition.tagsOrError.__typename === 'PythonError') {\n      showCustomAlert({\n        title: 'Unable to load tags',\n        body: <PythonErrorInfo error={partition.tagsOrError} />,\n      });\n      return;\n    }\n    if (partition.runConfigOrError.__typename === 'PythonError') {\n      showCustomAlert({\n        title: 'Unable to load tags',\n        body: <PythonErrorInfo error={partition.runConfigOrError} />,\n      });\n      return;\n    }\n\n    const runConfigData = partition.runConfigOrError.yaml || '';\n    let allTags = [...partition.tagsOrError.results, ...tags];\n\n    if (launchWithRangesAsTags) {\n      allTags = allTags.filter((t) => !t.key.startsWith(DagsterTag.Partition));\n      allTags.push({\n        key: DagsterTag.AssetPartitionRangeStart,\n        value: keysInSelection[0].partitionKey,\n      });\n      allTags.push({\n        key: DagsterTag.AssetPartitionRangeEnd,\n        value: keysInSelection[keysInSelection.length - 1].partitionKey,\n      });\n    }\n\n    const result = await launchWithTelemetry(\n      {\n        executionParams: {\n          ...executionParamsForAssetJob(repoAddress, assetJobName, assets, allTags),\n          runConfigData,\n          mode: partition.mode,\n        },\n      },\n      'toast',\n    );\n\n    if (result?.__typename === 'LaunchRunSuccess') {\n      setOpen(false);\n    }\n  };\n\n  const onLaunchAsBackfill = async () => {\n    const selectorUnlessGraph:\n      | LaunchBackfillParams['selector']\n      | undefined = !isHiddenAssetGroupJob(assetJobName)\n      ? {\n          partitionSetName: partitionSet!.name,\n          repositorySelector: {\n            repositoryLocationName: repoAddress.location,\n            repositoryName: repoAddress.name,\n          },\n        }\n      : undefined;\n\n    const {data: launchBackfillData} = await client.mutate<\n      LaunchPartitionBackfillMutation,\n      LaunchPartitionBackfillMutationVariables\n    >({\n      mutation: LAUNCH_PARTITION_BACKFILL_MUTATION,\n      variables: {\n        backfillParams: {\n          selector: selectorUnlessGraph,\n          assetSelection: assets.map((a) => ({path: a.assetKey.path})),\n          partitionNames: keysFiltered.map((k) => k.partitionKey),\n          fromFailure: false,\n          tags,\n        },\n      },\n    });\n\n    if (launchBackfillData?.launchPartitionBackfill.__typename === 'LaunchBackfillSuccess') {\n      showBackfillSuccessToast(history, launchBackfillData?.launchPartitionBackfill.backfillId);\n      setOpen(false);\n    } else {\n      showBackfillErrorToast(launchBackfillData);\n    }\n  };\n\n  return (\n    <>\n      <DialogBody>\n        <Box flex={{direction: 'column', gap: 8}}>\n          <Box>\n            Select partitions to materialize. Click and drag to select a range on the timeline.\n          </Box>\n\n          {selections.map((range, idx) => (\n            <DimensionRangeWizard\n              key={range.dimension.name}\n              partitionKeys={range.dimension.partitionKeys}\n              partitionStateForKey={(dimensionKey) =>\n                mergedHealth.stateForSingleDimension(\n                  idx,\n                  dimensionKey,\n                  selections.length === 2 ? selections[1 - idx].selectedKeys : undefined,\n                )\n              }\n              selected={range.selectedKeys}\n              setSelected={(selectedKeys) =>\n                setSelections(\n                  selections.map((r) =>\n                    r.dimension === range.dimension ? {...r, selectedKeys} : r,\n                  ),\n                )\n              }\n            />\n          ))}\n          <Box flex={{justifyContent: 'space-between'}}>\n            <Checkbox\n              label=\"Missing partitions only\"\n              checked={missingOnly}\n              disabled={launchWithRangesAsTags}\n              onChange={() => setMissingOnly(!missingOnly)}\n            />\n\n            <Checkbox\n              label={\n                <Box flex={{alignItems: 'center', gap: 4}}>\n                  Pass partition ranges to single run\n                  <Tooltip\n                    position=\"top-left\"\n                    content={\n                      <div style={{maxWidth: 300}}>\n                        This option requires that your assets are written to operate on a partition\n                        key range via context.asset_partition_key_range_for_output or\n                        context.asset_partitions_time_window_for_output.\n                      </div>\n                    }\n                  >\n                    <Icon name=\"info\" color={Colors.Gray500} />\n                  </Tooltip>\n                </Box>\n              }\n              checked={launchWithRangesAsTags}\n              disabled={!canLaunchWithRangesAsTags}\n              onChange={() => setLaunchWithRangesAsTags(!launchWithRangesAsTags)}\n            />\n          </Box>\n        </Box>\n\n        {previewCount > 0 && (\n          <Box\n            margin={{top: 16}}\n            flex={{direction: 'column', gap: 8}}\n            padding={{vertical: 16, horizontal: 20}}\n            border={{side: 'horizontal', width: 1, color: Colors.KeylineGray}}\n            background={Colors.Gray100}\n            style={{\n              marginLeft: -20,\n              marginRight: -20,\n              overflowY: 'auto',\n              overflowX: 'visible',\n              maxHeight: '35vh',\n            }}\n          >\n            {partitionedAssets.slice(0, previewCount).map((a) => (\n              <PartitionHealthSummary\n                key={displayNameForAssetKey(a.assetKey)}\n                assetKey={a.assetKey}\n                showAssetKey\n                data={assetHealth}\n                selections={selections}\n              />\n            ))}\n            {morePreviewsCount > 0 && (\n              <Box margin={{vertical: 8}}>\n                <ButtonLink onClick={() => setPreviewCount(partitionedAssets.length)}>\n                  Show {morePreviewsCount} more {morePreviewsCount > 1 ? 'previews' : 'preview'}\n                </ButtonLink>\n              </Box>\n            )}\n          </Box>\n        )}\n\n        {previewCount === 0 && partitionedAssets.length > 1 && (\n          <Box margin={{top: 16, bottom: 8}}>\n            <ButtonLink onClick={() => setPreviewCount(5)}>\n              Show per-asset partition health\n            </ButtonLink>\n          </Box>\n        )}\n\n        <UpstreamUnavailableWarning\n          upstreamAssetKeys={upstreamAssetKeys}\n          selections={selections}\n          setSelections={setSelections}\n        />\n\n        <Box flex={{direction: 'column', gap: 16}} style={{marginTop: 24}}>\n          <Section title=\"Tags\">\n            <TagEditor\n              tagsFromSession={tags}\n              onChange={setTags}\n              open={tagEditorOpen}\n              onRequestClose={() => setTagEditorOpen(false)}\n            />\n            {tags.length ? (\n              <div style={{border: `1px solid ${Colors.Gray300}`, borderRadius: 8, padding: 3}}>\n                <TagContainer tagsFromSession={tags} onRequestEdit={() => setTagEditorOpen(true)} />\n              </div>\n            ) : (\n              <div>\n                <Button onClick={() => setTagEditorOpen(true)}>\n                  {launchAsBackfill ? 'Add tags to backfill runs' : 'Add tags'}\n                </Button>\n              </div>\n            )}\n          </Section>\n\n          {instance && launchAsBackfill && <DaemonNotRunningAlert instance={instance} />}\n\n          {instance && launchAsBackfill && <UsingDefaultLauncherAlert instance={instance} />}\n        </Box>\n      </DialogBody>\n\n      <DialogFooter\n        left={partitionSet && <RunningBackfillsNotice partitionSetName={partitionSet.name} />}\n      >\n        <Button intent=\"none\" onClick={() => setOpen(false)}>\n          Cancel\n        </Button>\n        {launchAsBackfill && !canLaunchPartitionBackfill.enabled ? (\n          <Tooltip content={canLaunchPartitionBackfill.disabledReason}>\n            <Button disabled>{`Launch ${keysFiltered.length}-Run Backfill`}</Button>\n          </Tooltip>\n        ) : (\n          <Button\n            intent=\"primary\"\n            onClick={onLaunch}\n            disabled={keysFiltered.length === 0}\n            loading={launching}\n          >\n            {launching\n              ? 'Launching...'\n              : launchAsBackfill\n              ? `Launch ${keysFiltered.length}-Run Backfill`\n              : `Launch 1 Run`}\n          </Button>\n        )}\n      </DialogFooter>\n    </>\n  );\n};\n\nconst UpstreamUnavailableWarning: React.FC<{\n  upstreamAssetKeys: AssetKey[];\n  selections: PartitionDimensionSelection[];\n  setSelections: (next: PartitionDimensionSelection[]) => void;\n}> = ({upstreamAssetKeys, selections, setSelections}) => {\n  // We want to warn if an immediately upstream asset 1) has the same partitioning and\n  // 2) is missing materializations for keys in `allSelected`. We only offer this feature\n  // for single-dimensional partitioned assets because it's difficult to express the\n  // unavailable partitions in the multi-dimensional case and our \"two range inputs\" won't\n  // allow us to remove missing individual pairs.\n  const upstreamAssetHealth = usePartitionHealthData(upstreamAssetKeys);\n  if (upstreamAssetHealth.length === 0) {\n    return <span />;\n  }\n\n  const upstreamUnavailable = (singleDimensionKey: string) =>\n    upstreamAssetHealth.some((a) => {\n      // If the key is not undefined, it's present in the partition key space of the asset\n      return a.stateForKey([singleDimensionKey]) === PartitionState.MISSING;\n    });\n\n  const upstreamUnavailableSpans =\n    selections.length === 1\n      ? assembleIntoSpans(selections[0].selectedKeys, upstreamUnavailable).filter(\n          (s) => s.status === true,\n        )\n      : [];\n\n  const onRemoveUpstreamUnavailable = () => {\n    if (selections.length > 1) {\n      throw new Error('Assertion failed, this feature is only available for 1 dimensional assets');\n    }\n    setSelections([\n      {...selections[0], selectedKeys: reject(selections[0].selectedKeys, upstreamUnavailable)},\n    ]);\n  };\n\n  if (upstreamUnavailableSpans.length === 0) {\n    return <span />;\n  }\n\n  return (\n    <Box margin={{top: 16}}>\n      <Alert\n        intent=\"warning\"\n        title=\"Upstream data missing\"\n        description={\n          <>\n            {upstreamUnavailableSpans\n              .map((span) => stringForSpan(span, selections[0].selectedKeys))\n              .join(', ')}\n            {\n              ' cannot be materialized because upstream materializations are missing. Consider materializing upstream assets or '\n            }\n            <ButtonLink underline=\"always\" onClick={onRemoveUpstreamUnavailable}>\n              remove these partitions\n            </ButtonLink>\n            {` to avoid failures.`}\n          </>\n        }\n      />\n    </Box>\n  );\n};\n\nconst LAUNCH_ASSET_CHOOSE_PARTITIONS_QUERY = gql`\n  query LaunchAssetChoosePartitionsQuery {\n    instance {\n      ...DaemonNotRunningAlertInstanceFragment\n      ...UsingDefaultLauncherAlertInstanceFragment\n    }\n  }\n\n  ${DAEMON_NOT_RUNNING_ALERT_INSTANCE_FRAGMENT}\n  ${USING_DEFAULT_LAUNCH_ERALERT_INSTANCE_FRAGMENT}\n`;\n","import {ApolloClient, gql, useApolloClient} from '@apollo/client';\nimport {Box, Button, Icon, Menu, MenuItem, Popover, Spinner, Tooltip} from '@dagster-io/ui';\nimport pick from 'lodash/pick';\nimport uniq from 'lodash/uniq';\nimport React from 'react';\n\nimport {showCustomAlert} from '../app/CustomAlertProvider';\nimport {useConfirmation} from '../app/CustomConfirmationProvider';\nimport {IExecutionSession} from '../app/ExecutionSessionStorage';\nimport {usePermissionsDEPRECATED} from '../app/Permissions';\nimport {\n  displayNameForAssetKey,\n  isHiddenAssetGroupJob,\n  LiveData,\n  toGraphId,\n} from '../asset-graph/Utils';\nimport {useLaunchPadHooks} from '../launchpad/LaunchpadHooksContext';\nimport {AssetLaunchpad} from '../launchpad/LaunchpadRoot';\nimport {DagsterTag} from '../runs/RunTag';\nimport {LaunchPipelineExecutionMutationVariables} from '../runs/types/RunUtils.types';\nimport {CONFIG_TYPE_SCHEMA_FRAGMENT} from '../typeexplorer/ConfigTypeSchema';\nimport {buildRepoAddress} from '../workspace/buildRepoAddress';\nimport {repoAddressAsHumanString} from '../workspace/repoAddressAsString';\nimport {RepoAddress} from '../workspace/types';\n\nimport {ASSET_NODE_CONFIG_FRAGMENT} from './AssetConfig';\nimport {MULTIPLE_DEFINITIONS_WARNING} from './AssetDefinedInMultipleReposNotice';\nimport {LaunchAssetChoosePartitionsDialog} from './LaunchAssetChoosePartitionsDialog';\nimport {isAssetMissing, isAssetStale} from './StaleTag';\nimport {AssetKey} from './types';\nimport {\n  LaunchAssetExecutionAssetNodeFragment,\n  LaunchAssetLoaderQuery,\n  LaunchAssetLoaderQueryVariables,\n  LaunchAssetLoaderResourceQuery,\n  LaunchAssetLoaderResourceQueryVariables,\n  LaunchAssetCheckUpstreamQuery,\n  LaunchAssetCheckUpstreamQueryVariables,\n} from './types/LaunchAssetExecutionButton.types';\n\ntype LaunchAssetsState =\n  | {type: 'none'}\n  | {type: 'loading'}\n  | {type: 'error'; error: string}\n  | {\n      type: 'launchpad';\n      jobName: string;\n      sessionPresets: Partial<IExecutionSession>;\n      repoAddress: RepoAddress;\n    }\n  | {\n      type: 'partitions';\n      jobName: string;\n      assets: LaunchAssetExecutionAssetNodeFragment[];\n      upstreamAssetKeys: AssetKey[];\n      repoAddress: RepoAddress;\n    }\n  | {\n      type: 'single-run';\n      executionParams: LaunchPipelineExecutionMutationVariables['executionParams'];\n    };\n\nconst countOrBlank = (k: unknown[]) => (k.length > 1 ? ` (${k.length})` : '');\n\ntype Asset =\n  | {assetKey: AssetKey; partitionDefinition: {__typename: string} | null; isSource: boolean}\n  | {assetKey: AssetKey; isPartitioned: boolean; isSource: boolean};\n\ntype AssetsInScope = {all: Asset[]; skipAllTerm?: boolean} | {selected: Asset[]};\n\ntype LaunchOption = {assetKeys: AssetKey[]; label: string};\n\nconst isAnyPartitioned = (assets: Asset[]) =>\n  assets.some(\n    (a) =>\n      ('partitionDefinition' in a && !!a.partitionDefinition) ||\n      ('isPartitioned' in a && a.isPartitioned),\n  );\n\nfunction optionsForButton(scope: AssetsInScope, liveDataForStale?: LiveData): LaunchOption[] {\n  // If you pass a set of selected assets, we always show just one option\n  // to materialize that selection.\n  if ('selected' in scope) {\n    const assets = scope.selected.filter((a) => !a.isSource);\n    return [\n      {\n        assetKeys: assets.map((a) => a.assetKey),\n        label: `Materialize selected${countOrBlank(assets)}${isAnyPartitioned(assets) ? '…' : ''}`,\n      },\n    ];\n  }\n\n  const options: LaunchOption[] = [];\n  const assets = scope.all.filter((a) => !a.isSource);\n\n  options.push({\n    assetKeys: assets.map((a) => a.assetKey),\n    label:\n      assets.length > 1 && !scope.skipAllTerm\n        ? `Materialize all${isAnyPartitioned(assets) ? '…' : ''}`\n        : `Materialize${isAnyPartitioned(assets) ? '…' : ''}`,\n  });\n\n  if (liveDataForStale) {\n    const missingOrStale = assets.filter(\n      (a) =>\n        isAssetMissing(liveDataForStale[toGraphId(a.assetKey)]) ||\n        isAssetStale(liveDataForStale[toGraphId(a.assetKey)]),\n    );\n\n    options.push({\n      assetKeys: missingOrStale.map((a) => a.assetKey),\n      label: `Materialize stale and missing${countOrBlank(missingOrStale)}`,\n    });\n  }\n\n  return options;\n}\n\nexport const LaunchAssetExecutionButton: React.FC<{\n  scope: AssetsInScope;\n  liveDataForStale?: LiveData; // For \"stale\" dropdown options\n  intent?: 'primary' | 'none';\n  preferredJobName?: string;\n}> = ({scope, liveDataForStale, preferredJobName, intent = 'primary'}) => {\n  const {canLaunchPipelineExecution} = usePermissionsDEPRECATED();\n  const {onClick, loading, launchpadElement} = useMaterializationAction(preferredJobName);\n  const [isOpen, setIsOpen] = React.useState(false);\n\n  const options = optionsForButton(scope, liveDataForStale);\n  const firstOption = options[0];\n\n  const {MaterializeButton} = useLaunchPadHooks();\n\n  if (!firstOption) {\n    return <span />;\n  }\n\n  if (!canLaunchPipelineExecution.enabled) {\n    return (\n      <Tooltip content=\"You do not have permission to materialize assets\" position=\"bottom-right\">\n        <Button intent={intent} icon={<Icon name=\"materialization\" />} disabled>\n          {firstOption.label}\n        </Button>\n      </Tooltip>\n    );\n  }\n\n  return (\n    <>\n      <Box flex={{alignItems: 'center'}}>\n        <Tooltip\n          content=\"Shift+click to add configuration\"\n          position=\"bottom-right\"\n          useDisabledButtonTooltipFix\n        >\n          <MaterializeButton\n            intent={intent}\n            onClick={(e) => onClick(firstOption.assetKeys, e)}\n            style={\n              options.length > 1\n                ? {\n                    borderTopRightRadius: 0,\n                    borderBottomRightRadius: 0,\n                    borderRight: `1px solid rgba(255,255,255,0.2)`,\n                  }\n                : {}\n            }\n            disabled={!firstOption.assetKeys.length}\n            icon={loading ? <Spinner purpose=\"body-text\" /> : <Icon name=\"materialization\" />}\n          >\n            {firstOption.label}\n          </MaterializeButton>\n        </Tooltip>\n        {options.length > 1 && (\n          <Popover\n            isOpen={isOpen}\n            onInteraction={(nextOpen) => setIsOpen(nextOpen)}\n            position=\"bottom-right\"\n            content={\n              <Menu>\n                {options.slice(1).map((option) => (\n                  <MenuItem\n                    key={option.label}\n                    text={option.label}\n                    icon=\"materialization\"\n                    disabled={option.assetKeys.length === 0}\n                    onClick={(e) => onClick(option.assetKeys, e)}\n                  />\n                ))}\n              </Menu>\n            }\n          >\n            <Button\n              role=\"button\"\n              style={{minWidth: 'initial', borderTopLeftRadius: 0, borderBottomLeftRadius: 0}}\n              icon={<Icon name=\"arrow_drop_down\" />}\n              intent={intent}\n            />\n          </Popover>\n        )}\n      </Box>\n      {launchpadElement}\n    </>\n  );\n};\n\nexport const useMaterializationAction = (preferredJobName?: string) => {\n  const {useLaunchWithTelemetry} = useLaunchPadHooks();\n  const launchWithTelemetry = useLaunchWithTelemetry();\n\n  const client = useApolloClient();\n  const confirm = useConfirmation();\n\n  const [state, setState] = React.useState<LaunchAssetsState>({type: 'none'});\n\n  const onClick = async (assetKeys: AssetKey[], e: React.MouseEvent<any>) => {\n    if (state.type === 'loading') {\n      return;\n    }\n    setState({type: 'loading'});\n\n    const result = await client.query<LaunchAssetLoaderQuery, LaunchAssetLoaderQueryVariables>({\n      query: LAUNCH_ASSET_LOADER_QUERY,\n      variables: {assetKeys: assetKeys.map(({path}) => ({path}))},\n    });\n\n    if (result.data.assetNodeDefinitionCollisions.length) {\n      showCustomAlert(buildAssetCollisionsAlert(result.data));\n      setState({type: 'none'});\n      return;\n    }\n\n    const assets = result.data.assetNodes;\n    const forceLaunchpad = e.shiftKey;\n\n    const next = await stateForLaunchingAssets(client, assets, forceLaunchpad, preferredJobName);\n\n    if (next.type === 'error') {\n      showCustomAlert({\n        title: 'Unable to Materialize',\n        body: next.error,\n      });\n      setState({type: 'none'});\n      return;\n    }\n\n    const missing = await upstreamAssetsWithNoMaterializations(client, assets);\n    if (missing.length) {\n      setState({type: 'none'});\n      try {\n        await confirm({\n          title: 'Are you sure?',\n          description: (\n            <>\n              <div>\n                Materializing these assets may fail because the upstream assets listed below have\n                not been materialized yet.\n              </div>\n              <ul>\n                {missing.map((assetKey, idx) => (\n                  <li key={idx}>{displayNameForAssetKey(assetKey)}</li>\n                ))}\n              </ul>\n            </>\n          ),\n        });\n        setState({type: 'loading'});\n      } catch {\n        return;\n      }\n    }\n\n    if (next.type === 'single-run') {\n      await launchWithTelemetry({executionParams: next.executionParams}, 'toast');\n      setState({type: 'none'});\n    } else {\n      setState(next);\n    }\n  };\n\n  const launchpad = () => {\n    if (state.type === 'launchpad') {\n      return (\n        <AssetLaunchpad\n          assetJobName={state.jobName}\n          repoAddress={state.repoAddress}\n          sessionPresets={state.sessionPresets}\n          open={true}\n          setOpen={() => setState({type: 'none'})}\n        />\n      );\n    }\n\n    if (state.type === 'partitions') {\n      return (\n        <LaunchAssetChoosePartitionsDialog\n          assets={state.assets}\n          upstreamAssetKeys={state.upstreamAssetKeys}\n          repoAddress={state.repoAddress}\n          assetJobName={state.jobName}\n          open={true}\n          setOpen={() => setState({type: 'none'})}\n        />\n      );\n    }\n\n    return null;\n  };\n\n  return {onClick, loading: state.type === 'loading', launchpadElement: launchpad()};\n};\n\nasync function stateForLaunchingAssets(\n  client: ApolloClient<any>,\n  assets: LaunchAssetExecutionAssetNodeFragment[],\n  forceLaunchpad: boolean,\n  preferredJobName?: string,\n): Promise<LaunchAssetsState> {\n  if (assets.some((x) => x.isSource)) {\n    return {\n      type: 'error',\n      error: 'One or more source assets are selected and cannot be materialized.',\n    };\n  }\n\n  const repoAddress = buildRepoAddress(\n    assets[0]?.repository.name || '',\n    assets[0]?.repository.location.name || '',\n  );\n  const repoName = repoAddressAsHumanString(repoAddress);\n\n  if (\n    !assets.every(\n      (a) =>\n        a.repository.name === repoAddress.name &&\n        a.repository.location.name === repoAddress.location,\n    )\n  ) {\n    return {\n      type: 'error',\n      error: `Assets must be in ${repoName} to be materialized together.`,\n    };\n  }\n\n  const partitionDefinition = assets.find((a) => !!a.partitionDefinition)?.partitionDefinition;\n  if (\n    assets.some(\n      (a) =>\n        a.partitionDefinition &&\n        partitionDefinition &&\n        a.partitionDefinition.description !== partitionDefinition.description,\n    )\n  ) {\n    return {\n      type: 'error',\n      error: 'Assets must share a partition definition to be materialized together.',\n    };\n  }\n\n  const jobName = getCommonJob(assets, preferredJobName);\n  if (!jobName) {\n    return {\n      type: 'error',\n      error: 'Assets must be in the same job to be materialized together.',\n    };\n  }\n\n  const resourceResult = await client.query<\n    LaunchAssetLoaderResourceQuery,\n    LaunchAssetLoaderResourceQueryVariables\n  >({\n    query: LAUNCH_ASSET_LOADER_RESOURCE_QUERY,\n    variables: {\n      pipelineName: jobName,\n      repositoryName: assets[0].repository.name,\n      repositoryLocationName: assets[0].repository.location.name,\n    },\n  });\n  const pipeline = resourceResult.data.pipelineOrError;\n  if (pipeline.__typename !== 'Pipeline') {\n    return {type: 'error', error: pipeline.message};\n  }\n  const partitionSets = resourceResult.data.partitionSetsOrError;\n  if (partitionSets.__typename !== 'PartitionSets') {\n    return {type: 'error', error: partitionSets.message};\n  }\n\n  const requiredResourceKeys = assets.flatMap((a) => a.requiredResources.map((r) => r.resourceKey));\n  const resources = pipeline.modes[0].resources.filter((r) =>\n    requiredResourceKeys.includes(r.name),\n  );\n  const anyResourcesHaveRequiredConfig = resources.some((r) => r.configField?.isRequired);\n  const anyAssetsHaveRequiredConfig = assets.some((a) => a.configField?.isRequired);\n\n  // Note: If a partition definition is present and we're launching a user-defined job,\n  // we assume that any required config will be provided by a PartitionedConfig function\n  // attached to the job. Otherwise backfills won't work and you'll know to add one!\n  const assumeConfigPresent = partitionDefinition && !isHiddenAssetGroupJob(jobName);\n\n  const needLaunchpad =\n    !assumeConfigPresent && (anyAssetsHaveRequiredConfig || anyResourcesHaveRequiredConfig);\n\n  if (needLaunchpad || forceLaunchpad) {\n    const assetOpNames = assets.flatMap((a) => a.opNames || []);\n    return {\n      type: 'launchpad',\n      jobName,\n      repoAddress,\n      sessionPresets: {\n        flattenGraphs: true,\n        assetSelection: assets.map((a) => ({assetKey: a.assetKey, opNames: a.opNames})),\n        solidSelectionQuery: assetOpNames.map((name) => `\"${name}\"`).join(', '),\n        base: partitionSets.results.length\n          ? {\n              partitionsSetName: partitionSets.results[0].name,\n              partitionName: null,\n              tags: [],\n            }\n          : undefined,\n      },\n    };\n  }\n  if (partitionDefinition) {\n    const upstreamAssetKeys = getUpstreamAssetKeys(assets);\n    return {\n      type: 'partitions',\n      assets,\n      jobName,\n      repoAddress,\n      upstreamAssetKeys,\n    };\n  }\n  return {\n    type: 'single-run',\n    executionParams: executionParamsForAssetJob(repoAddress, jobName, assets, []),\n  };\n}\n\nexport function getCommonJob(\n  assets: LaunchAssetExecutionAssetNodeFragment[],\n  preferredJobName?: string,\n) {\n  const everyAssetHasJob = (jobName: string) => assets.every((a) => a.jobNames.includes(jobName));\n  const jobsInCommon = assets[0] ? assets[0].jobNames.filter(everyAssetHasJob) : [];\n  return jobsInCommon.find((name) => name === preferredJobName) || jobsInCommon[0] || null;\n}\n\nfunction getUpstreamAssetKeys(assets: LaunchAssetExecutionAssetNodeFragment[]) {\n  const assetKeys = new Set(assets.map((a) => JSON.stringify({path: a.assetKey.path})));\n  return uniq(assets.flatMap((a) => a.dependencyKeys.map(({path}) => JSON.stringify({path}))))\n    .filter((key) => !assetKeys.has(key))\n    .map((key) => JSON.parse(key));\n}\n\nasync function upstreamAssetsWithNoMaterializations(\n  client: ApolloClient<any>,\n  assets: LaunchAssetExecutionAssetNodeFragment[],\n) {\n  const upstreamAssetKeys = getUpstreamAssetKeys(assets);\n  if (upstreamAssetKeys.length === 0) {\n    return [];\n  }\n\n  const result = await client.query<\n    LaunchAssetCheckUpstreamQuery,\n    LaunchAssetCheckUpstreamQueryVariables\n  >({\n    query: LAUNCH_ASSET_CHECK_UPSTREAM_QUERY,\n    variables: {assetKeys: upstreamAssetKeys},\n  });\n\n  return result.data.assetNodes\n    .filter((a) => !a.isSource && a.assetMaterializations.length === 0)\n    .map((a) => a.assetKey);\n}\n\nexport function executionParamsForAssetJob(\n  repoAddress: RepoAddress,\n  jobName: string,\n  assets: {assetKey: AssetKey; opNames: string[]}[],\n  tags: {key: string; value: string}[],\n): LaunchPipelineExecutionMutationVariables['executionParams'] {\n  return {\n    mode: 'default',\n    executionMetadata: {\n      tags: [\n        ...tags.map((t) => pick(t, ['key', 'value'])),\n        {\n          key: DagsterTag.StepSelection,\n          value: assets.flatMap((o) => o.opNames).join(','),\n        },\n      ],\n    },\n    runConfigData: '{}',\n    selector: {\n      repositoryLocationName: repoAddress.location,\n      repositoryName: repoAddress.name,\n      pipelineName: jobName,\n      assetSelection: assets.map((asset) => ({\n        path: asset.assetKey.path,\n      })),\n    },\n  };\n}\n\nexport function buildAssetCollisionsAlert(data: LaunchAssetLoaderQuery) {\n  return {\n    title: MULTIPLE_DEFINITIONS_WARNING,\n    body: (\n      <div style={{overflow: 'auto'}}>\n        One or more of the selected assets are defined in multiple code locations. Rename these\n        assets to avoid collisions and then try again.\n        <ul>\n          {data.assetNodeDefinitionCollisions.map((collision, idx) => (\n            <li key={idx}>\n              <strong>{displayNameForAssetKey(collision.assetKey)}</strong>\n              <ul>\n                {collision.repositories.map((r, ridx) => (\n                  <li key={ridx}>\n                    {repoAddressAsHumanString({name: r.name, location: r.location.name})}\n                  </li>\n                ))}\n              </ul>\n            </li>\n          ))}\n        </ul>\n      </div>\n    ),\n  };\n}\n\nexport const LAUNCH_ASSET_EXECUTION_ASSET_NODE_FRAGMENT = gql`\n  fragment LaunchAssetExecutionAssetNodeFragment on AssetNode {\n    id\n    opNames\n    jobNames\n    graphName\n    partitionDefinition {\n      ...PartitionDefinitionForLaunchAsset\n    }\n    isObservable\n    isSource\n    assetKey {\n      path\n    }\n    dependencyKeys {\n      path\n    }\n    repository {\n      id\n      name\n      location {\n        id\n        name\n      }\n    }\n    requiredResources {\n      resourceKey\n    }\n    ...AssetNodeConfigFragment\n  }\n\n  fragment PartitionDefinitionForLaunchAsset on PartitionDefinition {\n    description\n    dimensionTypes {\n      name\n    }\n  }\n\n  ${ASSET_NODE_CONFIG_FRAGMENT}\n`;\n\nexport const LAUNCH_ASSET_LOADER_QUERY = gql`\n  query LaunchAssetLoaderQuery($assetKeys: [AssetKeyInput!]!) {\n    assetNodes(assetKeys: $assetKeys) {\n      id\n      ...LaunchAssetExecutionAssetNodeFragment\n    }\n    assetNodeDefinitionCollisions(assetKeys: $assetKeys) {\n      assetKey {\n        path\n      }\n      repositories {\n        id\n        name\n        location {\n          id\n          name\n        }\n      }\n    }\n  }\n\n  ${LAUNCH_ASSET_EXECUTION_ASSET_NODE_FRAGMENT}\n`;\n\nconst LAUNCH_ASSET_LOADER_RESOURCE_QUERY = gql`\n  query LaunchAssetLoaderResourceQuery(\n    $pipelineName: String!\n    $repositoryLocationName: String!\n    $repositoryName: String!\n  ) {\n    partitionSetsOrError(\n      pipelineName: $pipelineName\n      repositorySelector: {\n        repositoryName: $repositoryName\n        repositoryLocationName: $repositoryLocationName\n      }\n    ) {\n      ... on PythonError {\n        message\n      }\n      ... on PipelineNotFoundError {\n        message\n      }\n      ... on PartitionSets {\n        results {\n          id\n          name\n        }\n      }\n    }\n\n    pipelineOrError(\n      params: {\n        pipelineName: $pipelineName\n        repositoryName: $repositoryName\n        repositoryLocationName: $repositoryLocationName\n      }\n    ) {\n      ... on PythonError {\n        message\n      }\n      ... on InvalidSubsetError {\n        message\n      }\n      ... on PipelineNotFoundError {\n        message\n      }\n      ... on Pipeline {\n        id\n        modes {\n          id\n          resources {\n            name\n            description\n            configField {\n              name\n              isRequired\n              configType {\n                ...ConfigTypeSchemaFragment\n                recursiveConfigTypes {\n                  ...ConfigTypeSchemaFragment\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n\n  ${CONFIG_TYPE_SCHEMA_FRAGMENT}\n`;\n\nconst LAUNCH_ASSET_CHECK_UPSTREAM_QUERY = gql`\n  query LaunchAssetCheckUpstreamQuery($assetKeys: [AssetKeyInput!]!) {\n    assetNodes(assetKeys: $assetKeys, loadMaterializations: true) {\n      id\n      assetKey {\n        path\n      }\n      isSource\n      opNames\n      graphName\n      assetMaterializations(limit: 1) {\n        runId\n      }\n    }\n  }\n`;\n","import {PartitionState} from '../partitions/PartitionStatus';\n\nimport {\n  PartitionHealthData,\n  PartitionHealthDimension,\n  PartitionDimensionSelection,\n} from './usePartitionHealthData';\n\nexport function isTimeseriesDimension(dimension: PartitionHealthDimension) {\n  return isTimeseriesPartition(dimension.partitionKeys[0]);\n}\nexport function isTimeseriesPartition(aPartitionKey = '') {\n  return /\\d{4}-\\d{2}-\\d{2}/.test(aPartitionKey); // cheak trick for now\n}\n\nexport function mergedAssetHealth(\n  assetHealth: PartitionHealthData[],\n): {\n  dimensions: PartitionHealthDimension[];\n  stateForKey: (dimensionKeys: string[]) => PartitionState;\n  stateForSingleDimension: (\n    dimensionIdx: number,\n    dimensionKey: string,\n    otherDimensionSelectedKeys?: string[],\n  ) => PartitionState;\n} {\n  if (!assetHealth.length) {\n    return {\n      dimensions: [],\n      stateForKey: () => PartitionState.MISSING,\n      stateForSingleDimension: () => PartitionState.MISSING,\n    };\n  }\n\n  const dimensions = assetHealth[0].dimensions;\n\n  if (!assetHealth.every((h) => h.dimensions.length === dimensions.length)) {\n    throw new Error('Attempting to show unified asset health for assets with different dimensions');\n  }\n\n  if (\n    !assetHealth.every((h) =>\n      h.dimensions.every(\n        (dim, idx) => dim.partitionKeys.length === dimensions[idx].partitionKeys.length,\n      ),\n    )\n  ) {\n    throw new Error(\n      'Attempting to show unified asset health for assets with dimension of different lengths',\n    );\n  }\n\n  return {\n    dimensions: dimensions.map((dimension) => ({\n      name: dimension.name,\n      partitionKeys: dimension.partitionKeys,\n    })),\n    stateForKey: (dimensionKeys: string[]) =>\n      mergedStates(assetHealth.map((health) => health.stateForKey(dimensionKeys))),\n    stateForSingleDimension: (\n      dimensionIdx: number,\n      dimensionKey: string,\n      otherDimensionSelectedKeys?: string[],\n    ) =>\n      mergedStates(\n        assetHealth.map((health) =>\n          health.stateForSingleDimension(dimensionIdx, dimensionKey, otherDimensionSelectedKeys),\n        ),\n      ),\n  };\n}\n\nexport function mergedStates(states: PartitionState[]): PartitionState {\n  if (states.includes(PartitionState.MISSING) && states.includes(PartitionState.SUCCESS)) {\n    return PartitionState.SUCCESS_MISSING;\n  } else {\n    return states[0];\n  }\n}\n\nexport function explodePartitionKeysInSelection(\n  selections: PartitionDimensionSelection[],\n  stateForKey: (dimensionKeys: string[]) => PartitionState,\n) {\n  if (selections.length === 0) {\n    return [];\n  }\n  if (selections.length === 1) {\n    return selections[0].selectedKeys.map((key) => {\n      return {\n        partitionKey: key,\n        state: stateForKey([key]),\n      };\n    });\n  }\n  if (selections.length === 2) {\n    const all: {partitionKey: string; state: PartitionState}[] = [];\n    for (const key of selections[0].selectedKeys) {\n      for (const subkey of selections[1].selectedKeys) {\n        all.push({\n          partitionKey: `${key}|${subkey}`,\n          state: stateForKey([key, subkey]),\n        });\n      }\n    }\n    return all;\n  }\n\n  throw new Error('Unsupported >2 partitions defined');\n}\n\nexport const placeholderDimensionSelection = (name: string): PartitionDimensionSelection => ({\n  dimension: {name, partitionKeys: []},\n  selectedKeys: [],\n  selectedRanges: [],\n});\n","import {Spinner, Box, Colors, Caption} from '@dagster-io/ui';\nimport React from 'react';\n\nimport {displayNameForAssetKey} from '../asset-graph/Utils';\nimport {PartitionState, PartitionStatus} from '../partitions/PartitionStatus';\n\nimport {isTimeseriesDimension} from './MultipartitioningSupport';\nimport {AssetKey} from './types';\nimport {PartitionHealthData, PartitionDimensionSelection} from './usePartitionHealthData';\n\nexport const PartitionHealthSummary: React.FC<{\n  assetKey: AssetKey;\n  showAssetKey?: boolean;\n  data: PartitionHealthData[];\n  selections?: PartitionDimensionSelection[];\n}> = ({showAssetKey, assetKey, data, selections}) => {\n  const assetData = data.find((d) => JSON.stringify(d.assetKey) === JSON.stringify(assetKey));\n\n  if (!assetData) {\n    return (\n      <div style={{minHeight: 55, position: 'relative'}}>\n        <Spinner purpose=\"section\" />\n      </div>\n    );\n  }\n\n  const keysForTotals = selections\n    ? selections.map((r) => r.selectedKeys)\n    : assetData.dimensions.map((d) => d.partitionKeys);\n\n  const total = keysForTotals.reduce((total, d) => d.length * total, 1);\n\n  const success = keysForTotals\n    .reduce(\n      (combinations, d) =>\n        combinations.length\n          ? combinations.flatMap((keys) => d.map((key) => [...keys, key]))\n          : d.map((key) => [key]),\n      [] as string[][],\n    )\n    .filter((dkeys) => assetData.stateForKey(dkeys) === PartitionState.SUCCESS).length;\n\n  return (\n    <Box color={Colors.Gray500}>\n      <Box flex={{justifyContent: 'space-between'}} style={{fontWeight: 600}} margin={{bottom: 4}}>\n        <Caption>{showAssetKey ? displayNameForAssetKey(assetKey) : 'Materialized'}</Caption>\n        <Caption>{`${success.toLocaleString()}/${total.toLocaleString()}`}</Caption>\n      </Box>\n      {assetData.dimensions.map((dimension, dimensionIdx) => (\n        <Box key={dimensionIdx} margin={{bottom: 4}}>\n          {assetData.dimensions.length > 1 && <Caption>{dimension.name}</Caption>}\n          <PartitionStatus\n            small\n            partitionNames={dimension.partitionKeys}\n            splitPartitions={!isTimeseriesDimension(dimension)}\n            selected={selections ? selections[dimensionIdx].selectedKeys : undefined}\n            partitionStateForKey={(key) =>\n              assetData.stateForSingleDimension(\n                dimensionIdx,\n                key,\n                selections?.length === 2 ? selections[1 - dimensionIdx].selectedKeys : undefined,\n              )\n            }\n          />\n        </Box>\n      ))}\n    </Box>\n  );\n};\n","import {Colors, Box, BaseTag} from '@dagster-io/ui';\nimport React from 'react';\n\nimport {LiveDataForNode} from '../asset-graph/Utils';\n\nexport const isAssetMissing = (liveData?: LiveDataForNode) =>\n  liveData && liveData.currentLogicalVersion === null;\n\n/* Note: \n- `projectedLogicalVersion` is null for partitioned assets\n- `currentLogicalVersion` is null for assets that have never materialized\n- `currentLogicalVersion` is INITIAL for source assets that have never been\n  observed and for assets materialized before the launch of this feature (edited) \n*/\nexport const isAssetStale = (liveData?: LiveDataForNode) =>\n  liveData &&\n  liveData.projectedLogicalVersion &&\n  liveData.currentLogicalVersion !== null &&\n  liveData.currentLogicalVersion !== 'INITIAL' &&\n  liveData.currentLogicalVersion !== liveData.projectedLogicalVersion;\n\nexport const StaleTag: React.FC<{liveData?: LiveDataForNode; onClick?: () => void}> = ({\n  liveData,\n  onClick,\n}) =>\n  isAssetStale(liveData) ? (\n    <Box onClick={onClick}>\n      <BaseTag\n        fillColor={Colors.Yellow50}\n        textColor={Colors.Yellow700}\n        label=\"Stale\"\n        interactive={!!onClick}\n      />\n    </Box>\n  ) : null;\n","import groupBy from 'lodash/groupBy';\nimport React from 'react';\n\nimport {\n  AssetMaterializationFragment,\n  AssetObservationFragment,\n} from './types/useRecentAssetEvents.types';\n\nconst NO_PARTITION_KEY = '__NO_PARTITION__';\n\ntype Event = AssetMaterializationFragment | AssetObservationFragment;\n\nexport type AssetEventGroup = {\n  latest: Event | null;\n  all: Event[];\n  timestamp: string;\n  partition?: string;\n};\n\nconst sortByEventTimestamp = (a: Event, b: Event) => Number(b?.timestamp) - Number(a?.timestamp);\n\n/**\n * A hook that can bucket a list of materializations by partition, if any, with the `latest`\n * materialization separated from predecessor materializations.\n */\nexport const groupByPartition = (\n  events: Event[],\n  definedPartitionKeys: string[],\n): AssetEventGroup[] => {\n  const grouped = groupBy(events, (m) => m.partition || NO_PARTITION_KEY);\n  const orderedPartitionKeys = [...definedPartitionKeys].reverse();\n\n  if (NO_PARTITION_KEY in grouped) {\n    orderedPartitionKeys.push(NO_PARTITION_KEY);\n  }\n\n  return orderedPartitionKeys\n    .filter((key) => key !== NO_PARTITION_KEY)\n    .map((key) => {\n      const sorted = [...(grouped[key] || [])].sort(sortByEventTimestamp);\n      const latestMaterialization = sorted.find((a) => a.__typename === 'MaterializationEvent');\n      const latest = latestMaterialization || sorted[0] || null;\n\n      return {\n        all: sorted,\n        latest,\n        timestamp: latest?.timestamp,\n        partition: key,\n      };\n    });\n};\n\nexport function useGroupedEvents(\n  xAxis: 'partition' | 'time',\n  materializations: Event[],\n  observations: Event[],\n  loadedPartitionKeys: string[] | undefined,\n) {\n  return React.useMemo<AssetEventGroup[]>(() => {\n    const events = [...materializations, ...observations].sort(\n      (b, a) => Number(a.timestamp) - Number(b.timestamp),\n    );\n    if (xAxis === 'partition' && loadedPartitionKeys) {\n      return groupByPartition(events, loadedPartitionKeys);\n    } else {\n      // return a group for every materialization to achieve un-grouped rendering\n      return events.map((event) => ({\n        latest: event,\n        partition: event.partition || undefined,\n        timestamp: event.timestamp,\n        all: [],\n      }));\n    }\n  }, [loadedPartitionKeys, materializations, observations, xAxis]);\n}\n","import React from 'react';\n\nimport {QueryPersistedStateConfig, useQueryPersistedState} from '../hooks/useQueryPersistedState';\nimport {\n  allPartitionsSpan,\n  partitionsToText,\n  allPartitionsRange,\n  spanTextToSelections,\n} from '../partitions/SpanRepresentation';\n\nimport {placeholderDimensionSelection} from './MultipartitioningSupport';\nimport {PartitionHealthData, PartitionDimensionSelection} from './usePartitionHealthData';\n\ntype DimensionQueryState = {\n  name: string;\n  rangeText: string | undefined;\n};\n\nconst serializer: QueryPersistedStateConfig<DimensionQueryState[]> = {\n  defaults: {},\n  encode: (state) => Object.fromEntries(state.map((s) => [`${s.name}_range`, s.rangeText])),\n  decode: (qs) =>\n    Object.entries(qs)\n      .filter(([key]) => key.endsWith('_range'))\n      .map(([key, rangeText]) => ({name: key.replace(/_range$/, ''), rangeText})),\n};\n\n/**\n * This hook behaves like useState and manages the user's selected partition key\n * ranges on each partition dimension.\n *\n * Internally, this hook reads initial state from the query string and (optionally)\n * writes changes back to the query string using the compacted \"spans\" format.\n */\nexport const usePartitionDimensionSelections = (opts: {\n  assetHealth: Pick<PartitionHealthData, 'dimensions'>;\n  modifyQueryString: boolean;\n  knownDimensionNames?: string[]; // improves loading state if available\n}) => {\n  const {assetHealth, knownDimensionNames = [], modifyQueryString} = opts;\n  const [query, setQuery] = useQueryPersistedState<DimensionQueryState[]>(serializer);\n  const [local, setLocal] = React.useState<DimensionQueryState[]>([]);\n\n  const knownDimensionNamesJSON = JSON.stringify(knownDimensionNames);\n\n  const inflated = React.useMemo((): PartitionDimensionSelection[] => {\n    if (!assetHealth || !assetHealth.dimensions.length) {\n      return JSON.parse(knownDimensionNamesJSON).map(placeholderDimensionSelection);\n    }\n    return assetHealth.dimensions.map((dimension) => {\n      const saved =\n        local.find((s) => s.name === dimension.name) ||\n        query.find((s) => s.name === dimension.name);\n\n      // Note: It's valid for the user to clear the range to \"\", so it's\n      // important that we persist \"\" and specifically check for `undefined`\n      // when filling in the default value (all keys)\n      return saved?.rangeText !== undefined\n        ? {\n            dimension,\n            ...spanTextToSelections(dimension.partitionKeys, saved.rangeText),\n          }\n        : {\n            dimension,\n            selectedRanges: [allPartitionsRange(dimension)],\n            selectedKeys: [...dimension.partitionKeys],\n          };\n    });\n  }, [query, local, assetHealth, knownDimensionNamesJSON]);\n\n  const setInflated = React.useCallback(\n    (ranges: PartitionDimensionSelection[]) => {\n      const next = ranges.map((r) => {\n        const rangeText = partitionsToText(r.selectedKeys, r.dimension.partitionKeys);\n        return {\n          name: r.dimension.name,\n          rangeText: rangeText !== allPartitionsSpan(r.dimension) ? rangeText : undefined,\n        };\n      });\n      if (modifyQueryString) {\n        setQuery(next);\n      } else {\n        setLocal(next);\n      }\n    },\n    [setQuery, modifyQueryString],\n  );\n\n  return [inflated, setInflated] as const;\n};\n","import {gql, useApolloClient} from '@apollo/client';\nimport isEqual from 'lodash/isEqual';\nimport React from 'react';\n\nimport {assertUnreachable} from '../app/Util';\nimport {PartitionState} from '../partitions/PartitionStatus';\n\nimport {mergedStates} from './MultipartitioningSupport';\nimport {AssetKey} from './types';\nimport {\n  PartitionHealthQuery,\n  PartitionHealthQueryVariables,\n} from './types/usePartitionHealthData.types';\n\ntype PartitionHealthMaterializedPartitions = Extract<\n  PartitionHealthQuery['assetNodeOrError'],\n  {__typename: 'AssetNode'}\n>['materializedPartitions'];\n/**\n * usePartitionHealthData retrieves partitionKeysByDimension + partitionMaterializationCounts and\n * reshapes the data for rapid retrieval from the UI. The hook exposes a series of getter methods\n * for each asset's data, hiding the underlying data structures from the rest of the app.\n *\n * The hope is that if we want to add support for 3- and 4- dimension partitioned assets, all\n * of the changes will be in this file. The rest of the app already supports N dimensions.\n */\n\nexport interface PartitionHealthData {\n  assetKey: AssetKey;\n  dimensions: PartitionHealthDimension[];\n  stateForKey: (dimensionKeys: string[]) => PartitionState;\n  stateForSingleDimension: (\n    dimensionIdx: number,\n    dimensionKey: string,\n    otherDimensionSelectedKeys?: string[],\n  ) => PartitionState;\n}\n\nexport interface PartitionHealthDimension {\n  name: string;\n  partitionKeys: string[];\n}\n\nexport type PartitionDimensionSelectionRange = [\n  {idx: number; key: string},\n  {idx: number; key: string},\n];\n\nexport type PartitionDimensionSelection = {\n  dimension: PartitionHealthDimension;\n  selectedKeys: string[];\n  selectedRanges: PartitionDimensionSelectionRange[];\n};\n\nexport function buildPartitionHealthData(data: PartitionHealthQuery, loadKey: AssetKey) {\n  const __dims =\n    data.assetNodeOrError.__typename === 'AssetNode'\n      ? data.assetNodeOrError.partitionKeysByDimension\n      : [];\n\n  const materializedPartitions = (data.assetNodeOrError.__typename === 'AssetNode' &&\n    data.assetNodeOrError.materializedPartitions) || {\n    __typename: 'DefaultPartitions',\n    unmaterializedPartitions: [],\n    materializedPartitions: [],\n  };\n\n  // The backend re-orders the dimensions only for the materializedPartitions ranges so that\n  // the time partition is the \"primary\" one, even if it's dimension[1] elsewhere.\n  // This matches the way we display them in the UI and makes some common data retrieval faster,\n  // but Dagit's internals always use the REAL ordering of the partition keys, we need to flip\n  // everything in this function to match the range data.\n  const isRangeDataInverted =\n    __dims.length === 2 &&\n    materializedPartitions.__typename === 'MultiPartitions' &&\n    materializedPartitions.primaryDimensionName !== __dims[0].name;\n\n  const dimensions = isRangeDataInverted ? [__dims[1], __dims[0]] : __dims;\n  const ranges = addKeyIndexesToMaterializedRanges(dimensions, materializedPartitions);\n  const stateForKey = (dimensionKeys: string[]): PartitionState => {\n    return stateForKeyWithRangeOrdering(\n      isRangeDataInverted ? dimensionKeys.reverse() : dimensionKeys,\n    );\n  };\n\n  const stateForKeyWithRangeOrdering = (dimensionKeys: string[]): PartitionState => {\n    if (dimensionKeys.length !== dimensions.length) {\n      console.warn('[stateForKey] called with incorrect number of dimensions');\n      return PartitionState.MISSING;\n    }\n\n    const dIndexes = dimensionKeys.map((key, idx) => dimensions[idx].partitionKeys.indexOf(key));\n    const d0Range = ranges.find((r) => r.start.idx <= dIndexes[0] && r.end.idx >= dIndexes[0]);\n\n    if (!d0Range) {\n      return PartitionState.MISSING;\n    }\n    if (!d0Range.subranges) {\n      return PartitionState.SUCCESS; // 1D case\n    }\n    const d1Range = d0Range.subranges.find(\n      (r) => r.start.idx <= dIndexes[1] && r.end.idx >= dIndexes[1],\n    );\n    return d1Range ? PartitionState.SUCCESS : PartitionState.MISSING;\n  };\n\n  const stateForSingleDimension = (\n    dimensionIdx: number,\n    dimensionKey: string,\n    otherDimensionSelectedKeys?: string[], // using this feature is slow\n  ) => {\n    if (dimensions.length === 0) {\n      return PartitionState.MISSING;\n    }\n    if (dimensionIdx === 0 && dimensions.length === 1) {\n      return stateForKeyWithRangeOrdering([dimensionKey]);\n    }\n\n    const [d0, d1] = dimensions;\n    if (isRangeDataInverted) {\n      dimensionIdx = 1 - dimensionIdx;\n    }\n\n    if (dimensionIdx === 0) {\n      if (otherDimensionSelectedKeys) {\n        return mergedStates(\n          otherDimensionSelectedKeys.map((k) => stateForKeyWithRangeOrdering([dimensionKey, k])),\n        );\n      }\n      const d0Idx = d0.partitionKeys.indexOf(dimensionKey);\n      const d0Range = ranges.find((r) => r.start.idx <= d0Idx && r.end.idx >= d0Idx);\n      return d0Range?.value || PartitionState.MISSING;\n    }\n    if (dimensionIdx === 1) {\n      if (otherDimensionSelectedKeys) {\n        return mergedStates(\n          otherDimensionSelectedKeys.map((k) => stateForKeyWithRangeOrdering([k, dimensionKey])),\n        );\n      }\n\n      const d1Idx = d1.partitionKeys.indexOf(dimensionKey);\n      const d0RangesContainingSubrangeWithD1Idx = ranges.filter((r) =>\n        r.subranges?.some((sr) => sr.start.idx <= d1Idx && sr.end.idx >= d1Idx),\n      );\n      if (d0RangesContainingSubrangeWithD1Idx.length === 0) {\n        return PartitionState.MISSING;\n      }\n      if (d0RangesContainingSubrangeWithD1Idx.length < ranges.length) {\n        return PartitionState.SUCCESS_MISSING;\n      }\n      return rangesCoverAll(d0RangesContainingSubrangeWithD1Idx, d0.partitionKeys.length)\n        ? PartitionState.SUCCESS\n        : PartitionState.SUCCESS_MISSING;\n    }\n\n    throw new Error('stateForSingleDimension asked for third dimension');\n  };\n\n  const result: PartitionHealthData = {\n    assetKey: loadKey,\n    dimensions: __dims.map((d) => ({name: d.name, partitionKeys: d.partitionKeys})),\n    stateForKey,\n    stateForSingleDimension,\n  };\n\n  return result;\n}\n\n// Add indexes to the materializedPartitions data so that we can find specific keys in\n// the range structures without having to indexOf the start and end key of every range.\n//\ntype Range = {\n  start: {key: string; idx: number};\n  end: {key: string; idx: number};\n  value: PartitionState.SUCCESS | PartitionState.SUCCESS_MISSING;\n  subranges?: Range[];\n};\n\nfunction addKeyIndexesToMaterializedRanges(\n  dimensions: {name: string; partitionKeys: string[]}[],\n  materializedPartitions: PartitionHealthMaterializedPartitions,\n) {\n  const result: Range[] = [];\n  if (dimensions.length === 0) {\n    return result;\n  }\n  if (materializedPartitions.__typename === 'DefaultPartitions') {\n    const dim = dimensions[0];\n    const count = dim.partitionKeys.length;\n    if (materializedPartitions.materializedPartitions.length === count) {\n      return [\n        {\n          start: {key: dim.partitionKeys[0], idx: 0},\n          end: {key: dim.partitionKeys[count - 1], idx: count - 1},\n          value: PartitionState.SUCCESS as const,\n        },\n      ];\n    } else {\n      return materializedPartitions.materializedPartitions.map<Range>((key) => {\n        const idx = dim.partitionKeys.indexOf(key);\n        return {start: {key, idx}, end: {key, idx}, value: PartitionState.SUCCESS};\n      });\n    }\n  }\n\n  for (const range of materializedPartitions.ranges) {\n    if (range.__typename === 'TimePartitionRange') {\n      result.push({\n        value: PartitionState.SUCCESS,\n        start: {key: range.startKey, idx: dimensions[0].partitionKeys.indexOf(range.startKey)},\n        end: {key: range.endKey, idx: dimensions[0].partitionKeys.indexOf(range.endKey)},\n      });\n    } else if (range.__typename === 'MaterializedPartitionRange2D') {\n      if (dimensions.length !== 2) {\n        console.warn('[addKeyIndexesToMaterializedRanges] Found 2D health data for 1D asset');\n        return result;\n      }\n      const [dim0, dim1] = dimensions;\n      const subranges: Range[] = addKeyIndexesToMaterializedRanges([dim1], range.secondaryDim);\n      const subrangeIsAll = rangesCoverAll(subranges, dim1.partitionKeys.length);\n\n      result.push({\n        value: subrangeIsAll ? PartitionState.SUCCESS : PartitionState.SUCCESS_MISSING,\n        subranges,\n        start: {\n          key: range.primaryDimStartKey,\n          idx: dim0.partitionKeys.indexOf(range.primaryDimStartKey),\n        },\n        end: {\n          key: range.primaryDimEndKey,\n          idx: dim0.partitionKeys.indexOf(range.primaryDimEndKey),\n        },\n      });\n    } else {\n      assertUnreachable(range);\n    }\n  }\n\n  return result;\n}\n\nfunction rangesCoverAll(ranges: Range[], keyCount: number) {\n  let last = 0;\n  for (const range of ranges) {\n    if (range.start.idx !== last) {\n      return false;\n    }\n    last = range.end.idx + 1;\n  }\n  return last === keyCount;\n}\n// Note: assetLastMaterializedAt is used as a \"hint\" - if the input value changes, it's\n// a sign that we should invalidate and reload previously loaded health stats. We don't\n// clear them immediately to avoid an empty state.\n\nexport function usePartitionHealthData(assetKeys: AssetKey[], assetLastMaterializedAt = '') {\n  const [result, setResult] = React.useState<(PartitionHealthData & {fetchedAt: string})[]>([]);\n  const client = useApolloClient();\n\n  const assetKeyJSONs = assetKeys.map((k) => JSON.stringify(k));\n  const assetKeyJSON = JSON.stringify(assetKeyJSONs);\n  const missingKeyJSON = assetKeyJSONs.find(\n    (k) =>\n      !result.some(\n        (r) => JSON.stringify(r.assetKey) === k && r.fetchedAt === assetLastMaterializedAt,\n      ),\n  );\n\n  React.useMemo(() => {\n    if (!missingKeyJSON) {\n      return;\n    }\n    const loadKey: AssetKey = JSON.parse(missingKeyJSON);\n    const run = async () => {\n      const {data} = await client.query<PartitionHealthQuery, PartitionHealthQueryVariables>({\n        query: PARTITION_HEALTH_QUERY,\n        fetchPolicy: 'network-only',\n        variables: {\n          assetKey: {path: loadKey.path},\n        },\n      });\n      const loaded = buildPartitionHealthData(data, loadKey);\n      setResult((result) => [\n        ...result.filter((r) => !isEqual(r.assetKey, loadKey)),\n        {...loaded, fetchedAt: assetLastMaterializedAt},\n      ]);\n    };\n    run();\n  }, [client, missingKeyJSON, assetLastMaterializedAt]);\n\n  return React.useMemo(() => {\n    const assetKeyJSONs = JSON.parse(assetKeyJSON);\n    return result.filter((r) => assetKeyJSONs.includes(JSON.stringify(r.assetKey)));\n  }, [assetKeyJSON, result]);\n}\n\nexport const PARTITION_HEALTH_QUERY = gql`\n  query PartitionHealthQuery($assetKey: AssetKeyInput!) {\n    assetNodeOrError(assetKey: $assetKey) {\n      ... on AssetNode {\n        id\n        partitionKeysByDimension {\n          name\n          partitionKeys\n        }\n        materializedPartitions {\n          ... on TimePartitions {\n            ranges {\n              startTime\n              endTime\n              startKey\n              endKey\n            }\n          }\n          ... on DefaultPartitions {\n            materializedPartitions\n          }\n          ... on MultiPartitions {\n            primaryDimensionName\n            ranges {\n              primaryDimStartKey\n              primaryDimEndKey\n              primaryDimStartTime\n              primaryDimEndTime\n              secondaryDim {\n                ... on TimePartitions {\n                  ranges {\n                    startTime\n                    endTime\n                    startKey\n                    endKey\n                  }\n                }\n                ... on DefaultPartitions {\n                  materializedPartitions\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n`;\n","import {gql, useQuery} from '@apollo/client';\nimport React from 'react';\n\nimport {PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorFragment';\nimport {RepoAddress} from '../workspace/types';\n\nimport {\n  AssetJobPartitionSetsQuery,\n  AssetJobPartitionSetsQueryVariables,\n} from './types/usePartitionNameForPipeline.types';\n\nexport function usePartitionNameForPipeline(repoAddress: RepoAddress, pipelineName: string) {\n  const {data: partitionSetsData} = useQuery<\n    AssetJobPartitionSetsQuery,\n    AssetJobPartitionSetsQueryVariables\n  >(ASSET_JOB_PARTITION_SETS_QUERY, {\n    variables: {\n      repositoryLocationName: repoAddress.location,\n      repositoryName: repoAddress.name,\n      pipelineName,\n    },\n  });\n\n  return React.useMemo(\n    () => ({\n      partitionSet:\n        partitionSetsData?.partitionSetsOrError.__typename === 'PartitionSets'\n          ? partitionSetsData.partitionSetsOrError.results[0]\n          : undefined,\n      partitionSetError:\n        partitionSetsData?.partitionSetsOrError.__typename === 'PipelineNotFoundError' ||\n        partitionSetsData?.partitionSetsOrError.__typename === 'PythonError'\n          ? partitionSetsData.partitionSetsOrError\n          : undefined,\n    }),\n    [partitionSetsData],\n  );\n}\n\nconst ASSET_JOB_PARTITION_SETS_QUERY = gql`\n  query AssetJobPartitionSetsQuery(\n    $pipelineName: String!\n    $repositoryName: String!\n    $repositoryLocationName: String!\n  ) {\n    partitionSetsOrError(\n      pipelineName: $pipelineName\n      repositorySelector: {\n        repositoryName: $repositoryName\n        repositoryLocationName: $repositoryLocationName\n      }\n    ) {\n      __typename\n      ... on PipelineNotFoundError {\n        __typename\n        message\n      }\n      ... on PartitionSets {\n        __typename\n        results {\n          id\n          name\n          mode\n          solidSelection\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ${PYTHON_ERROR_FRAGMENT}\n`;\n","import {gql, useQuery} from '@apollo/client';\nimport uniq from 'lodash/uniq';\nimport * as React from 'react';\n\nimport {METADATA_ENTRY_FRAGMENT} from '../metadata/MetadataEntry';\n\nimport {ASSET_LINEAGE_FRAGMENT} from './AssetLineageElements';\nimport {AssetViewParams} from './AssetView';\nimport {AssetKey} from './types';\nimport {AssetEventsQuery, AssetEventsQueryVariables} from './types/useRecentAssetEvents.types';\n\n/**\n * If the asset has a defined partition space, we load all materializations in the\n * last 100 partitions. This ensures that if you run a huge backfill of old partitions,\n * you still see accurate info for the last 100 partitions in the UI. A count-based\n * limit could cause random partitions to disappear if materializations were out of order.\n */\nexport function useRecentAssetEvents(\n  assetKey: AssetKey,\n  params: AssetViewParams,\n  {assetHasDefinedPartitions}: {assetHasDefinedPartitions: boolean},\n) {\n  // The params behavior on this page is a bit nuanced - there are two main query\n  // params: ?timestamp= and ?partition= and only one is set at a time. They can\n  // be undefined, an empty string or a value and all three states are used.\n  //\n  // - If both are undefined, we expand the first item in the table by default\n  // - If one is present, it determines which xAxis is used (partition grouping)\n  // - If one is present and set to a value, that item in the table is expanded.\n  // - If one is present but an empty string, no items in the table is expanded.\n\n  const before = params.asOf ? `${Number(params.asOf) + 1}` : undefined;\n  const xAxisDefault = assetHasDefinedPartitions ? 'partition' : 'time';\n  const xAxis: 'partition' | 'time' =\n    params.partition !== undefined\n      ? 'partition'\n      : params.time !== undefined || before\n      ? 'time'\n      : xAxisDefault;\n\n  const loadUsingPartitionKeys = assetHasDefinedPartitions && xAxis === 'partition';\n\n  const {data, loading, refetch} = useQuery<AssetEventsQuery, AssetEventsQueryVariables>(\n    ASSET_EVENTS_QUERY,\n    {\n      variables: loadUsingPartitionKeys\n        ? {\n            assetKey: {path: assetKey.path},\n            before,\n            partitionInLast: 120,\n          }\n        : {\n            assetKey: {path: assetKey.path},\n            before,\n            limit: 100,\n          },\n    },\n  );\n\n  return React.useMemo(() => {\n    const asset = data?.assetOrError.__typename === 'Asset' ? data?.assetOrError : null;\n    const materializations = asset?.assetMaterializations || [];\n    const observations = asset?.assetObservations || [];\n\n    const allPartitionKeys = asset?.definition?.partitionKeys;\n    const loadedPartitionKeys =\n      loadUsingPartitionKeys && allPartitionKeys\n        ? allPartitionKeys.slice(allPartitionKeys.length - 120)\n        : uniq(\n            [...materializations, ...observations].map((p) => p.partition!).filter(Boolean),\n          ).sort();\n\n    return {\n      asset,\n      loadedPartitionKeys,\n      materializations,\n      observations,\n      loading,\n      refetch,\n      xAxis,\n    };\n  }, [data, loading, refetch, loadUsingPartitionKeys, xAxis]);\n}\n\nexport const ASSET_MATERIALIZATION_FRAGMENT = gql`\n  fragment AssetMaterializationFragment on MaterializationEvent {\n    partition\n    tags {\n      key\n      value\n    }\n    runOrError {\n      ... on PipelineRun {\n        id\n        runId\n        mode\n        repositoryOrigin {\n          id\n          repositoryName\n          repositoryLocationName\n        }\n        status\n        pipelineName\n        pipelineSnapshotId\n      }\n    }\n    runId\n    timestamp\n    stepKey\n    label\n    description\n    metadataEntries {\n      ...MetadataEntryFragment\n    }\n    assetLineage {\n      ...AssetLineageFragment\n    }\n  }\n\n  ${METADATA_ENTRY_FRAGMENT}\n  ${ASSET_LINEAGE_FRAGMENT}\n`;\n\nexport const ASSET_OBSERVATION_FRAGMENT = gql`\n  fragment AssetObservationFragment on ObservationEvent {\n    partition\n    tags {\n      key\n      value\n    }\n    runOrError {\n      ... on PipelineRun {\n        id\n        runId\n        mode\n        repositoryOrigin {\n          id\n          repositoryName\n          repositoryLocationName\n        }\n        status\n        pipelineName\n        pipelineSnapshotId\n      }\n    }\n    runId\n    timestamp\n    stepKey\n    label\n    description\n    metadataEntries {\n      ...MetadataEntryFragment\n    }\n  }\n\n  ${METADATA_ENTRY_FRAGMENT}\n`;\n\nconst ASSET_EVENTS_QUERY = gql`\n  query AssetEventsQuery(\n    $assetKey: AssetKeyInput!\n    $limit: Int\n    $before: String\n    $partitionInLast: Int\n  ) {\n    assetOrError(assetKey: $assetKey) {\n      ... on Asset {\n        id\n        key {\n          path\n        }\n        assetObservations(\n          limit: $limit\n          beforeTimestampMillis: $before\n          partitionInLast: $partitionInLast\n        ) {\n          ...AssetObservationFragment\n        }\n        assetMaterializations(\n          limit: $limit\n          beforeTimestampMillis: $before\n          partitionInLast: $partitionInLast\n        ) {\n          ...AssetMaterializationFragment\n        }\n\n        definition {\n          id\n          partitionKeys\n        }\n      }\n    }\n  }\n\n  ${ASSET_OBSERVATION_FRAGMENT}\n  ${ASSET_MATERIALIZATION_FRAGMENT}\n`;\n","import {gql, useQuery} from '@apollo/client';\n// eslint-disable-next-line no-restricted-imports\nimport {HTMLInputProps, InputGroupProps2, Intent} from '@blueprintjs/core';\nimport {\n  Box,\n  Button,\n  Colors,\n  Icon,\n  IconWrapper,\n  MenuDivider,\n  MenuItem,\n  Menu,\n  Select,\n  Spinner,\n  Suggest,\n} from '@dagster-io/ui';\nimport * as React from 'react';\nimport styled from 'styled-components/macro';\n\nimport {AppContext} from '../app/AppContext';\nimport {showCustomAlert} from '../app/CustomAlertProvider';\nimport {IExecutionSession} from '../app/ExecutionSessionStorage';\nimport {PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorFragment';\nimport {PythonErrorInfo} from '../app/PythonErrorInfo';\nimport {ShortcutHandler} from '../app/ShortcutHandler';\nimport {RepositorySelector} from '../graphql/types';\nimport {useStateWithStorage} from '../hooks/useStateWithStorage';\nimport {repoAddressAsHumanString} from '../workspace/repoAddressAsString';\nimport {repoAddressToSelector} from '../workspace/repoAddressToSelector';\nimport {RepoAddress} from '../workspace/types';\n\nimport {\n  ConfigEditorGeneratorPipelineFragment,\n  ConfigEditorPipelinePresetFragment,\n  PartitionSetForConfigEditorFragment,\n  ConfigPartitionResultFragment,\n  ConfigPartitionsQuery,\n  ConfigPartitionsQueryVariables,\n} from './types/ConfigEditorConfigPicker.types';\n\ntype Pipeline = ConfigEditorGeneratorPipelineFragment;\ntype Preset = ConfigEditorPipelinePresetFragment;\ntype PartitionSet = PartitionSetForConfigEditorFragment;\ntype Partition = ConfigPartitionResultFragment;\ntype ConfigGenerator = Preset | PartitionSet;\n\ninterface ConfigEditorConfigPickerProps {\n  base: IExecutionSession['base'];\n  pipeline: Pipeline;\n  pipelineMode?: string;\n  partitionSets: PartitionSet[];\n  onSaveSession: (updates: Partial<IExecutionSession>) => void;\n  onSelectPreset: (preset: Preset) => Promise<void>;\n  onSelectPartition: (\n    repositorySelector: RepositorySelector,\n    partitionSetName: string,\n    partitionName: string,\n  ) => Promise<void>;\n  repoAddress: RepoAddress;\n}\n\nexport const ConfigEditorConfigPicker: React.FC<ConfigEditorConfigPickerProps> = (props) => {\n  const {\n    pipeline,\n    base,\n    onSaveSession,\n    onSelectPreset,\n    onSelectPartition,\n    partitionSets,\n    repoAddress,\n  } = props;\n\n  const {isJob, presets} = pipeline;\n\n  const configGenerators: ConfigGenerator[] = React.useMemo(() => {\n    const byName = (a: {name: string}, b: {name: string}) => a.name.localeCompare(b.name);\n    return [...presets, ...partitionSets].sort(byName);\n  }, [presets, partitionSets]);\n\n  const label = () => {\n    if (!base) {\n      if (presets.length && !partitionSets.length) {\n        return 'Preset';\n      }\n      if (!presets.length && partitionSets.length) {\n        return 'Partition Set';\n      }\n      return 'Preset / Partition Set';\n    }\n\n    if ('presetName' in base) {\n      return `Preset: ${base.presetName}`;\n    }\n\n    return `Partition Set: ${base.partitionsSetName}`;\n  };\n\n  const onSelect = (item: ConfigGenerator) => {\n    if (item.__typename === 'PartitionSet') {\n      onSaveSession({\n        mode: item.mode,\n        base: {\n          partitionsSetName: item.name,\n          partitionName: null,\n          tags: base ? base.tags : null,\n        },\n      });\n    } else {\n      onSelectPreset(item);\n    }\n  };\n\n  return (\n    <PickerContainer>\n      {isJob || configGenerators.length < 1 ? null : (\n        <ConfigEditorConfigGeneratorPicker\n          label={label()}\n          configGenerators={configGenerators}\n          onSelect={onSelect}\n        />\n      )}\n      {base && 'partitionsSetName' in base ? (\n        <ConfigEditorPartitionPicker\n          pipeline={pipeline}\n          partitionSetName={base.partitionsSetName}\n          value={base.partitionName}\n          onSelect={onSelectPartition}\n          repoAddress={repoAddress}\n        />\n      ) : null}\n    </PickerContainer>\n  );\n};\n\ninterface ConfigEditorPartitionPickerProps {\n  pipeline: Pipeline;\n  partitionSetName: string;\n  value: string | null;\n  onSelect: (\n    repositorySelector: RepositorySelector,\n    partitionSetName: string,\n    partitionName: string,\n  ) => void;\n  repoAddress: RepoAddress;\n}\n\nconst SORT_ORDER_KEY_BASE = 'dagit.partition-sort-order';\ntype SortOrder = 'asc' | 'desc';\n\nconst ConfigEditorPartitionPicker: React.FC<ConfigEditorPartitionPickerProps> = React.memo(\n  (props) => {\n    const {partitionSetName, value, onSelect, repoAddress} = props;\n    const {basePath} = React.useContext(AppContext);\n    const repositorySelector = repoAddressToSelector(repoAddress);\n    const {data, loading} = useQuery<ConfigPartitionsQuery, ConfigPartitionsQueryVariables>(\n      CONFIG_PARTITIONS_QUERY,\n      {\n        variables: {repositorySelector, partitionSetName},\n        fetchPolicy: 'network-only',\n      },\n    );\n\n    const sortOrderKey = `${SORT_ORDER_KEY_BASE}-${basePath}-${repoAddressAsHumanString(\n      repoAddress,\n    )}-${partitionSetName}`;\n\n    const [sortOrder, setSortOrder] = useStateWithStorage<SortOrder>(sortOrderKey, (value: any) =>\n      value === undefined ? 'asc' : value,\n    );\n\n    const partitions: Partition[] = React.useMemo(() => {\n      const retrieved =\n        data?.partitionSetOrError.__typename === 'PartitionSet' &&\n        data?.partitionSetOrError.partitionsOrError.__typename === 'Partitions'\n          ? data.partitionSetOrError.partitionsOrError.results\n          : [];\n      return sortOrder === 'asc' ? retrieved : [...retrieved].reverse();\n    }, [data, sortOrder]);\n\n    const error =\n      data?.partitionSetOrError.__typename === 'PartitionSet' &&\n      data?.partitionSetOrError.partitionsOrError.__typename !== 'Partitions'\n        ? data.partitionSetOrError.partitionsOrError\n        : null;\n\n    const selected = partitions.find((p) => p.name === value);\n\n    const onClickSort = React.useCallback(\n      (event) => {\n        event.preventDefault();\n        setSortOrder((order) => (order === 'asc' ? 'desc' : 'asc'));\n      },\n      [setSortOrder],\n    );\n\n    const rightElement = partitions.length ? (\n      <SortButton onMouseDown={onClickSort}>\n        <Icon name=\"sort_by_alpha\" color={Colors.Gray400} />\n      </SortButton>\n    ) : undefined;\n\n    const inputProps: InputGroupProps2 & HTMLInputProps = {\n      placeholder: 'Partition',\n      style: {width: 180},\n      intent: (loading ? !!value : !!selected) ? Intent.NONE : Intent.DANGER,\n      rightElement,\n    };\n\n    // If we are loading the partitions and do NOT have any cached data to display,\n    // show the component in a loading state with a spinner and fill it with the\n    // current partition's name so it doesn't flicker (if one is set already.)\n    if (loading && partitions.length === 0) {\n      return (\n        <Suggest<string>\n          key=\"loading\"\n          inputProps={{\n            ...inputProps,\n            rightElement: !value ? (\n              <Box\n                flex={{direction: 'column', justifyContent: 'center'}}\n                padding={{right: 4}}\n                style={{height: '30px'}}\n              >\n                <Spinner purpose=\"body-text\" />\n              </Box>\n            ) : undefined,\n          }}\n          items={[]}\n          itemRenderer={() => null}\n          noResults={<MenuItem disabled={true} text=\"Loading...\" />}\n          inputValueRenderer={(str) => str}\n          selectedItem={value}\n          onItemSelect={() => {}}\n        />\n      );\n    }\n\n    if (error) {\n      showCustomAlert({\n        body: <PythonErrorInfo error={error} />,\n      });\n    }\n\n    // Note: We don't want this Suggest to be a fully \"controlled\" React component.\n    // Keeping it's state is annoyign and we only want to update our data model on\n    // selection change. However, we need to set an initial value (defaultSelectedItem)\n    // and ensure it is re-applied to the internal state when it changes (via `key` below).\n    return (\n      <Suggest<Partition>\n        key={selected ? selected.name : 'none'}\n        defaultSelectedItem={selected}\n        items={partitions}\n        inputProps={inputProps}\n        inputValueRenderer={(partition) => partition.name}\n        itemPredicate={(query, partition) => query.length === 0 || partition.name.includes(query)}\n        itemRenderer={(partition, props) => (\n          <MenuItem\n            active={props.modifiers.active}\n            onClick={props.handleClick}\n            key={partition.name}\n            text={partition.name}\n          />\n        )}\n        noResults={<MenuItem disabled={true} text=\"No presets.\" />}\n        onItemSelect={(item) => {\n          onSelect(repositorySelector, partitionSetName, item.name);\n        }}\n      />\n    );\n  },\n);\n\ninterface ConfigEditorConfigGeneratorPickerProps {\n  label: string;\n  configGenerators: ConfigGenerator[];\n  onSelect: (configGenerator: ConfigGenerator) => void;\n}\n\nconst ConfigEditorConfigGeneratorPicker: React.FC<ConfigEditorConfigGeneratorPickerProps> = React.memo(\n  (props) => {\n    const {configGenerators, label, onSelect} = props;\n    const button = React.useRef<HTMLButtonElement>(null);\n\n    return (\n      <div>\n        <ShortcutHandler\n          shortcutLabel=\"⌥E\"\n          shortcutFilter={(e) => e.code === 'KeyE' && e.altKey}\n          onShortcut={() => button.current?.click()}\n        >\n          <Select<ConfigGenerator>\n            items={configGenerators}\n            itemPredicate={(query, configGenerator) =>\n              query.length === 0 || configGenerator.name.includes(query)\n            }\n            itemListRenderer={({itemsParentRef, renderItem, filteredItems}) => {\n              const renderedPresetItems = filteredItems\n                .filter((item) => item.__typename === 'PipelinePreset')\n                .map(renderItem)\n                .filter(Boolean);\n\n              const renderedPartitionSetItems = filteredItems\n                .filter((item) => item.__typename === 'PartitionSet')\n                .map(renderItem)\n                .filter(Boolean);\n\n              const bothTypesPresent =\n                renderedPresetItems.length > 0 && renderedPartitionSetItems.length > 0;\n\n              return (\n                <Menu ulRef={itemsParentRef}>\n                  {bothTypesPresent && <MenuItem disabled={true} text=\"Presets\" />}\n                  {renderedPresetItems}\n                  {bothTypesPresent && <MenuDivider />}\n                  {bothTypesPresent && <MenuItem disabled={true} text=\"Partition Sets\" />}\n                  {renderedPartitionSetItems}\n                </Menu>\n              );\n            }}\n            itemRenderer={(item, props) => (\n              <MenuItem\n                active={props.modifiers.active}\n                onClick={props.handleClick}\n                key={item.name}\n                text={\n                  <div>\n                    {item.name}\n                    <div style={{opacity: 0.4, fontSize: '0.75rem'}}>\n                      {[\n                        item.solidSelection\n                          ? item.solidSelection.length === 1\n                            ? `Ops: ${item.solidSelection[0]}`\n                            : `Ops: ${item.solidSelection.length}`\n                          : `Ops: All`,\n                        `Mode: ${item.mode}`,\n                      ].join(' - ')}\n                    </div>\n                  </div>\n                }\n              />\n            )}\n            noResults={<MenuItem disabled={true} text=\"No presets.\" />}\n            onItemSelect={onSelect}\n          >\n            <Button\n              ref={button}\n              data-test-id=\"preset-selector-button\"\n              rightIcon={<Icon name=\"expand_more\" />}\n            >\n              {label}\n            </Button>\n          </Select>\n        </ShortcutHandler>\n      </div>\n    );\n  },\n);\n\nconst SortButton = styled.button`\n  border: 0;\n  cursor: pointer;\n  padding: 4px;\n  margin: 3px 3px 0 0;\n  background-color: ${Colors.White};\n  border-radius: 4px;\n  transition: background-color 100ms;\n\n  :hover,\n  :focus {\n    background-color: ${Colors.Gray100};\n    outline: none;\n\n    ${IconWrapper} {\n      background-color: ${Colors.Gray700};\n    }\n  }\n`;\n\nconst PickerContainer = styled.div`\n  display: flex;\n  justify: space-between;\n  align-items: center;\n  gap: 6px;\n`;\n\nconst CONFIG_PARTITIONS_QUERY = gql`\n  query ConfigPartitionsQuery(\n    $repositorySelector: RepositorySelector!\n    $partitionSetName: String!\n  ) {\n    partitionSetOrError(\n      repositorySelector: $repositorySelector\n      partitionSetName: $partitionSetName\n    ) {\n      __typename\n      ... on PartitionSet {\n        id\n        partitionsOrError {\n          ... on Partitions {\n            results {\n              ...ConfigPartitionResult\n            }\n          }\n          ...PythonErrorFragment\n        }\n      }\n    }\n  }\n\n  fragment ConfigPartitionResult on Partition {\n    name\n  }\n\n  ${PYTHON_ERROR_FRAGMENT}\n`;\n\nexport const CONFIG_PARTITION_SELECTION_QUERY = gql`\n  query ConfigPartitionSelectionQuery(\n    $repositorySelector: RepositorySelector!\n    $partitionSetName: String!\n    $partitionName: String!\n  ) {\n    partitionSetOrError(\n      repositorySelector: $repositorySelector\n      partitionSetName: $partitionSetName\n    ) {\n      __typename\n      ... on PartitionSet {\n        id\n        partition(partitionName: $partitionName) {\n          name\n          solidSelection\n          runConfigOrError {\n            ... on PartitionRunConfig {\n              yaml\n            }\n            ...PythonErrorFragment\n          }\n          mode\n          tagsOrError {\n            ... on PartitionTags {\n              results {\n                key\n                value\n              }\n            }\n            ...PythonErrorFragment\n          }\n        }\n      }\n    }\n  }\n\n  ${PYTHON_ERROR_FRAGMENT}\n`;\n\nexport const CONFIG_EDITOR_GENERATOR_PIPELINE_FRAGMENT = gql`\n  fragment ConfigEditorGeneratorPipelineFragment on Pipeline {\n    id\n    isJob\n    name\n    presets {\n      ...ConfigEditorPipelinePreset\n    }\n    tags {\n      key\n      value\n    }\n  }\n\n  fragment ConfigEditorPipelinePreset on PipelinePreset {\n    name\n    mode\n    solidSelection\n    runConfigYaml\n    tags {\n      key\n      value\n    }\n  }\n`;\n\nexport const CONFIG_EDITOR_GENERATOR_PARTITION_SETS_FRAGMENT = gql`\n  fragment ConfigEditorGeneratorPartitionSetsFragment on PartitionSets {\n    results {\n      id\n      ...PartitionSetForConfigEditor\n    }\n  }\n\n  fragment PartitionSetForConfigEditor on PartitionSet {\n    id\n    name\n    mode\n    solidSelection\n  }\n`;\n","import * as React from 'react';\nimport {createGlobalStyle} from 'styled-components/macro';\n\nimport {Box} from './Box';\nimport {ConfigEditor, ConfigSchema} from './ConfigEditor';\nimport {Spinner} from './Spinner';\nimport {SplitPanelContainer} from './SplitPanelContainer';\nimport {ConfigEditorHelp} from './configeditor/ConfigEditorHelp';\nimport {isHelpContextEqual} from './configeditor/isHelpContextEqual';\nimport {ConfigEditorHelpContext} from './configeditor/types/ConfigEditorHelpContext';\n\ninterface Props {\n  onConfigChange: (config: string) => void;\n  config?: string;\n  configSchema?: ConfigSchema | null;\n  isLoading: boolean;\n  identifier: string;\n}\n\n// Force code editor hints to appear above the dialog modal\nexport const CodeMirrorInDialogStyle = createGlobalStyle`\n  .CodeMirror-hints,\n  .CodeMirror-hints.dagit {\n    z-index: 100;\n  }\n`;\n\nexport const ConfigEditorWithSchema: React.FC<Props> = ({\n  isLoading,\n  identifier,\n  config,\n  onConfigChange,\n  configSchema,\n}) => {\n  const editorSplitPanelContainer = React.useRef<SplitPanelContainer | null>(null);\n  const [editorHelpContext, setEditorHelpContext] = React.useState<ConfigEditorHelpContext | null>(\n    null,\n  );\n  const editor = React.useRef<ConfigEditor | null>(null);\n\n  return (\n    <>\n      <CodeMirrorInDialogStyle />\n      <SplitPanelContainer\n        ref={editorSplitPanelContainer}\n        axis=\"horizontal\"\n        identifier={identifier}\n        firstMinSize={100}\n        firstInitialPercent={70}\n        first={\n          !isLoading ? (\n            <ConfigEditor\n              ref={editor}\n              configCode={config!}\n              onConfigChange={onConfigChange}\n              onHelpContextChange={(next) => {\n                if (next && !isHelpContextEqual(editorHelpContext, next)) {\n                  setEditorHelpContext(next);\n                }\n              }}\n              readOnly={false}\n              checkConfig={async (_j) => {\n                return {isValid: true};\n              }}\n              configSchema={configSchema}\n            />\n          ) : (\n            <Box style={{height: '100%'}} flex={{alignItems: 'center', justifyContent: 'center'}}>\n              <Spinner purpose=\"section\" />\n            </Box>\n          )\n        }\n        second={\n          <Box style={{height: 500}}>\n            <ConfigEditorHelp\n              context={editorHelpContext}\n              allInnerTypes={configSchema?.allConfigTypes || []}\n            />\n          </Box>\n        }\n      />\n    </>\n  );\n};\n","import * as React from 'react';\n\nimport {\n  createSingleSession,\n  IExecutionSession,\n  IExecutionSessionChanges,\n  useInitialDataForMode,\n} from '../app/ExecutionSessionStorage';\nimport {RepoAddress} from '../workspace/types';\n\nimport {LaunchpadType} from './LaunchpadRoot';\nimport LaunchpadSession from './LaunchpadSession';\nimport {\n  LaunchpadSessionPartitionSetsFragment,\n  LaunchpadSessionPipelineFragment,\n} from './types/LaunchpadRoot.types';\n\ninterface Props {\n  launchpadType: LaunchpadType;\n  pipeline: LaunchpadSessionPipelineFragment;\n  partitionSets: LaunchpadSessionPartitionSetsFragment;\n  repoAddress: RepoAddress;\n  sessionPresets: Partial<IExecutionSession>;\n}\n\nexport const LaunchpadTransientSessionContainer = (props: Props) => {\n  const {launchpadType, pipeline, partitionSets, repoAddress, sessionPresets} = props;\n\n  const initialData = useInitialDataForMode(pipeline, partitionSets);\n  const initialSessionComplete = createSingleSession({\n    ...sessionPresets,\n    runConfigYaml: initialData.runConfigYaml,\n  });\n\n  const [session, setSession] = React.useState<IExecutionSession>(initialSessionComplete);\n\n  const onSaveSession = (changes: IExecutionSessionChanges) => {\n    const newSession = {...session, ...changes};\n    setSession(newSession);\n  };\n\n  return (\n    <LaunchpadSession\n      launchpadType={launchpadType}\n      session={session}\n      onSave={onSaveSession}\n      pipeline={pipeline}\n      partitionSets={partitionSets}\n      repoAddress={repoAddress}\n    />\n  );\n};\n","import {gql, useQuery} from '@apollo/client';\nimport {CodeMirrorInDialogStyle, Dialog, DialogHeader} from '@dagster-io/ui';\nimport * as React from 'react';\nimport {Redirect, useParams} from 'react-router-dom';\n\nimport {IExecutionSession} from '../app/ExecutionSessionStorage';\nimport {usePermissionsForLocation} from '../app/Permissions';\nimport {PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorFragment';\nimport {useTrackPageView} from '../app/analytics';\nimport {explorerPathFromString, useStripSnapshotFromPath} from '../pipelines/PipelinePathUtils';\nimport {useJobTitle} from '../pipelines/useJobTitle';\nimport {isThisThingAJob, useRepository} from '../workspace/WorkspaceContext';\nimport {RepoAddress} from '../workspace/types';\n\nimport {\n  CONFIG_EDITOR_GENERATOR_PARTITION_SETS_FRAGMENT,\n  CONFIG_EDITOR_GENERATOR_PIPELINE_FRAGMENT,\n} from './ConfigEditorConfigPicker';\nimport {LaunchpadSessionError} from './LaunchpadSessionError';\nimport {LaunchpadSessionLoading} from './LaunchpadSessionLoading';\nimport {LaunchpadTransientSessionContainer} from './LaunchpadTransientSessionContainer';\nimport {LaunchpadRootQuery, LaunchpadRootQueryVariables} from './types/LaunchpadRoot.types';\n\nconst LaunchpadStoredSessionsContainer = React.lazy(\n  () => import('./LaunchpadStoredSessionsContainer'),\n);\n\nexport type LaunchpadType = 'asset' | 'job';\n\n// ########################\n// ##### LAUNCHPAD ROOTS\n// ########################\n\nexport const AssetLaunchpad: React.FC<{\n  repoAddress: RepoAddress;\n  sessionPresets?: Partial<IExecutionSession>;\n  assetJobName: string;\n  open: boolean;\n  setOpen: (open: boolean) => void;\n}> = ({repoAddress, sessionPresets, assetJobName, open, setOpen}) => {\n  const title = 'Launchpad (configure assets)';\n\n  return (\n    <Dialog\n      style={{height: '90vh', width: '80%'}}\n      isOpen={open}\n      canEscapeKeyClose={true}\n      canOutsideClickClose={true}\n      onClose={() => setOpen(false)}\n    >\n      <DialogHeader icon=\"layers\" label={title} />\n      <CodeMirrorInDialogStyle />\n      <LaunchpadAllowedRoot\n        launchpadType=\"asset\"\n        pipelinePath={assetJobName}\n        repoAddress={repoAddress}\n        sessionPresets={sessionPresets}\n      />\n    </Dialog>\n  );\n};\n\nexport const JobLaunchpad: React.FC<{repoAddress: RepoAddress}> = (props) => {\n  const {repoAddress} = props;\n  const {pipelinePath, repoPath} = useParams<{repoPath: string; pipelinePath: string}>();\n  const {canLaunchPipelineExecution} = usePermissionsForLocation(repoAddress.location);\n\n  if (!canLaunchPipelineExecution.enabled) {\n    return <Redirect to={`/locations/${repoPath}/pipeline_or_job/${pipelinePath}`} />;\n  }\n\n  return (\n    <LaunchpadAllowedRoot\n      launchpadType=\"job\"\n      pipelinePath={pipelinePath}\n      repoAddress={repoAddress}\n    />\n  );\n};\n\n// ########################\n// ##### LAUNCHPAD ALLOWED ROOT\n// ########################\n\ninterface Props {\n  launchpadType: LaunchpadType;\n  pipelinePath: string;\n  repoAddress: RepoAddress;\n  sessionPresets?: Partial<IExecutionSession>;\n}\n\nconst LaunchpadAllowedRoot: React.FC<Props> = (props) => {\n  useTrackPageView();\n\n  const {pipelinePath, repoAddress, launchpadType, sessionPresets} = props;\n  const explorerPath = explorerPathFromString(pipelinePath);\n  const {pipelineName} = explorerPath;\n\n  const repo = useRepository(repoAddress);\n  const isJob = isThisThingAJob(repo, pipelineName);\n\n  useJobTitle(explorerPath, isJob);\n  useStripSnapshotFromPath(props);\n\n  const {name: repositoryName, location: repositoryLocationName} = repoAddress;\n\n  const result = useQuery<LaunchpadRootQuery, LaunchpadRootQueryVariables>(\n    PIPELINE_EXECUTION_ROOT_QUERY,\n    {\n      variables: {repositoryName, repositoryLocationName, pipelineName},\n      partialRefetch: true,\n    },\n  );\n\n  const pipelineOrError = result?.data?.pipelineOrError;\n  const partitionSetsOrError = result?.data?.partitionSetsOrError;\n\n  if (!pipelineOrError || !partitionSetsOrError) {\n    return <LaunchpadSessionLoading />;\n  }\n\n  if (\n    partitionSetsOrError.__typename === 'PipelineNotFoundError' ||\n    pipelineOrError.__typename === 'PipelineNotFoundError'\n  ) {\n    const message =\n      pipelineOrError.__typename === 'PipelineNotFoundError'\n        ? pipelineOrError.message\n        : 'No data returned from GraphQL';\n\n    return pipelineName !== '' ? (\n      <LaunchpadSessionError\n        icon=\"error\"\n        title={isJob ? 'Job not found' : 'Pipeline not found'}\n        description={message}\n      />\n    ) : (\n      <LaunchpadSessionError\n        icon=\"no-results\"\n        title={isJob ? 'Select a job' : 'Select a pipeline'}\n        description={message}\n      />\n    );\n  }\n\n  if (pipelineOrError.__typename === 'InvalidSubsetError') {\n    throw new Error(`Should never happen because we do not request a subset`);\n  }\n\n  if (pipelineOrError.__typename === 'PythonError') {\n    return (\n      <LaunchpadSessionError\n        icon=\"error\"\n        title=\"Python Error\"\n        description={pipelineOrError.message}\n      />\n    );\n  }\n  if (partitionSetsOrError && partitionSetsOrError.__typename === 'PythonError') {\n    return (\n      <LaunchpadSessionError\n        icon=\"error\"\n        title=\"Python Error\"\n        description={partitionSetsOrError.message}\n      />\n    );\n  }\n\n  if (launchpadType === 'asset') {\n    return (\n      <LaunchpadTransientSessionContainer\n        launchpadType={launchpadType}\n        pipeline={pipelineOrError}\n        partitionSets={partitionSetsOrError}\n        repoAddress={repoAddress}\n        sessionPresets={sessionPresets || {}}\n      />\n    );\n  } else {\n    // job\n    return (\n      <React.Suspense fallback={<div />}>\n        <LaunchpadStoredSessionsContainer\n          launchpadType={launchpadType}\n          pipeline={pipelineOrError}\n          partitionSets={partitionSetsOrError}\n          repoAddress={repoAddress}\n        />\n      </React.Suspense>\n    );\n  }\n};\n\nconst PIPELINE_EXECUTION_ROOT_QUERY = gql`\n  query LaunchpadRootQuery(\n    $pipelineName: String!\n    $repositoryName: String!\n    $repositoryLocationName: String!\n  ) {\n    pipelineOrError(\n      params: {\n        pipelineName: $pipelineName\n        repositoryName: $repositoryName\n        repositoryLocationName: $repositoryLocationName\n      }\n    ) {\n      ... on PipelineNotFoundError {\n        message\n      }\n      ... on Pipeline {\n        id\n        ...LaunchpadSessionPipelineFragment\n      }\n      ...PythonErrorFragment\n    }\n    partitionSetsOrError(\n      pipelineName: $pipelineName\n      repositorySelector: {\n        repositoryName: $repositoryName\n        repositoryLocationName: $repositoryLocationName\n      }\n    ) {\n      __typename\n      ... on PipelineNotFoundError {\n        message\n      }\n      ...LaunchpadSessionPartitionSetsFragment\n      ...PythonErrorFragment\n    }\n  }\n\n  fragment LaunchpadSessionPartitionSetsFragment on PartitionSets {\n    ...ConfigEditorGeneratorPartitionSetsFragment\n  }\n\n  fragment LaunchpadSessionPipelineFragment on Pipeline {\n    id\n    isJob\n    isAssetJob\n    ...ConfigEditorGeneratorPipelineFragment\n    modes {\n      id\n      name\n      description\n    }\n  }\n\n  ${PYTHON_ERROR_FRAGMENT}\n  ${CONFIG_EDITOR_GENERATOR_PARTITION_SETS_FRAGMENT}\n  ${CONFIG_EDITOR_GENERATOR_PIPELINE_FRAGMENT}\n`;\n","// Patched lint mode that won't constantly lint\nimport CodeMirror from 'codemirror';\n\nconst GUTTER_ID = 'CodeMirror-lint-markers';\n\nfunction showTooltip(e, content, node) {\n  const tt = document.createElement('div');\n  const nodeRect = node.getBoundingClientRect();\n\n  tt.className = 'CodeMirror-lint-tooltip';\n  tt.appendChild(content.cloneNode(true));\n  document.body.appendChild(tt);\n  if (nodeRect.top > tt.clientHeight) {\n    // position on the top\n    tt.style.top = nodeRect.top - tt.clientHeight - 5 + 'px';\n    tt.style.left = nodeRect.left + 5 + 'px';\n  } else {\n    // positon on the right if top would be off-screen\n    tt.style.top = nodeRect.top + 5 + 'px';\n    tt.style.left = nodeRect.right + 10 + 'px';\n  }\n  if (tt.style.opacity != null) {\n    tt.style.opacity = 1;\n  }\n  return tt;\n}\nfunction rm(elt) {\n  if (elt.parentNode) {\n    elt.parentNode.removeChild(elt);\n  }\n}\nfunction hideTooltip(tt) {\n  if (!tt.parentNode) {\n    return;\n  }\n  if (tt.style.opacity == null) {\n    rm(tt);\n  }\n  tt.style.opacity = 0;\n  setTimeout(function () {\n    rm(tt);\n  }, 600);\n}\n\nfunction showTooltipFor(e, content, node) {\n  let tooltip = showTooltip(e, content, node);\n  function hide() {\n    CodeMirror.off(node, 'mouseout', hide);\n    if (tooltip) {\n      hideTooltip(tooltip);\n      tooltip = null;\n    }\n  }\n  const poll = setInterval(function () {\n    if (tooltip) {\n      for (let n = node; ; n = n.parentNode) {\n        if (n && n.nodeType === 11) {\n          n = n.host;\n        }\n        if (n === document.body) {\n          return;\n        }\n        if (!n) {\n          hide();\n          break;\n        }\n      }\n    }\n    if (!tooltip) {\n      return clearInterval(poll);\n    }\n  }, 400);\n  CodeMirror.on(node, 'mouseout', hide);\n}\n\nfunction parseOptions(_cm, options) {\n  if (options instanceof Function) {\n    return {getAnnotations: options};\n  }\n  if (!options || options === true) {\n    options = {};\n  }\n  return options;\n}\n\nfunction clearMarks(cm) {\n  const state = cm.state.lint;\n  if (state.hasGutter) {\n    cm.clearGutter(GUTTER_ID);\n  }\n  for (let i = 0; i < state.marked.length; ++i) {\n    state.marked[i].clear();\n  }\n  state.marked.length = 0;\n}\n\nfunction makeMarker(labels, severity, multiple, tooltips) {\n  const marker = document.createElement('div');\n  let inner = marker;\n  marker.className = 'CodeMirror-lint-marker CodeMirror-lint-marker-' + severity;\n  if (multiple) {\n    inner = marker.appendChild(document.createElement('div'));\n    inner.className = 'CodeMirror-lint-marker CodeMirror-lint-marker-multiple';\n  }\n\n  if (tooltips !== false) {\n    CodeMirror.on(inner, 'mouseover', function (e) {\n      showTooltipFor(e, labels, inner);\n    });\n  }\n  return marker;\n}\n\nfunction getMaxSeverity(a, b) {\n  if (a === 'error') {\n    return a;\n  } else {\n    return b;\n  }\n}\n\nfunction groupByLine(annotations) {\n  const lines = [];\n  for (let i = 0; i < annotations.length; ++i) {\n    const ann = annotations[i],\n      line = ann.from.line;\n    (lines[line] || (lines[line] = [])).push(ann);\n  }\n  return lines;\n}\n\nfunction annotationTooltip(ann) {\n  let severity = ann.severity;\n  if (!severity) {\n    severity = 'error';\n  }\n  const tip = document.createElement('div');\n  tip.className = 'CodeMirror-lint-message CodeMirror-lint-message-' + severity;\n  if (typeof ann.messageHTML !== 'undefined') {\n    tip.innerHTML = ann.messageHTML;\n  } else {\n    tip.appendChild(document.createTextNode(ann.message));\n  }\n  return tip;\n}\n\nfunction updateLinting(cm, annotationsNotSorted) {\n  clearMarks(cm);\n  const state = cm.state.lint,\n    options = state.options;\n\n  const annotations = groupByLine(annotationsNotSorted);\n\n  for (let line = 0; line < annotations.length; ++line) {\n    const anns = annotations[line];\n    if (!anns) {\n      continue;\n    }\n\n    let maxSeverity = null;\n    const tipLabel = state.hasGutter && document.createDocumentFragment();\n\n    for (let i = 0; i < anns.length; ++i) {\n      let ann = anns[i];\n      let severity = ann.severity;\n      if (!severity) {\n        severity = 'error';\n      }\n      maxSeverity = getMaxSeverity(maxSeverity, severity);\n\n      if (options.formatAnnotation) {\n        ann = options.formatAnnotation(ann);\n      }\n      if (state.hasGutter) {\n        tipLabel.appendChild(annotationTooltip(ann));\n      }\n\n      if (ann.to) {\n        state.marked.push(\n          cm.markText(ann.from, ann.to, {\n            className: 'CodeMirror-lint-mark CodeMirror-lint-mark-' + severity,\n            __annotation: ann,\n          }),\n        );\n      }\n    }\n\n    if (state.hasGutter) {\n      cm.setGutterMarker(\n        line,\n        GUTTER_ID,\n        makeMarker(tipLabel, maxSeverity, anns.length > 1, state.options.tooltips),\n      );\n    }\n  }\n  if (options.onUpdateLinting) {\n    options.onUpdateLinting(annotationsNotSorted, annotations, cm);\n  }\n}\n\nfunction lintAsync(cm, getAnnotations, passOptions) {\n  const state = cm.state.lint;\n  let id = ++state.waitingFor;\n  function abort() {\n    id = -1;\n    cm.off('change', abort);\n  }\n  cm.on('change', abort);\n  getAnnotations(\n    cm.getValue(),\n    function (annotations, arg2) {\n      cm.off('change', abort);\n      if (state.waitingFor !== id) {\n        return;\n      }\n      if (arg2 && annotations instanceof CodeMirror) {\n        annotations = arg2;\n      }\n      cm.operation(function () {\n        updateLinting(cm, annotations);\n      });\n    },\n    passOptions,\n    cm,\n  );\n}\n\nfunction startLinting(cm) {\n  const state = cm.state.lint,\n    options = state.options;\n  /*\n   * Passing rules in `options` property prevents JSHint (and other linters) from complaining\n   * about unrecognized rules like `onUpdateLinting`, `delay`, `lintOnChange`, etc.\n   */\n  const passOptions = options.options || options;\n  const getAnnotations = options.getAnnotations || cm.getHelper(CodeMirror.Pos(0, 0), 'lint');\n  if (!getAnnotations) {\n    return;\n  }\n  if (options.async || getAnnotations.async) {\n    lintAsync(cm, getAnnotations, passOptions);\n  } else {\n    const annotations = getAnnotations(cm.getValue(), passOptions, cm);\n    if (!annotations) {\n      return;\n    }\n    if (annotations.then) {\n      annotations.then(function (issues) {\n        cm.operation(function () {\n          updateLinting(cm, issues);\n        });\n      });\n    } else {\n      cm.operation(function () {\n        updateLinting(cm, annotations);\n      });\n    }\n  }\n}\n\nfunction onChange(cm) {\n  const state = cm.state.lint;\n  if (!state) {\n    return;\n  }\n  clearTimeout(state.timeout);\n  state.timeout = setTimeout(function () {\n    startLinting(cm);\n  }, state.options.delay || 500);\n}\n\nfunction popupTooltip(docs, annotations, e) {\n  const target = e.target || e.srcElement;\n\n  const tooltip = document.createDocumentFragment();\n\n  if (docs) {\n    const docsEl = document.createElement('div');\n    docsEl.textContent = docs;\n    tooltip.appendChild(docsEl);\n    if (annotations.length) {\n      docsEl.style.paddingBottom = '4px';\n      docsEl.style.marginBottom = '4px';\n      docsEl.style.borderBottom = '1px solid rgba(0,0,0,0.25)';\n    }\n  }\n\n  for (let i = 0; i < annotations.length; i++) {\n    const ann = annotations[i];\n    tooltip.appendChild(annotationTooltip(ann));\n  }\n  showTooltipFor(e, tooltip, target);\n}\n\nfunction onMouseOver(cm, e) {\n  const target = e.target || e.srcElement;\n  const box = target.getBoundingClientRect(),\n    x = (box.left + box.right) / 2,\n    y = (box.top + box.bottom) / 2;\n  const pos = cm.coordsChar({left: x, top: y}, 'client');\n  const spans = cm.findMarksAt(pos);\n\n  const getDocs = cm.getHelper(CodeMirror.Pos(0, 0), 'dagster-docs');\n  const docs = getDocs(cm, pos);\n\n  const annotations = [];\n  for (let i = 0; i < spans.length; ++i) {\n    const ann = spans[i].__annotation;\n    if (ann) {\n      annotations.push(ann);\n    }\n  }\n\n  if (docs || annotations.length) {\n    popupTooltip(docs, annotations, e);\n  }\n}\n\nfunction LintState(cm, options, hasGutter) {\n  this.marked = [];\n  this.options = options;\n  this.timeout = null;\n  this.hasGutter = hasGutter;\n  this.onMouseOver = function (e) {\n    onMouseOver(cm, e);\n  };\n  this.waitingFor = 0;\n}\n\nexport const patchLint = () => {\n  CodeMirror.defineOption('lint', false, function (cm, val, old) {\n    if (old && old !== CodeMirror.Init) {\n      clearMarks(cm);\n      if (cm.state.lint.options.lintOnChange !== false) {\n        cm.off('change', onChange);\n      }\n      CodeMirror.off(cm.getWrapperElement(), 'mouseover', cm.state.lint.onMouseOver);\n      clearTimeout(cm.state.lint.timeout);\n      delete cm.state.lint;\n    }\n\n    if (val) {\n      const gutters = cm.getOption('gutters');\n      let hasLintGutter = false;\n      for (let i = 0; i < gutters.length; ++i) {\n        if (gutters[i] === GUTTER_ID) {\n          hasLintGutter = true;\n        }\n      }\n      const state = (cm.state.lint = new LintState(cm, parseOptions(cm, val), hasLintGutter));\n      if (state.options.lintOnChange !== false) {\n        cm.on('change', onChange);\n      }\n      if (state.options.tooltips !== false && state.options.tooltips !== 'gutter') {\n        CodeMirror.on(cm.getWrapperElement(), 'mouseover', state.onMouseOver);\n      }\n    }\n  });\n\n  CodeMirror.defineExtension('performLint', function () {\n    if (this.state.lint) {\n      startLinting(this);\n    }\n  });\n};\n","import 'codemirror/addon/comment/comment';\nimport 'codemirror/addon/dialog/dialog';\nimport 'codemirror/addon/fold/foldgutter';\nimport 'codemirror/addon/fold/foldgutter.css';\nimport 'codemirror/addon/fold/indent-fold';\nimport 'codemirror/addon/hint/show-hint';\nimport 'codemirror/addon/hint/show-hint.css';\nimport 'codemirror/addon/lint/lint.css';\nimport 'codemirror/addon/search/jump-to-line';\nimport 'codemirror/addon/search/search';\nimport 'codemirror/addon/search/searchcursor';\nimport 'codemirror/keymap/sublime';\n\nimport {Editor} from 'codemirror';\nimport debounce from 'lodash/debounce';\nimport * as React from 'react';\nimport {createGlobalStyle} from 'styled-components/macro';\nimport * as yaml from 'yaml';\n\nimport {StyledCodeMirror} from './CodeMirror';\nimport {patchLint} from './configeditor/codemirror-yaml/lint';\nimport {\n  YamlModeValidateFunction,\n  expandAutocompletionContextAtCursor,\n  findRangeInDocumentFromPath,\n  YamlModeValidationResult,\n} from './configeditor/codemirror-yaml/mode'; // eslint-disable-line import/no-duplicates\nimport {ConfigEditorHelpContext} from './configeditor/types/ConfigEditorHelpContext';\nimport {ConfigSchema} from './configeditor/types/ConfigSchema';\n\nexport {isHelpContextEqual} from './configeditor/isHelpContextEqual';\nexport {ConfigEditorHelp} from './configeditor/ConfigEditorHelp';\n\nexport type {ConfigEditorHelpContext, ConfigSchema, YamlModeValidationResult};\n\npatchLint();\n\ninterface ConfigEditorProps {\n  configCode: string;\n  readOnly: boolean;\n  configSchema?: ConfigSchema | null;\n\n  checkConfig: YamlModeValidateFunction;\n  onConfigChange: (newValue: string) => void;\n  onHelpContextChange: (helpContext: ConfigEditorHelpContext | null) => void;\n}\n\nconst AUTO_COMPLETE_AFTER_KEY = /^[a-zA-Z0-9_@(]$/;\nconst performLint = debounce((editor: any) => {\n  editor.performLint();\n}, 1000);\n\nconst ConfigEditorStyle = createGlobalStyle`\n  .react-codemirror2 .CodeMirror.cm-s-config-editor {\n    height: initial;\n    position: absolute;\n    inset: 0;\n  }\n`;\n\nexport class ConfigEditor extends React.Component<ConfigEditorProps> {\n  _editor?: Editor;\n\n  componentDidUpdate(prevProps: ConfigEditorProps) {\n    if (!this._editor) {\n      return;\n    }\n    if (prevProps.configSchema === this.props.configSchema) {\n      return;\n    }\n    this.performInitialPass();\n  }\n\n  shouldComponentUpdate(prevProps: ConfigEditorProps) {\n    // Unfortunately, updates to the ConfigEditor clear the linter highlighting for\n    // unknown reasons and they're recalculated asynchronously. To prevent flickering,\n    // only update if our input has meaningfully changed.\n    return (\n      prevProps.configCode !== this.props.configCode ||\n      prevProps.readOnly !== this.props.readOnly ||\n      prevProps.configSchema !== this.props.configSchema\n    );\n  }\n\n  // Public API\n\n  moveCursor = (line: number, ch: number) => {\n    if (!this._editor) {\n      return;\n    }\n    this._editor.setCursor(line, ch, {scroll: false});\n    const {clientHeight} = this._editor.getScrollInfo();\n    const {left, top} = this._editor.cursorCoords(true, 'local');\n    const offsetFromTop = 20;\n\n    this._editor?.scrollIntoView({\n      left,\n      right: left,\n      top: top - offsetFromTop,\n      bottom: top + (clientHeight - offsetFromTop),\n    });\n    this._editor.focus();\n  };\n\n  moveCursorToPath = (path: string[]) => {\n    if (!this._editor) {\n      return;\n    }\n    const codeMirrorDoc = this._editor.getDoc();\n    const yamlDoc = yaml.parseDocument(this.props.configCode);\n    const range = findRangeInDocumentFromPath(yamlDoc, path, 'key');\n    if (!range) {\n      return;\n    }\n    const from = codeMirrorDoc.posFromIndex(range ? range.start : 0) as CodeMirror.Position;\n    this.moveCursor(from.line, from.ch);\n  };\n\n  // End Public API\n\n  performInitialPass() {\n    // update the gutter and redlining\n    performLint(this._editor);\n\n    // update the contextual help based on the configSchema and content\n    const {context} = expandAutocompletionContextAtCursor(this._editor);\n    this.props.onHelpContextChange(context ? {type: context.closestMappingType} : null);\n  }\n\n  render() {\n    // Unfortunately, CodeMirror is too intense to be simulated in the JSDOM \"virtual\" DOM.\n    // Until we run tests against something like selenium, trying to render the editor in\n    // tests have to stop here.\n    if (process.env.NODE_ENV === 'test') {\n      return <span />;\n    }\n\n    return (\n      <div style={{flex: 1, position: 'relative'}}>\n        <ConfigEditorStyle />\n        <StyledCodeMirror\n          value={this.props.configCode}\n          theme={['config-editor']}\n          options={\n            {\n              mode: 'yaml',\n              lineNumbers: true,\n              readOnly: this.props.readOnly,\n              indentUnit: 2,\n              smartIndent: true,\n              showCursorWhenSelecting: true,\n              lintOnChange: false,\n              lint: {\n                checkConfig: this.props.checkConfig,\n                lintOnChange: false,\n                onUpdateLinting: false,\n              },\n              hintOptions: {\n                completeSingle: false,\n                closeOnUnfocus: false,\n                schema: this.props.configSchema,\n              },\n              keyMap: 'sublime',\n              extraKeys: {\n                'Cmd-Space': (editor: any) => editor.showHint({completeSingle: true}),\n                'Ctrl-Space': (editor: any) => editor.showHint({completeSingle: true}),\n                'Alt-Space': (editor: any) => editor.showHint({completeSingle: true}),\n                'Shift-Tab': (editor: any) => editor.execCommand('indentLess'),\n                Tab: (editor: any) => editor.execCommand('indentMore'),\n                // Persistent search box in Query Editor\n                'Cmd-F': 'findPersistent',\n                'Ctrl-F': 'findPersistent',\n              },\n              gutters: [\n                'CodeMirror-foldgutter',\n                'CodeMirror-lint-markers',\n                'CodeMirror-linenumbers',\n              ],\n              foldGutter: true,\n            } as any\n          }\n          editorDidMount={(editor) => {\n            this._editor = editor;\n            this.performInitialPass();\n          }}\n          onBeforeChange={(editor, data, value) => {\n            this.props.onConfigChange(value);\n          }}\n          onCursorActivity={(editor: any) => {\n            if (editor.getSelection().length) {\n              this.props.onHelpContextChange(null);\n            } else {\n              const {context} = expandAutocompletionContextAtCursor(editor);\n              this.props.onHelpContextChange(context ? {type: context.closestMappingType} : null);\n            }\n          }}\n          onChange={(editor: Editor) => {\n            performLint(editor);\n          }}\n          onBlur={(editor: Editor) => {\n            performLint(editor);\n          }}\n          onKeyUp={(editor, event: KeyboardEvent) => {\n            if (AUTO_COMPLETE_AFTER_KEY.test(event.key)) {\n              editor.execCommand('autocomplete');\n            }\n          }}\n        />\n      </div>\n    );\n  }\n}\n","import {ConfigEditorHelpContext} from './types/ConfigEditorHelpContext';\n\nexport const isHelpContextEqual = (\n  prev: ConfigEditorHelpContext | null,\n  next: ConfigEditorHelpContext | null,\n) => (prev && prev.type.key) === (next && next.type.key);\n","import * as React from 'react';\nimport styled from 'styled-components/macro';\n\nimport {Colors} from '../Colors';\nimport {ConfigTypeSchema, TypeData} from '../ConfigTypeSchema';\nimport {isHelpContextEqual} from '../configeditor/isHelpContextEqual';\n\nimport {ConfigEditorHelpContext} from './types/ConfigEditorHelpContext';\n\ninterface ConfigEditorHelpProps {\n  context: ConfigEditorHelpContext | null;\n  allInnerTypes: TypeData[];\n}\n\nexport const ConfigEditorHelp: React.FC<ConfigEditorHelpProps> = React.memo(\n  ({context, allInnerTypes}) => {\n    if (!context) {\n      return <Container />;\n    }\n    return (\n      <Container>\n        <ConfigScrollWrap>\n          <ConfigTypeSchema type={context.type} typesInScope={allInnerTypes} maxDepth={2} />\n        </ConfigScrollWrap>\n        <AutocompletionsNote>Use Ctrl+Space to show auto-completions inline.</AutocompletionsNote>\n      </Container>\n    );\n  },\n  (prev, next) => isHelpContextEqual(prev.context, next.context),\n);\n\nconst AutocompletionsNote = styled.div`\n  font-size: 0.75rem;\n  text-align: center;\n  padding: 4px;\n  border-top: 1px solid ${Colors.KeylineGray};\n  background: ${Colors.Gray100};\n  color: ${Colors.Gray500};\n`;\n\nconst ConfigScrollWrap = styled.div`\n  padding: 8px;\n  color: ${Colors.Dark};\n  flex: 1;\n  pointer-events: initial;\n  max-height: 100%;\n  overflow-y: auto;\n`;\n\nconst Container = styled.div`\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  background-color: ${Colors.Gray50};\n  height: 100%;\n`;\n","import {gql} from '@apollo/client';\nimport {YamlModeValidationResult} from '@dagster-io/ui';\nimport yaml from 'yaml';\n\nimport {ConfigEditorValidationFragment} from './types/ConfigEditorUtils.types';\n\nexport const CONFIG_EDITOR_RUN_CONFIG_SCHEMA_FRAGMENT = gql`\n  fragment ConfigEditorRunConfigSchemaFragment on RunConfigSchema {\n    rootConfigType {\n      key\n    }\n    allConfigTypes {\n      ...AllConfigTypesForEditor\n    }\n  }\n\n  fragment AllConfigTypesForEditor on ConfigType {\n    key\n    description\n    isSelector\n    typeParamKeys\n    ... on RegularConfigType {\n      givenName\n    }\n    ... on MapConfigType {\n      keyLabelName\n    }\n    ... on EnumConfigType {\n      givenName\n      values {\n        value\n        description\n      }\n    }\n    ... on CompositeConfigType {\n      ...CompositeConfigTypeForSchema\n    }\n    ... on ScalarUnionConfigType {\n      key\n      scalarTypeKey\n      nonScalarTypeKey\n    }\n  }\n\n  fragment CompositeConfigTypeForSchema on CompositeConfigType {\n    fields {\n      name\n      description\n      isRequired\n      configTypeKey\n      defaultValueAsJson\n    }\n  }\n`;\n\nexport const CONFIG_EDITOR_VALIDATION_FRAGMENT = gql`\n  fragment ConfigEditorValidationFragment on PipelineConfigValidationResult {\n    __typename\n    ... on RunConfigValidationInvalid {\n      errors {\n        __typename\n        reason\n        message\n        stack {\n          entries {\n            __typename\n            ... on EvaluationStackPathEntry {\n              fieldName\n            }\n            ... on EvaluationStackListItemEntry {\n              listIndex\n            }\n            ... on EvaluationStackMapKeyEntry {\n              mapKey\n            }\n            ... on EvaluationStackMapValueEntry {\n              mapKey\n            }\n          }\n        }\n      }\n    }\n  }\n`;\n\ntype StackEntry =\n  | {\n      __typename: 'EvaluationStackPathEntry';\n      fieldName: string;\n    }\n  | {\n      __typename: 'EvaluationStackListItemEntry';\n      listIndex: number;\n    }\n  | {\n      __typename: 'EvaluationStackMapKeyEntry';\n      mapKey: object;\n    }\n  | {\n      __typename: 'EvaluationStackMapValueEntry';\n      mapKey: object;\n    };\n\nexport function errorStackToYamlPath(entries: StackEntry[]) {\n  return entries.map((entry) => {\n    switch (entry.__typename) {\n      case 'EvaluationStackPathEntry':\n        return entry.fieldName;\n      case 'EvaluationStackListItemEntry':\n        return `${entry.listIndex}`;\n      case 'EvaluationStackMapKeyEntry':\n      case 'EvaluationStackMapValueEntry':\n        return `${entry.mapKey}`;\n    }\n  });\n}\n\nexport function responseToYamlValidationResult(\n  configYaml: string,\n  response: ConfigEditorValidationFragment,\n): YamlModeValidationResult {\n  if (response.__typename !== 'RunConfigValidationInvalid') {\n    return {isValid: true};\n  }\n\n  const errors = response.errors.map((err) => ({\n    message: err.message,\n    reason: err.reason,\n    path: errorStackToYamlPath(err.stack.entries),\n  }));\n\n  // Errors at the top level have no stack path because they are not within any\n  // dicts. To avoid highlighting the entire editor, associate them with the first\n  // element of the top dict.\n  const parsed = yaml.parse(configYaml);\n  const topLevelKey = Object.keys(parsed);\n  errors.forEach((error) => {\n    if (error.path.length === 0 && topLevelKey.length) {\n      error.path = [topLevelKey[0]];\n    }\n  });\n\n  return {isValid: false, errors};\n}\n","import {Button, Icon, MenuItem, Select} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {ModeNotFoundError} from './ModeNotFoundError';\n\ninterface Mode {\n  name: string;\n}\n\ninterface ConfigEditorModePickerProps {\n  modes: Mode[];\n  modeError?: ModeNotFoundError;\n  modeName: string | null;\n  onModeChange: (mode: string) => void;\n}\n\nconst MODE_PICKER_HINT_TEXT = `To add a mode, add a ModeDefinition to the pipeline.`;\n\nexport const ConfigEditorModePicker: React.FC<ConfigEditorModePickerProps> = (props) => {\n  const resolvedMode = props.modeName\n    ? props.modes.find((m) => m.name === props.modeName)\n    : props.modes[0];\n\n  React.useEffect(() => {\n    if (resolvedMode && resolvedMode.name !== props.modeName) {\n      props.onModeChange?.(resolvedMode.name);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [resolvedMode, props.modeName]);\n\n  const singleMode = props.modes.length === 1;\n  const valid = !props.modeError;\n  const disabled = singleMode && valid;\n\n  const onItemSelect = (mode: Mode) => {\n    props.onModeChange?.(mode.name);\n  };\n\n  return (\n    <Select\n      activeItem={resolvedMode}\n      filterable={true}\n      disabled={disabled}\n      items={props.modes}\n      itemPredicate={(query, mode) => query.length === 0 || mode.name.includes(query)}\n      itemRenderer={(mode, props) => (\n        <MenuItem\n          active={props.modifiers.active}\n          key={mode.name}\n          text={mode.name}\n          onClick={props.handleClick}\n        />\n      )}\n      onItemSelect={onItemSelect}\n    >\n      <Button\n        icon={valid ? undefined : <Icon name=\"error\" />}\n        intent={valid ? 'none' : 'danger'}\n        title={disabled ? MODE_PICKER_HINT_TEXT : 'Current execution mode'}\n        disabled={disabled}\n        rightIcon={<Icon name=\"expand_more\" />}\n        data-test-id=\"mode-picker-button\"\n      >\n        {valid\n          ? resolvedMode\n            ? `Mode: ${resolvedMode.name}`\n            : 'Select Mode'\n          : 'Invalid Mode Selection'}\n      </Button>\n    </Select>\n  );\n};\n","import {gql, useQuery} from '@apollo/client';\nimport {Box, Colors, Popover} from '@dagster-io/ui';\nimport * as React from 'react';\nimport styled from 'styled-components/macro';\n\nimport {filterByQuery} from '../app/GraphQueryImpl';\nimport {PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorFragment';\nimport {ShortcutHandler} from '../app/ShortcutHandler';\nimport {explodeCompositesInHandleGraph} from '../pipelines/CompositeSupport';\nimport {GRAPH_EXPLORER_SOLID_HANDLE_FRAGMENT} from '../pipelines/GraphExplorer';\nimport {GraphQueryInput} from '../ui/GraphQueryInput';\nimport {isThisThingAJob, useRepository} from '../workspace/WorkspaceContext';\nimport {repoAddressToSelector} from '../workspace/repoAddressToSelector';\nimport {RepoAddress} from '../workspace/types';\n\nimport {OpSelectorQuery, OpSelectorQueryVariables} from './types/OpSelector.types';\n\ninterface IOpSelectorProps {\n  pipelineName: string;\n  serverProvidedSubsetError?: {message: string};\n  value: string[] | null;\n  query: string | null;\n  onChange: (value: string[] | null, query: string | null) => void;\n  flattenGraphs: boolean;\n  onFlattenGraphsChange: (v: boolean) => void;\n  repoAddress: RepoAddress;\n}\n\nconst SOLID_SELECTOR_QUERY = gql`\n  query OpSelectorQuery($selector: PipelineSelector!, $requestScopeHandleID: String) {\n    pipelineOrError(params: $selector) {\n      __typename\n      ... on Pipeline {\n        id\n        name\n        solidHandles(parentHandleID: $requestScopeHandleID) {\n          handleID\n          solid {\n            name\n          }\n          ...GraphExplorerSolidHandleFragment\n        }\n      }\n      ... on PipelineNotFoundError {\n        message\n      }\n      ... on InvalidSubsetError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ${GRAPH_EXPLORER_SOLID_HANDLE_FRAGMENT}\n  ${PYTHON_ERROR_FRAGMENT}\n`;\n\nexport const OpSelector = (props: IOpSelectorProps) => {\n  const {\n    serverProvidedSubsetError,\n    onChange,\n    pipelineName,\n    repoAddress,\n    onFlattenGraphsChange,\n  } = props;\n  const [focused, setFocused] = React.useState(false);\n  const inputRef = React.useRef<HTMLInputElement>(null);\n\n  const flattenGraphs = props.flattenGraphs || false;\n  const selector = {...repoAddressToSelector(repoAddress), pipelineName};\n  const repo = useRepository(repoAddress);\n  const isJob = isThisThingAJob(repo, pipelineName);\n  const {data, loading} = useQuery<OpSelectorQuery, OpSelectorQueryVariables>(\n    SOLID_SELECTOR_QUERY,\n    {\n      variables: {selector, requestScopeHandleID: flattenGraphs ? undefined : ''},\n    },\n  );\n\n  const query = props.query || '*';\n\n  const opHandles =\n    data?.pipelineOrError.__typename === 'Pipeline'\n      ? flattenGraphs\n        ? explodeCompositesInHandleGraph(data.pipelineOrError.solidHandles)\n        : data.pipelineOrError.solidHandles\n      : [];\n  const ops = opHandles.map((h) => h.solid);\n  const flattenGraphsEnabled =\n    flattenGraphs || ops.some((f) => f.definition.__typename === 'CompositeSolidDefinition');\n\n  const opsFetchError =\n    (data?.pipelineOrError.__typename !== 'Pipeline' && data?.pipelineOrError.message) || null;\n\n  const queryResultOps = filterByQuery(ops, query).all;\n  const invalidOpSelection = !loading && queryResultOps.length === 0;\n\n  const errorMessage = invalidOpSelection\n    ? isJob\n      ? `You must provide a valid op query or * to execute the entire job.`\n      : `You must provide a valid solid query or * to execute the entire pipeline.`\n    : serverProvidedSubsetError\n    ? serverProvidedSubsetError.message\n    : opsFetchError;\n\n  const onTextChange = (nextQuery: string) => {\n    if (nextQuery === '') {\n      nextQuery = '*';\n    }\n    const queryResultOps = filterByQuery(ops, nextQuery).all;\n\n    // If all ops are returned, we set the subset to null rather than sending\n    // a comma separated list of evey solid to the API\n    if (queryResultOps.length === ops.length) {\n      onChange(null, nextQuery);\n    } else {\n      onChange(\n        queryResultOps.map((s) => s.name),\n        nextQuery,\n      );\n    }\n  };\n\n  if (!data?.pipelineOrError) {\n    return null;\n  }\n\n  return (\n    <Box flex={{direction: 'row', alignItems: 'center', gap: 8}}>\n      <Popover\n        isOpen={focused && !!errorMessage}\n        position=\"bottom-left\"\n        content={<PopoverErrorWrap>{errorMessage}</PopoverErrorWrap>}\n      >\n        <ShortcutHandler\n          shortcutLabel=\"⌥S\"\n          shortcutFilter={(e) => e.code === 'KeyS' && e.altKey}\n          onShortcut={() => inputRef.current?.focus()}\n        >\n          <GraphQueryInput\n            width={(query !== '*' && query !== '') || focused || flattenGraphsEnabled ? 350 : 90}\n            intent={errorMessage ? 'danger' : 'none'}\n            items={ops}\n            ref={inputRef}\n            value={query}\n            placeholder=\"Type an op subset…\"\n            onChange={onTextChange}\n            onFocus={() => setFocused(true)}\n            onBlur={() => setFocused(false)}\n            linkToPreview={{\n              repoName: repoAddress.name,\n              repoLocation: repoAddress.location,\n              pipelineName,\n              isJob,\n            }}\n            flattenGraphsEnabled={flattenGraphsEnabled}\n            flattenGraphs={flattenGraphs}\n            setFlattenGraphs={() => {\n              onFlattenGraphsChange(!flattenGraphs);\n            }}\n          />\n        </ShortcutHandler>\n      </Popover>\n    </Box>\n  );\n};\n\nconst PopoverErrorWrap = styled.div`\n  padding: 4px 8px;\n  border-radius: 2px;\n  border: 1px solid ${Colors.Red500};\n  background: ${Colors.Red200};\n  color: ${Colors.Red700};\n`;\n","import {gql} from '@apollo/client';\n// eslint-disable-next-line no-restricted-imports\nimport {Intent} from '@blueprintjs/core';\nimport {\n  Box,\n  Button,\n  ButtonLink,\n  Checkbox,\n  Colors,\n  Icon,\n  SplitPanelContainer,\n  Tag,\n  Code,\n  Tooltip,\n  FontFamily,\n} from '@dagster-io/ui';\nimport * as React from 'react';\nimport styled from 'styled-components/macro';\n\nimport {showCustomAlert} from '../app/CustomAlertProvider';\nimport {useConfirmation} from '../app/CustomConfirmationProvider';\nimport {PYTHON_ERROR_FRAGMENT} from '../app/PythonErrorFragment';\nimport {PythonErrorInfo} from '../app/PythonErrorInfo';\nimport {errorStackToYamlPath} from '../configeditor/ConfigEditorUtils';\nimport {\n  CompositeConfigTypeForSchemaFragment,\n  ConfigEditorRunConfigSchemaFragment,\n} from '../configeditor/types/ConfigEditorUtils.types';\n\nimport {LaunchpadType} from './LaunchpadRoot';\nimport {\n  RunPreviewValidationErrorsFragment,\n  RunPreviewValidationFragment,\n} from './types/RunPreview.types';\n\ntype ValidationError = RunPreviewValidationErrorsFragment;\ntype ValidationErrorOrNode = ValidationError | React.ReactNode;\n\nfunction isValidationError(e: ValidationErrorOrNode): e is ValidationError {\n  return e && typeof e === 'object' && '__typename' in e ? true : false;\n}\n\nconst stateToHint: {[key: string]: {title: string; intent: Intent}} = {\n  invalid: {\n    title: `You need to fix this configuration section.`,\n    intent: 'danger',\n  },\n  missing: {\n    title: `You need to add this configuration section.`,\n    intent: 'danger',\n  },\n  present: {\n    title: `This section is present and valid.`,\n    intent: 'none',\n  },\n  none: {title: `This section is empty and valid.`, intent: 'none'},\n};\n\nconst RemoveExtraConfigButton = ({\n  onRemoveExtraPaths,\n  extraNodes,\n  disabled,\n}: {\n  extraNodes: string[];\n  onRemoveExtraPaths: (paths: string[]) => void;\n  disabled: boolean;\n}) => {\n  const confirm = useConfirmation();\n\n  const knownKeyExtraPaths: {[key: string]: string[]} = {};\n  const otherPaths: string[] = [];\n\n  for (const path of extraNodes) {\n    const parts = path.split('.');\n\n    // If the length is 2, the first part of the path is a known key, such as \"solids\", \"resouces\",\n    // or \"loggers\", and the user has provided extra config for one of those. We will keep track of\n    // these in `knownKeyExtraPaths` just so we can display them with an extra description.\n    if (parts.length === 2) {\n      const [type, name] = parts;\n      if (!knownKeyExtraPaths[type]) {\n        knownKeyExtraPaths[type] = [];\n      }\n      knownKeyExtraPaths[type].push(name);\n    } else {\n      otherPaths.push(path);\n    }\n  }\n\n  const onClick = async () => {\n    await confirm({\n      title: 'Remove extra config',\n      description: (\n        <div>\n          <p>\n            {`You have provided extra configuration in your run config which does not conform to your\n            pipeline's config schema.`}\n          </p>\n          {Object.entries(knownKeyExtraPaths).length > 0 &&\n            Object.entries(knownKeyExtraPaths).map(([key, value]) => (\n              <>\n                <p>Extra {key}:</p>\n                <ul>\n                  {value.map((v) => (\n                    <li key={v}>\n                      <Code>{v}</Code>\n                    </li>\n                  ))}\n                </ul>\n              </>\n            ))}\n          {otherPaths.length > 0 && (\n            <>\n              <p>Other extra paths:</p>\n              <ul>\n                {otherPaths.map((v) => (\n                  <li key={v}>\n                    <Code>{v}</Code>\n                  </li>\n                ))}\n              </ul>\n            </>\n          )}\n          <p>\n            Clicking confirm will automatically remove this extra configuration from your run\n            config.\n          </p>\n        </div>\n      ),\n    });\n    onRemoveExtraPaths(extraNodes);\n  };\n\n  return (\n    <Box flex={{direction: 'row', gap: 8, alignItems: 'center'}}>\n      <Button disabled={disabled} onClick={onClick}>\n        Remove extra config\n      </Button>\n      {disabled ? (\n        <Box flex={{direction: 'row', gap: 4, alignItems: 'center'}}>\n          <Icon name=\"check_circle\" color={Colors.Green500} />\n          No extra config to remove\n        </Box>\n      ) : null}\n    </Box>\n  );\n};\n\nconst ScaffoldConfigButton = ({\n  onScaffoldMissingConfig,\n  missingNodes,\n  disabled,\n}: {\n  missingNodes: string[];\n  onScaffoldMissingConfig: () => void;\n  disabled: boolean;\n}) => {\n  const confirm = useConfirmation();\n\n  const confirmationMessage = (\n    <div>\n      {missingNodes.length > 0 && (\n        <>\n          <p>Missing paths:</p>\n          <ul>\n            {missingNodes.map((v) => (\n              <li key={v}>\n                <Code>{v}</Code>\n              </li>\n            ))}\n          </ul>\n        </>\n      )}\n      <p>\n        Clicking confirm will automatically scaffold this missing configuration into your run config\n        with default values. You will need to change the values appropriately.\n      </p>\n    </div>\n  );\n\n  const onClick = async () => {\n    await confirm({\n      title: 'Scaffold missing config',\n      description: confirmationMessage,\n    });\n    onScaffoldMissingConfig();\n  };\n\n  return (\n    <Box flex={{direction: 'row', gap: 8, alignItems: 'center'}}>\n      <Button disabled={disabled} onClick={onClick}>\n        Scaffold missing config\n      </Button>\n      {disabled ? (\n        <Box flex={{direction: 'row', gap: 4, alignItems: 'center'}}>\n          <Icon name=\"check_circle\" color={Colors.Green500} />\n          No missing config\n        </Box>\n      ) : null}\n    </Box>\n  );\n};\n\ninterface RunPreviewProps {\n  validation: RunPreviewValidationFragment | null;\n  document: any | null;\n  launchpadType: LaunchpadType;\n\n  runConfigSchema?: ConfigEditorRunConfigSchemaFragment;\n  onHighlightPath: (path: string[]) => void;\n  onRemoveExtraPaths: (paths: string[]) => void;\n  onScaffoldMissingConfig: () => void;\n  solidSelection: string[] | null;\n}\n\nexport const RunPreview: React.FC<RunPreviewProps> = (props) => {\n  const {\n    document,\n    validation,\n    onHighlightPath,\n    launchpadType,\n    onRemoveExtraPaths,\n    onScaffoldMissingConfig,\n    solidSelection,\n    runConfigSchema,\n  } = props;\n  const [errorsOnly, setErrorsOnly] = React.useState(false);\n\n  const rootCompositeChildren = React.useMemo(() => {\n    if (!runConfigSchema) {\n      return {};\n    }\n\n    const {allConfigTypes, rootConfigType} = runConfigSchema;\n    const children: {\n      [fieldName: string]: CompositeConfigTypeForSchemaFragment;\n    } = {};\n\n    const root = allConfigTypes.find((t) => t.key === rootConfigType.key);\n    if (root?.__typename !== 'CompositeConfigType') {\n      return children;\n    }\n\n    root.fields.forEach((field) => {\n      const allConfigVersion = allConfigTypes.find((t) => t.key === field.configTypeKey);\n      if (allConfigVersion?.__typename !== 'CompositeConfigType') {\n        return;\n      }\n      children[field.name] = allConfigVersion;\n    });\n\n    return children;\n  }, [runConfigSchema]);\n\n  const extraNodes: string[] = [];\n  const missingNodes: string[] = [];\n  const errorsAndPaths: {\n    pathKey: string;\n    error: ValidationErrorOrNode;\n  }[] = [];\n\n  if (validation && validation.__typename === 'RunConfigValidationInvalid') {\n    validation.errors.forEach((e) => {\n      const path = errorStackToYamlPath(e.stack.entries);\n\n      errorsAndPaths.push({pathKey: path.join('.'), error: e});\n\n      if (e.__typename === 'MissingFieldConfigError') {\n        missingNodes.push([...path, e.field.name].join('.'));\n      } else if (e.__typename === 'MissingFieldsConfigError') {\n        for (const field of e.fields) {\n          missingNodes.push([...path, field.name].join('.'));\n        }\n      } else if (e.__typename === 'FieldNotDefinedConfigError') {\n        extraNodes.push([...path, e.fieldName].join('.'));\n      } else if (e.__typename === 'FieldsNotDefinedConfigError') {\n        for (const fieldName of e.fieldNames) {\n          extraNodes.push([...path, fieldName].join('.'));\n        }\n      } else if (e.__typename === 'RuntimeMismatchConfigError') {\n        // If an entry at a path is the wrong type,\n        // it is equivalent to it being missing\n        missingNodes.push(path.join('.'));\n      }\n    });\n  }\n\n  if (validation?.__typename === 'InvalidSubsetError') {\n    errorsAndPaths.push({pathKey: '', error: validation.message});\n  }\n\n  if (validation?.__typename === 'PythonError') {\n    const info = <PythonErrorInfo error={validation} />;\n    errorsAndPaths.push({\n      pathKey: '',\n      error: (\n        <span>\n          PythonError:{' '}\n          <ButtonLink onClick={() => showCustomAlert({body: info})}>Click for details</ButtonLink>\n        </span>\n      ),\n    });\n  }\n\n  const {resources, ops, solids, ...rest} = rootCompositeChildren;\n  const hasOps = !!ops?.fields;\n\n  const itemsIn = (parents: string[], items: {name: string; isRequired: boolean}[]) => {\n    const boxes = items\n      .map((item) => {\n        // If a solid selection is in use, discard anything not in it.\n        if (solidSelection?.length && !solidSelection?.includes(item.name)) {\n          return null;\n        }\n\n        const path = [...parents, item.name];\n        const pathKey = path.join('.');\n        const pathErrors = errorsAndPaths\n          .filter((e) => e.pathKey === pathKey || e.pathKey.startsWith(`${pathKey}.`))\n          .map((e) => e.error);\n\n        const isPresent = pathExistsInObject(path, document);\n        const containsMissing = missingNodes.some((missingNode) =>\n          missingNode.includes(path.join('.')),\n        );\n        const isInvalid = pathErrors.length || containsMissing;\n        const isMissing = path.some((_, idx) =>\n          missingNodes.includes(path.slice(0, idx + 1).join('.')),\n        );\n\n        if (errorsOnly && !isInvalid) {\n          return false;\n        }\n\n        const state =\n          isMissing && item.isRequired\n            ? 'missing'\n            : isInvalid\n            ? 'invalid'\n            : isPresent\n            ? 'present'\n            : 'none';\n\n        return (\n          <Tooltip\n            position=\"bottom\"\n            content={stateToHint[state].title}\n            intent={stateToHint[state].intent}\n            key={item.name}\n          >\n            <Tag\n              key={item.name}\n              intent={stateToHint[state].intent}\n              onClick={() => {\n                const first = pathErrors.find(isValidationError);\n                onHighlightPath(first ? errorStackToYamlPath(first.stack.entries) : path);\n              }}\n            >\n              {item.name}\n            </Tag>\n          </Tooltip>\n        );\n      })\n      .filter(Boolean);\n\n    if (!boxes.length) {\n      return <ItemsEmptyNotice>Nothing to display.</ItemsEmptyNotice>;\n    }\n    return boxes;\n  };\n\n  return (\n    <SplitPanelContainer\n      identifier=\"run-preview\"\n      axis=\"horizontal\"\n      first={\n        <ErrorListContainer>\n          <Section>\n            <SectionTitle>Errors</SectionTitle>\n            {errorsAndPaths.length ? (\n              errorsAndPaths.map((item, idx) => (\n                <ErrorRow key={idx} error={item.error} onHighlight={onHighlightPath} />\n              ))\n            ) : (\n              <Box flex={{direction: 'row', gap: 4, alignItems: 'center'}}>\n                <Icon name=\"check_circle\" color={Colors.Green500} />\n                No errors\n              </Box>\n            )}\n          </Section>\n          <Section>\n            <SectionTitle>Config actions:</SectionTitle>\n            <Box flex={{direction: 'column', gap: 8}} padding={{top: 4, bottom: 20}}>\n              <ScaffoldConfigButton\n                onScaffoldMissingConfig={onScaffoldMissingConfig}\n                missingNodes={missingNodes}\n                disabled={!missingNodes.length}\n              />\n              <RemoveExtraConfigButton\n                onRemoveExtraPaths={onRemoveExtraPaths}\n                extraNodes={extraNodes}\n                disabled={!extraNodes.length}\n              />\n            </Box>\n          </Section>\n        </ErrorListContainer>\n      }\n      firstInitialPercent={50}\n      firstMinSize={150}\n      second={\n        <>\n          <div style={{overflowY: 'scroll', width: '100%', height: '100%'}}>\n            <RuntimeAndResourcesSection>\n              <Section>\n                <SectionTitle>Runtime</SectionTitle>\n                <ItemSet>\n                  {itemsIn(\n                    [],\n                    Object.keys(rest).map((name) => ({name, isRequired: false})),\n                  )}\n                </ItemSet>\n              </Section>\n              {(resources?.fields.length || 0) > 0 && (\n                <Section>\n                  <SectionTitle>Resources</SectionTitle>\n                  <ItemSet>{itemsIn(['resources'], resources?.fields || [])}</ItemSet>\n                </Section>\n              )}\n            </RuntimeAndResourcesSection>\n            <Section>\n              <SectionTitle>{launchpadType === 'asset' ? 'Assets (Ops)' : 'Ops'}</SectionTitle>\n              <ItemSet>\n                {itemsIn(\n                  [hasOps ? 'ops' : 'solids'],\n                  (hasOps ? ops?.fields : solids?.fields) || [],\n                )}\n              </ItemSet>\n            </Section>\n            <div style={{height: 50}} />\n          </div>\n          <div\n            style={{\n              position: 'absolute',\n              top: 0,\n              right: 0,\n              padding: '12px 15px 0px 10px',\n              background: 'rgba(255,255,255,0.7)',\n            }}\n          >\n            <Checkbox\n              label=\"Errors Only\"\n              checked={errorsOnly}\n              onChange={() => setErrorsOnly(!errorsOnly)}\n            />\n          </div>\n        </>\n      }\n    />\n  );\n};\n\nexport const RUN_PREVIEW_VALIDATION_FRAGMENT = gql`\n  fragment RunPreviewValidationFragment on PipelineConfigValidationResult {\n    __typename\n    ... on RunConfigValidationInvalid {\n      errors {\n        ...RunPreviewValidationErrors\n      }\n    }\n    ... on PipelineNotFoundError {\n      message\n    }\n    ... on InvalidSubsetError {\n      message\n    }\n    ...PythonErrorFragment\n  }\n\n  fragment RunPreviewValidationErrors on PipelineConfigValidationError {\n    reason\n    message\n    stack {\n      entries {\n        __typename\n        ... on EvaluationStackPathEntry {\n          fieldName\n        }\n        ... on EvaluationStackListItemEntry {\n          listIndex\n        }\n        ... on EvaluationStackMapKeyEntry {\n          mapKey\n        }\n        ... on EvaluationStackMapValueEntry {\n          mapKey\n        }\n      }\n    }\n    ... on MissingFieldConfigError {\n      field {\n        name\n      }\n    }\n    ... on MissingFieldsConfigError {\n      fields {\n        name\n      }\n    }\n    ... on FieldNotDefinedConfigError {\n      fieldName\n    }\n    ... on FieldsNotDefinedConfigError {\n      fieldNames\n    }\n  }\n\n  ${PYTHON_ERROR_FRAGMENT}\n`;\n\nconst SectionTitle = styled.div`\n  color: ${Colors.Gray400};\n  text-transform: uppercase;\n  font-size: 12px;\n  margin-bottom: 8px;\n`;\n\nconst Section = styled.div`\n  margin-top: 14px;\n  margin-left: 10px;\n`;\n\nconst ItemSet = styled.div`\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  gap: 4px;\n`;\n\nconst ItemsEmptyNotice = styled.div`\n  font-size: 13px;\n  padding-top: 7px;\n  padding-bottom: 7px;\n`;\n\nconst ErrorListContainer = styled.div`\n  margin-left: 10px;\n  overflow-y: scroll;\n  height: 100%;\n`;\n\nconst ErrorRowContainer = styled.div<{hoverable: boolean}>`\n  text-align: left;\n  font-size: 13px;\n  white-space: pre-wrap;\n  word-break: break-word;\n  font-family: ${FontFamily.monospace};\n  cursor: pointer;\n  display: flex;\n  flex-direction: row;\n  align-items: flex-start;\n  border-bottom: 1px solid #ccc;\n  padding: 8px;\n  margin: 8px 12px 0 -8px;\n  &:last-child {\n    border-bottom: 0;\n    margin-bottom: 15px;\n  }\n  ${({hoverable}) =>\n    hoverable &&\n    `&:hover {\n      background: ${Colors.Gray50};\n    }\n  `}\n`;\n\nconst RuntimeAndResourcesSection = styled.div`\n  display: flex;\n  gap: 12px;\n  @media (max-width: 800px) {\n    flex-direction: column;\n  }\n`;\n\nconst ErrorRow: React.FC<{\n  error: ValidationError | React.ReactNode;\n  onHighlight: (path: string[]) => void;\n}> = ({error, onHighlight}) => {\n  let message = error;\n  let target: ValidationError | null = null;\n  if (isValidationError(error)) {\n    message = error.message;\n    target = error;\n  }\n\n  let displayed = message;\n  if (typeof message === 'string' && message.length > 400) {\n    displayed = truncateErrorMessage(message);\n  }\n\n  return (\n    <ErrorRowContainer\n      hoverable={!!target}\n      onClick={() => target && onHighlight(errorStackToYamlPath(target.stack.entries))}\n    >\n      <div style={{paddingRight: 4}}>\n        <Icon name=\"error\" color={Colors.Red500} />\n      </div>\n      <div>\n        {displayed}\n        {displayed !== message && (\n          <>\n            &nbsp;\n            <ButtonLink\n              onClick={() =>\n                showCustomAlert({\n                  body: <div style={{whiteSpace: 'pre-wrap'}}>{message}</div>,\n                })\n              }\n            >\n              View all\n            </ButtonLink>\n          </>\n        )}\n      </div>\n    </ErrorRowContainer>\n  );\n};\n\nfunction truncateErrorMessage(message: string) {\n  let split = message.indexOf('{');\n  if (split === -1) {\n    split = message.indexOf('. ');\n  }\n  if (split === -1) {\n    split = 400;\n  }\n  return message.substr(0, split) + '... ';\n}\n\nfunction pathExistsInObject(path: string[], object: any): boolean {\n  if (!object || typeof object !== 'object') {\n    return false;\n  }\n  if (path.length === 0) {\n    return true;\n  }\n  const [first, ...rest] = path;\n  return pathExistsInObject(rest, object[first]);\n}\n","import {assertUnreachable} from '../app/Util';\nimport {\n  AllConfigTypesForEditorFragment,\n  ConfigEditorRunConfigSchemaFragment,\n} from '../configeditor/types/ConfigEditorUtils.types';\n\nexport const scaffoldType = (\n  configTypeKey: string,\n  typeLookup: {[key: string]: AllConfigTypesForEditorFragment},\n): any => {\n  const type = typeLookup[configTypeKey];\n\n  switch (type.__typename) {\n    case 'CompositeConfigType':\n      if (type.isSelector) {\n        // Could potentially do something better here, like scaffold out\n        // all the types and let the user delete the ones they don't want.\n        return '<selector>';\n      }\n\n      const config = {};\n      for (const field of type.fields) {\n        const {name, isRequired, configTypeKey} = field;\n        if (isRequired) {\n          config[name] = scaffoldType(configTypeKey, typeLookup);\n        }\n      }\n\n      return config;\n    case 'ArrayConfigType':\n      return [];\n    case 'MapConfigType':\n      return {};\n    case 'NullableConfigType':\n      // If a type is nullable we include it in the scaffolded config anyway\n      // by using the inner type\n      const innerType = type.typeParamKeys[0];\n      return scaffoldType(innerType, typeLookup);\n    case 'EnumConfigType':\n      // Here we just join all the potential enum values with a |. The user needs to delete\n      // all the values but the ones they want to use.\n      return type.values.map((i) => i.value).join('|');\n    case 'ScalarUnionConfigType':\n      // Here we just scaffold the scalar value. Could potentially try to\n      // scaffold the other type instead.\n      const {scalarTypeKey} = type;\n      return scaffoldType(scalarTypeKey, typeLookup);\n    case 'RegularConfigType':\n      return {\n        String: '',\n        Int: 0,\n        Float: 0.0,\n        Bool: true,\n        Any: 'AnyType',\n      }[type.key];\n    default:\n      assertUnreachable(type);\n  }\n};\n\nexport const createTypeLookup = (allConfigTypes: AllConfigTypesForEditorFragment[]) => {\n  const typeLookup: {[key: string]: AllConfigTypesForEditorFragment} = {};\n  for (const type of allConfigTypes) {\n    typeLookup[type.key] = type;\n  }\n\n  return typeLookup;\n};\n\nexport const scaffoldPipelineConfig = (configSchema: ConfigEditorRunConfigSchemaFragment) => {\n  const {allConfigTypes, rootConfigType} = configSchema;\n  const typeLookup = createTypeLookup(allConfigTypes);\n  const config = scaffoldType(rootConfigType.key, typeLookup);\n  return config;\n};\n","import {gql, useApolloClient, useQuery} from '@apollo/client';\nimport {\n  Box,\n  Button,\n  Colors,\n  ConfigEditor,\n  ConfigEditorHelpContext,\n  Group,\n  Icon,\n  SecondPanelToggle,\n  SplitPanelContainer,\n  isHelpContextEqual,\n  ConfigEditorHelp,\n  TextInput,\n} from '@dagster-io/ui';\nimport merge from 'deepmerge';\nimport uniqBy from 'lodash/uniqBy';\nimport * as React from 'react';\nimport styled from 'styled-components/macro';\nimport * as yaml from 'yaml';\n\nimport {showCustomAlert} from '../app/CustomAlertProvider';\nimport {\n  IExecutionSession,\n  IExecutionSessionChanges,\n  PipelineRunTag,\n  SessionBase,\n} from '../app/ExecutionSessionStorage';\nimport {PythonErrorInfo} from '../app/PythonErrorInfo';\nimport {ShortcutHandler} from '../app/ShortcutHandler';\nimport {tokenForAssetKey} from '../asset-graph/Utils';\nimport {\n  CONFIG_EDITOR_RUN_CONFIG_SCHEMA_FRAGMENT,\n  CONFIG_EDITOR_VALIDATION_FRAGMENT,\n  responseToYamlValidationResult,\n} from '../configeditor/ConfigEditorUtils';\nimport {PipelineSelector, RepositorySelector} from '../graphql/types';\nimport {DagsterTag} from '../runs/RunTag';\nimport {repoAddressAsHumanString} from '../workspace/repoAddressAsString';\nimport {repoAddressToSelector} from '../workspace/repoAddressToSelector';\nimport {RepoAddress} from '../workspace/types';\n\nimport {\n  ConfigEditorConfigPicker,\n  CONFIG_PARTITION_SELECTION_QUERY,\n} from './ConfigEditorConfigPicker';\nimport {ConfigEditorModePicker} from './ConfigEditorModePicker';\nimport {useLaunchPadHooks} from './LaunchpadHooksContext';\nimport {LaunchpadType} from './LaunchpadRoot';\nimport {LoadingOverlay} from './LoadingOverlay';\nimport {OpSelector} from './OpSelector';\nimport {RunPreview, RUN_PREVIEW_VALIDATION_FRAGMENT} from './RunPreview';\nimport {SessionSettingsBar} from './SessionSettingsBar';\nimport {TagContainer, TagEditor} from './TagEditor';\nimport {scaffoldPipelineConfig} from './scaffoldType';\nimport {\n  ConfigEditorPipelinePresetFragment,\n  ConfigPartitionSelectionQuery,\n  ConfigPartitionSelectionQueryVariables,\n} from './types/ConfigEditorConfigPicker.types';\nimport {\n  LaunchpadSessionPartitionSetsFragment,\n  LaunchpadSessionPipelineFragment,\n} from './types/LaunchpadRoot.types';\nimport {\n  PipelineExecutionConfigSchemaQuery,\n  PreviewConfigQuery,\n  PreviewConfigQueryVariables,\n} from './types/LaunchpadSession.types';\n\nconst YAML_SYNTAX_INVALID = `The YAML you provided couldn't be parsed. Please fix the syntax errors and try again.`;\nconst LOADING_CONFIG_FOR_PARTITION = `Generating configuration...`;\nconst LOADING_CONFIG_SCHEMA = `Loading config schema...`;\nconst LOADING_RUN_PREVIEW = `Checking config...`;\n\ntype Preset = ConfigEditorPipelinePresetFragment;\n\ninterface LaunchpadSessionProps {\n  session: IExecutionSession;\n  onSave: (changes: IExecutionSessionChanges) => void;\n  launchpadType: LaunchpadType;\n  pipeline: LaunchpadSessionPipelineFragment;\n  partitionSets: LaunchpadSessionPartitionSetsFragment;\n  repoAddress: RepoAddress;\n  initialExecutionSessionState?: Partial<IExecutionSession>;\n}\n\ninterface ILaunchpadSessionState {\n  preview: PreviewConfigQuery | null;\n  previewLoading: boolean;\n  previewedDocument: any | null;\n  configLoading: boolean;\n  editorHelpContext: ConfigEditorHelpContext | null;\n  tagEditorOpen: boolean;\n}\n\ntype Action =\n  | {type: 'preview-loading'; payload: boolean}\n  | {\n      type: 'set-preview';\n      payload: {\n        preview: PreviewConfigQuery | null;\n        previewLoading: boolean;\n        previewedDocument: string | null;\n      };\n    }\n  | {type: 'toggle-tag-editor'; payload: boolean}\n  | {type: 'toggle-config-loading'; payload: boolean}\n  | {type: 'set-editor-help-context'; payload: ConfigEditorHelpContext | null};\n\nconst reducer = (state: ILaunchpadSessionState, action: Action) => {\n  switch (action.type) {\n    case 'preview-loading':\n      return {...state, previewLoading: action.payload};\n    case 'set-preview': {\n      const {preview, previewedDocument, previewLoading} = action.payload;\n      return {\n        ...state,\n        preview,\n        previewedDocument,\n        previewLoading,\n      };\n    }\n    case 'toggle-tag-editor':\n      return {...state, tagEditorOpen: action.payload};\n    case 'toggle-config-loading':\n      return {...state, configLoading: action.payload};\n    case 'set-editor-help-context':\n      return {...state, editorHelpContext: action.payload};\n    default:\n      return state;\n  }\n};\n\nconst LaunchButtonContainer: React.FC<{launchpadType: LaunchpadType}> = ({\n  launchpadType,\n  children,\n}) => {\n  if (launchpadType === 'asset') {\n    return (\n      <Box\n        flex={{direction: 'row'}}\n        border={{side: 'top', width: 1, color: Colors.KeylineGray}}\n        padding={{right: 12, vertical: 8}}\n      >\n        <div style={{flexGrow: 1}} />\n        {children}\n      </Box>\n    );\n  } else {\n    // job\n    return <div style={{position: 'absolute', bottom: 12, right: 12, zIndex: 1}}>{children}</div>;\n  }\n};\n\nconst initialState: ILaunchpadSessionState = {\n  preview: null,\n  previewLoading: false,\n  previewedDocument: null,\n  configLoading: false,\n  editorHelpContext: null,\n  tagEditorOpen: false,\n};\n\nconst LaunchpadSession: React.FC<LaunchpadSessionProps> = (props) => {\n  const {\n    launchpadType,\n    session: currentSession,\n    onSave,\n    partitionSets,\n    pipeline,\n    repoAddress,\n  } = props;\n\n  const client = useApolloClient();\n  const [state, dispatch] = React.useReducer(reducer, initialState);\n\n  const mounted = React.useRef<boolean>(false);\n  const editor = React.useRef<ConfigEditor | null>(null);\n  const editorSplitPanelContainer = React.useRef<SplitPanelContainer | null>(null);\n  const previewCounter = React.useRef(0);\n\n  const {isJob} = pipeline;\n  const tagsFromSession = React.useMemo(() => currentSession.tags || [], [currentSession]);\n\n  const pipelineSelector: PipelineSelector = {\n    ...repoAddressToSelector(repoAddress),\n    pipelineName: pipeline.name,\n    solidSelection: currentSession.solidSelection || undefined,\n    assetSelection: currentSession.assetSelection?.map(({assetKey: {path}}) => ({path})),\n  };\n\n  const configResult = useQuery<PipelineExecutionConfigSchemaQuery>(\n    PIPELINE_EXECUTION_CONFIG_SCHEMA_QUERY,\n    {\n      variables: {selector: pipelineSelector, mode: currentSession?.mode},\n      partialRefetch: true,\n    },\n  );\n\n  const configSchemaOrError = configResult?.data?.runConfigSchemaOrError;\n\n  React.useEffect(() => {\n    mounted.current = true;\n    return () => {\n      mounted.current = false;\n    };\n  });\n\n  const onSaveSession = (changes: IExecutionSessionChanges) => {\n    onSave(changes);\n  };\n\n  const onConfigChange = (config: any) => {\n    onSaveSession({\n      runConfigYaml: config,\n    });\n  };\n\n  const onOpSelectionChange = (\n    solidSelection: string[] | null,\n    solidSelectionQuery: string | null,\n  ) => {\n    onSaveSession({\n      solidSelection,\n      solidSelectionQuery,\n    });\n  };\n\n  const onFlattenGraphsChange = (flattenGraphs: boolean) => {\n    onSaveSession({flattenGraphs});\n  };\n\n  const onModeChange = (mode: string) => {\n    onSaveSession({mode});\n  };\n\n  const onRemoveExtraPaths = (paths: string[]) => {\n    try {\n      const runConfigData = yaml.parse(sanitizeConfigYamlString(currentSession.runConfigYaml));\n      for (const path of paths) {\n        deletePropertyPath(runConfigData, path);\n      }\n      onSaveSession({runConfigYaml: yaml.stringify(runConfigData)});\n    } catch (err) {\n      showCustomAlert({title: 'Invalid YAML', body: YAML_SYNTAX_INVALID});\n      return;\n    }\n  };\n\n  const runConfigSchema =\n    configSchemaOrError?.__typename === 'RunConfigSchema' ? configSchemaOrError : undefined;\n  const modeError =\n    configSchemaOrError?.__typename === 'ModeNotFoundError' ? configSchemaOrError : undefined;\n\n  const onScaffoldMissingConfig = () => {\n    const config = runConfigSchema ? scaffoldPipelineConfig(runConfigSchema) : {};\n    try {\n      const runConfigData = yaml.parse(sanitizeConfigYamlString(currentSession.runConfigYaml));\n      const updatedRunConfigData = merge(config, runConfigData);\n      const runConfigYaml = yaml.stringify(updatedRunConfigData);\n      onSaveSession({runConfigYaml});\n    } catch (err) {\n      showCustomAlert({title: 'Invalid YAML', body: YAML_SYNTAX_INVALID});\n    }\n  };\n\n  const buildExecutionVariables = () => {\n    if (!currentSession) {\n      return;\n    }\n\n    const configYamlOrEmpty = sanitizeConfigYamlString(currentSession.runConfigYaml);\n\n    try {\n      yaml.parse(configYamlOrEmpty);\n    } catch (err) {\n      showCustomAlert({title: 'Invalid YAML', body: YAML_SYNTAX_INVALID});\n      return;\n    }\n\n    return {\n      executionParams: {\n        runConfigData: configYamlOrEmpty,\n        selector: {\n          ...pipelineSelector,\n          assetSelection: currentSession.assetSelection\n            ? currentSession.assetSelection.map((a) => ({path: a.assetKey.path}))\n            : undefined,\n        },\n        mode: currentSession.mode || 'default',\n        executionMetadata: {\n          tags: uniqBy(\n            [\n              // pass solid selection query via tags\n              // clean up https://github.com/dagster-io/dagster/issues/2495\n              ...(currentSession.solidSelectionQuery\n                ? [\n                    {\n                      key: DagsterTag.SolidSelection,\n                      value: currentSession.solidSelectionQuery,\n                    },\n                  ]\n                : []),\n              ...(currentSession?.base?.['presetName']\n                ? [\n                    {\n                      key: DagsterTag.PresetName,\n                      value: currentSession?.base?.['presetName'],\n                    },\n                  ]\n                : []),\n\n              ...(currentSession.assetSelection\n                ? [\n                    {\n                      key: DagsterTag.StepSelection,\n                      value: currentSession.assetSelection.flatMap((o) => o.opNames).join(','),\n                    },\n                  ]\n                : []),\n\n              ...tagsFromSession.map(onlyKeyAndValue),\n\n              // note, we apply these last - uniqBy uses the first value it sees for\n              // each key, so these can be overridden in the session\n              ...pipeline.tags.map(onlyKeyAndValue),\n            ],\n            (tag) => tag.key,\n          ),\n        },\n      },\n    };\n  };\n\n  const saveTags = (tags: PipelineRunTag[]) => {\n    const tagDict = {};\n    const toSave: PipelineRunTag[] = [];\n    tags.forEach((tag: PipelineRunTag) => {\n      if (!(tag.key in tagDict)) {\n        tagDict[tag.key] = tag.value;\n        toSave.push(tag);\n      }\n    });\n    onSaveSession({tags: toSave});\n  };\n\n  const checkConfig = async (configYaml: string) => {\n    // Another request to preview a newer document may be made while this request\n    // is in flight, in which case completion of this async method should not set loading=false.\n    previewCounter.current += 1;\n    const currentPreviewCount = previewCounter.current;\n    const configYamlOrEmpty = sanitizeConfigYamlString(configYaml);\n\n    dispatch({type: 'preview-loading', payload: true});\n\n    const {data} = await client.query<PreviewConfigQuery, PreviewConfigQueryVariables>({\n      fetchPolicy: 'no-cache',\n      query: PREVIEW_CONFIG_QUERY,\n      variables: {\n        runConfigData: configYamlOrEmpty,\n        pipeline: pipelineSelector,\n        mode: currentSession.mode || 'default',\n      },\n    });\n\n    if (mounted.current) {\n      const isLatestRequest = currentPreviewCount === previewCounter.current;\n      dispatch({\n        type: 'set-preview',\n        payload: {\n          preview: data,\n          previewedDocument: configYamlOrEmpty,\n          previewLoading: isLatestRequest ? false : state.previewLoading,\n        },\n      });\n    }\n\n    return responseToYamlValidationResult(configYamlOrEmpty, data.isPipelineConfigValid);\n  };\n\n  const tagsApplyingNewBaseTags = (newBaseTags: PipelineRunTag[]) => {\n    // If you choose a new base (preset or partition), we want to make a best-effort to preserve\n    // the tags you've manually typed in, but remove:\n    // - Tags that were in your previous base and are unchanged\n    // - Tags that are specified in the new base\n    const preservedUserTags = currentSession.base\n      ? tagsFromSession.filter(\n          (t) =>\n            currentSession.base?.tags &&\n            !currentSession.base?.tags.some((bt) => bt.key === t.key && bt.value === t.value) &&\n            !newBaseTags.some((bt) => bt.key === t.key),\n        )\n      : [];\n\n    return [...newBaseTags, ...preservedUserTags];\n  };\n\n  const onSelectPreset = async (preset: Preset) => {\n    const newBaseTags = preset.tags.map(onlyKeyAndValue);\n\n    onSaveSession({\n      base: {presetName: preset.name, tags: newBaseTags},\n      name: preset.name,\n      runConfigYaml: preset.runConfigYaml || '',\n      solidSelection: preset.solidSelection,\n      solidSelectionQuery: preset.solidSelection === null ? '*' : preset.solidSelection.join(','),\n      mode: preset.mode,\n      tags: tagsApplyingNewBaseTags(newBaseTags),\n      needsRefresh: false,\n    });\n  };\n\n  const onSelectPartition = async (\n    repositorySelector: RepositorySelector,\n    partitionSetName: string,\n    partitionName: string,\n    sessionSolidSelection?: string[] | null,\n  ) => {\n    onConfigLoading();\n    try {\n      const {base} = currentSession;\n      const {data} = await client.query<\n        ConfigPartitionSelectionQuery,\n        ConfigPartitionSelectionQueryVariables\n      >({\n        query: CONFIG_PARTITION_SELECTION_QUERY,\n        variables: {repositorySelector, partitionSetName, partitionName},\n      });\n\n      if (\n        !data ||\n        !data.partitionSetOrError ||\n        data.partitionSetOrError.__typename !== 'PartitionSet' ||\n        !data.partitionSetOrError.partition\n      ) {\n        onConfigLoaded();\n        return;\n      }\n\n      const {partition} = data.partitionSetOrError;\n\n      let newBaseTags: {key: string; value: string}[] = [];\n      if (partition.tagsOrError.__typename === 'PythonError') {\n        showCustomAlert({\n          body: <PythonErrorInfo error={partition.tagsOrError} />,\n        });\n      } else {\n        newBaseTags = partition.tagsOrError.results.map(onlyKeyAndValue);\n      }\n\n      let runConfigYaml;\n      if (partition.runConfigOrError.__typename === 'PythonError') {\n        runConfigYaml = '';\n        showCustomAlert({\n          body: <PythonErrorInfo error={partition.runConfigOrError} />,\n        });\n      } else {\n        runConfigYaml = partition.runConfigOrError.yaml;\n      }\n\n      const solidSelection = sessionSolidSelection || partition.solidSelection;\n\n      onSaveSession({\n        name: partition.name,\n        base: Object.assign({}, base, {partitionName: partition.name, tags: newBaseTags}),\n        runConfigYaml,\n        solidSelection,\n        solidSelectionQuery: solidSelection === null ? '*' : solidSelection.join(','),\n        mode: partition.mode,\n        tags: tagsApplyingNewBaseTags(newBaseTags),\n        needsRefresh: false,\n      });\n    } catch {}\n    onConfigLoaded();\n  };\n\n  const onRefreshConfig = async (base: SessionBase) => {\n    // Handle preset-based configuration.\n    if ('presetName' in base) {\n      const {presetName} = base;\n      const matchingPreset = pipeline.presets.find((preset) => preset.name === presetName);\n      if (matchingPreset) {\n        onSelectPreset({\n          ...matchingPreset,\n          solidSelection: currentSession.solidSelection || matchingPreset.solidSelection,\n        });\n      }\n      return;\n    }\n\n    // Otherwise, handle partition-based configuration.\n    const {partitionName, partitionsSetName} = base;\n    const repositorySelector = repoAddressToSelector(repoAddress);\n\n    // It is expected that `partitionName` is set here, since we shouldn't be showing the\n    // button at all otherwise.\n    if (partitionName) {\n      onConfigLoading();\n      await onSelectPartition(\n        repositorySelector,\n        partitionsSetName,\n        partitionName,\n        currentSession.solidSelection,\n      );\n      onConfigLoaded();\n    }\n  };\n\n  const onDismissRefreshWarning = () => {\n    onSaveSession({needsRefresh: false});\n  };\n\n  const openTagEditor = () => dispatch({type: 'toggle-tag-editor', payload: true});\n  const closeTagEditor = () => dispatch({type: 'toggle-tag-editor', payload: false});\n\n  const onConfigLoading = () => dispatch({type: 'toggle-config-loading', payload: true});\n  const onConfigLoaded = () => dispatch({type: 'toggle-config-loading', payload: false});\n\n  const {\n    preview,\n    previewLoading,\n    previewedDocument,\n    configLoading,\n    editorHelpContext,\n    tagEditorOpen,\n  } = state;\n\n  const refreshableSessionBase = React.useMemo(() => {\n    const {base, needsRefresh} = currentSession;\n    if (\n      base &&\n      needsRefresh &&\n      ('presetName' in base || (base.partitionsSetName && base.partitionName))\n    ) {\n      return base;\n    }\n    return null;\n  }, [currentSession]);\n\n  let launchButtonTitle: string | undefined;\n  if (launchpadType === 'asset') {\n    launchButtonTitle = 'Materialize';\n  }\n\n  let launchButtonWarning: string | undefined;\n  if (\n    partitionSets.results.length &&\n    currentSession.base &&\n    'partitionsSetName' in currentSession.base &&\n    !currentSession.base.partitionName\n  ) {\n    launchButtonWarning =\n      'This job is partitioned. Are you sure you want to launch' +\n      ' a run without a partition specified?';\n  }\n\n  const {LaunchRootExecutionButton} = useLaunchPadHooks();\n\n  return (\n    <>\n      <SplitPanelContainer\n        axis=\"vertical\"\n        identifier=\"execution\"\n        firstMinSize={100}\n        firstInitialPercent={75}\n        first={\n          <>\n            <LoadingOverlay isLoading={configLoading} message={LOADING_CONFIG_FOR_PARTITION} />\n            <SessionSettingsBar>\n              <ConfigEditorConfigPicker\n                pipeline={pipeline}\n                partitionSets={partitionSets.results}\n                base={currentSession.base}\n                onSaveSession={onSaveSession}\n                onSelectPreset={onSelectPreset}\n                onSelectPartition={onSelectPartition}\n                repoAddress={repoAddress}\n              />\n              <SessionSettingsSpacer />\n              {launchpadType === 'asset' ? (\n                <TextInput\n                  readOnly\n                  value={\n                    currentSession.assetSelection\n                      ? currentSession.assetSelection\n                          .map((a) => tokenForAssetKey(a.assetKey))\n                          .join(', ')\n                      : '*'\n                  }\n                />\n              ) : (\n                <OpSelector\n                  serverProvidedSubsetError={\n                    preview?.isPipelineConfigValid.__typename === 'InvalidSubsetError'\n                      ? preview.isPipelineConfigValid\n                      : undefined\n                  }\n                  pipelineName={pipeline.name}\n                  value={currentSession.solidSelection || null}\n                  query={currentSession.solidSelectionQuery || null}\n                  onChange={onOpSelectionChange}\n                  flattenGraphs={currentSession.flattenGraphs}\n                  onFlattenGraphsChange={onFlattenGraphsChange}\n                  repoAddress={repoAddress}\n                />\n              )}\n\n              {isJob ? (\n                <span />\n              ) : (\n                <>\n                  <SessionSettingsSpacer />\n                  <ConfigEditorModePicker\n                    modes={pipeline.modes}\n                    modeError={modeError}\n                    onModeChange={onModeChange}\n                    modeName={currentSession.mode}\n                  />\n                </>\n              )}\n              <TagEditor\n                tagsFromDefinition={pipeline.tags}\n                tagsFromSession={tagsFromSession}\n                onChange={saveTags}\n                open={tagEditorOpen}\n                onRequestClose={closeTagEditor}\n              />\n              <div style={{flex: 1}} />\n              <ShortcutHandler\n                shortcutLabel=\"⌥T\"\n                shortcutFilter={(e) => e.code === 'KeyT' && e.altKey}\n                onShortcut={openTagEditor}\n              >\n                <Button onClick={openTagEditor} icon={<Icon name=\"edit\" />}>\n                  Edit tags\n                </Button>\n              </ShortcutHandler>\n              <SessionSettingsSpacer />\n              <SecondPanelToggle axis=\"horizontal\" container={editorSplitPanelContainer} />\n            </SessionSettingsBar>\n            {pipeline.tags.length || tagsFromSession.length ? (\n              <Box\n                padding={{vertical: 8, left: 12, right: 0}}\n                border={{side: 'bottom', width: 1, color: Colors.Gray200}}\n              >\n                <TagContainer\n                  tagsFromDefinition={pipeline.tags}\n                  tagsFromSession={tagsFromSession}\n                  onRequestEdit={openTagEditor}\n                />\n              </Box>\n            ) : null}\n            {refreshableSessionBase ? (\n              <Box\n                padding={{vertical: 8, horizontal: 12}}\n                border={{side: 'bottom', width: 1, color: Colors.Gray200}}\n              >\n                <Group direction=\"row\" spacing={8} alignItems=\"center\">\n                  <Icon name=\"warning\" color={Colors.Yellow500} />\n                  <div>\n                    {repoAddressAsHumanString(repoAddress)} has been manually refreshed, and this\n                    configuration may now be out of date.\n                  </div>\n                  <Button\n                    intent=\"primary\"\n                    onClick={() => onRefreshConfig(refreshableSessionBase)}\n                    disabled={state.configLoading}\n                  >\n                    Refresh config\n                  </Button>\n                  <Button onClick={onDismissRefreshWarning}>Dismiss</Button>\n                </Group>\n              </Box>\n            ) : null}\n            <SplitPanelContainer\n              ref={editorSplitPanelContainer}\n              axis=\"horizontal\"\n              identifier=\"execution-editor\"\n              firstMinSize={100}\n              firstInitialPercent={70}\n              first={\n                <ConfigEditor\n                  ref={editor}\n                  readOnly={false}\n                  configSchema={runConfigSchema}\n                  configCode={currentSession.runConfigYaml}\n                  onConfigChange={onConfigChange}\n                  onHelpContextChange={(next) => {\n                    if (!isHelpContextEqual(editorHelpContext, next)) {\n                      dispatch({type: 'set-editor-help-context', payload: next});\n                    }\n                  }}\n                  checkConfig={checkConfig}\n                />\n              }\n              second={\n                <ConfigEditorHelp\n                  context={editorHelpContext}\n                  allInnerTypes={runConfigSchema?.allConfigTypes || []}\n                />\n              }\n            />\n          </>\n        }\n        second={\n          <>\n            <LoadingOverlay\n              isLoading={previewLoading}\n              message={!runConfigSchema ? LOADING_CONFIG_SCHEMA : LOADING_RUN_PREVIEW}\n            />\n            <RunPreview\n              launchpadType={launchpadType}\n              document={previewedDocument}\n              validation={preview ? preview.isPipelineConfigValid : null}\n              solidSelection={currentSession.solidSelection}\n              runConfigSchema={runConfigSchema}\n              onHighlightPath={(path) => editor.current?.moveCursorToPath(path)}\n              onRemoveExtraPaths={(paths) => onRemoveExtraPaths(paths)}\n              onScaffoldMissingConfig={onScaffoldMissingConfig}\n            />\n          </>\n        }\n      />\n\n      <LaunchButtonContainer launchpadType={launchpadType}>\n        <LaunchRootExecutionButton\n          title={launchButtonTitle}\n          warning={launchButtonWarning}\n          pipelineName={pipeline.name}\n          getVariables={buildExecutionVariables}\n          disabled={preview?.isPipelineConfigValid?.__typename !== 'PipelineConfigValidationValid'}\n          behavior=\"open\"\n        />\n      </LaunchButtonContainer>\n    </>\n  );\n};\n\n// Imported via React.lazy, which requires a default export.\n// eslint-disable-next-line import/no-default-export\nexport default LaunchpadSession;\n\n// This helper removes __typename, which prevents tags from being passed back to GraphQL\nconst onlyKeyAndValue = ({key, value}: {key: string; value: string}) => ({key, value});\n\nconst deletePropertyPath = (obj: any, path: string) => {\n  const parts = path.split('.');\n\n  // Here we iterate through the parts of the path to get to\n  // the second to last nested object. This is so we can call `delete` using\n  // this object and the last part of the path.\n  for (let i = 0; i < parts.length - 1; i++) {\n    obj = obj[parts[i]];\n    if (typeof obj === 'undefined') {\n      return;\n    }\n  }\n\n  const lastKey = parts.pop();\n  if (lastKey) {\n    delete obj[lastKey];\n  }\n};\n\nconst sanitizeConfigYamlString = (yamlString: string) => (yamlString || '').trim() || '{}';\n\nconst PREVIEW_CONFIG_QUERY = gql`\n  query PreviewConfigQuery(\n    $pipeline: PipelineSelector!\n    $runConfigData: RunConfigData!\n    $mode: String!\n  ) {\n    isPipelineConfigValid(pipeline: $pipeline, runConfigData: $runConfigData, mode: $mode) {\n      ...ConfigEditorValidationFragment\n      ...RunPreviewValidationFragment\n    }\n  }\n\n  ${CONFIG_EDITOR_VALIDATION_FRAGMENT}\n  ${RUN_PREVIEW_VALIDATION_FRAGMENT}\n`;\n\nconst SessionSettingsSpacer = styled.div`\n  width: 5px;\n`;\n\nexport const PIPELINE_EXECUTION_CONFIG_SCHEMA_QUERY = gql`\n  query PipelineExecutionConfigSchemaQuery($selector: PipelineSelector!, $mode: String) {\n    runConfigSchemaOrError(selector: $selector, mode: $mode) {\n      ...LaunchpadSessionRunConfigSchemaFragment\n    }\n  }\n\n  fragment LaunchpadSessionRunConfigSchemaFragment on RunConfigSchemaOrError {\n    __typename\n    ... on RunConfigSchema {\n      ...ConfigEditorRunConfigSchemaFragment\n    }\n    ... on ModeNotFoundError {\n      ...LaunchpadSessionModeNotFound\n    }\n  }\n\n  fragment LaunchpadSessionModeNotFound on ModeNotFoundError {\n    message\n  }\n\n  ${CONFIG_EDITOR_RUN_CONFIG_SCHEMA_FRAGMENT}\n`;\n","import {NonIdealState, NonIdealStateProps, Spinner, SplitPanelContainer} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {SessionSettingsBar} from './SessionSettingsBar';\n\nexport const LaunchpadSessionError: React.FC<NonIdealStateProps> = (props) => (\n  <SplitPanelContainer\n    axis=\"vertical\"\n    identifier=\"execution\"\n    firstInitialPercent={75}\n    firstMinSize={100}\n    first={\n      <>\n        <SessionSettingsBar>\n          <Spinner purpose=\"section\" />\n        </SessionSettingsBar>\n        <NonIdealState {...props} />\n      </>\n    }\n    second={<div />}\n  />\n);\n","import {SplitPanelContainer} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {LoadingOverlay} from './LoadingOverlay';\nimport {SessionSettingsBar} from './SessionSettingsBar';\n\nconst LOADING_PIPELINE = `Loading pipeline and partition sets...`;\n\nexport const LaunchpadSessionLoading = () => (\n  <SplitPanelContainer\n    axis=\"vertical\"\n    identifier=\"execution\"\n    firstInitialPercent={75}\n    firstMinSize={100}\n    first={\n      <>\n        <LoadingOverlay isLoading message={LOADING_PIPELINE} />\n        <SessionSettingsBar />\n      </>\n    }\n    second={<LoadingOverlay isLoading message=\"Loading pipeline and partition sets...\" />}\n  />\n);\n","import {Group, Spinner} from '@dagster-io/ui';\nimport * as React from 'react';\nimport styled from 'styled-components/macro';\n\nexport const LoadingOverlay: React.FC<{\n  isLoading: boolean;\n  message: string;\n}> = ({isLoading, message}) => (\n  <LoadingOverlayContainer isLoading={isLoading}>\n    <Group direction=\"row\" spacing={8} alignItems=\"center\">\n      <Spinner purpose=\"body-text\" />\n      <div>{message}</div>\n    </Group>\n  </LoadingOverlayContainer>\n);\n\nconst LoadingOverlayContainer = styled.div<{isLoading: boolean}>`\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  background-color: #fff;\n  z-index: 20;\n  display: ${({isLoading}) => (!isLoading ? 'none' : 'flex')};\n  align-items: center;\n  justify-content: center;\n  opacity: ${({isLoading}) => (isLoading ? '0.7' : '0')};\n  transition: opacity 150ms linear;\n  transition-delay: 300ms;\n`;\n","import {Colors} from '@dagster-io/ui';\nimport styled from 'styled-components/macro';\n\nexport const SessionSettingsBar = styled.div`\n  color: white;\n  display: flex;\n  position: relative;\n  border-bottom: 1px solid ${Colors.Gray200};\n  background: ${Colors.White};\n  align-items: center;\n  height: 47px;\n  padding: 8px 10px;\n`;\n","import {\n  Box,\n  Button,\n  DialogBody,\n  DialogFooter,\n  Dialog,\n  Group,\n  Icon,\n  TextInput,\n  Tooltip,\n} from '@dagster-io/ui';\nimport * as React from 'react';\nimport styled from 'styled-components/macro';\n\nimport {PipelineRunTag} from '../app/ExecutionSessionStorage';\nimport {ShortcutHandler} from '../app/ShortcutHandler';\nimport {RunTag} from '../runs/RunTag';\n\ninterface ITagEditorProps {\n  tagsFromDefinition?: PipelineRunTag[];\n  tagsFromSession: PipelineRunTag[];\n  open: boolean;\n  onChange: (tags: PipelineRunTag[]) => void;\n  onRequestClose: () => void;\n}\n\ninterface ITagContainerProps {\n  tagsFromDefinition?: PipelineRunTag[];\n  tagsFromSession: PipelineRunTag[];\n  onRequestEdit: () => void;\n}\n\nexport const TagEditor: React.FC<ITagEditorProps> = ({\n  tagsFromDefinition = [],\n  tagsFromSession = [],\n  open,\n  onChange,\n  onRequestClose,\n}) => {\n  const [editState, setEditState] = React.useState(() =>\n    tagsFromSession.length ? tagsFromSession : [{key: '', value: ''}],\n  );\n\n  // Reset the edit state when you close and re-open the modal, or when\n  // tagsFromSession change while the modal is closed.\n  React.useEffect(() => {\n    if (!open) {\n      setEditState(tagsFromSession.length ? tagsFromSession : [{key: '', value: ''}]);\n    }\n  }, [tagsFromSession, open]);\n\n  const toSave: PipelineRunTag[] = editState\n    .map((tag: PipelineRunTag) => ({\n      key: tag.key.trim(),\n      value: tag.value.trim(),\n    }))\n    .filter((tag) => tag.key && tag.value);\n  const toError = editState\n    .map((tag: PipelineRunTag) => ({\n      key: tag.key.trim(),\n      value: tag.value.trim(),\n    }))\n    .filter((tag) => !tag.key !== !tag.value);\n\n  const onSave = () => {\n    if (!toError.length) {\n      onChange(toSave);\n      onRequestClose();\n    }\n  };\n\n  const disabled = editState === tagsFromSession || !!toError.length;\n\n  const onTagEdit = (key: string, value: string, idx: number) => {\n    setEditState((current) => [...current.slice(0, idx), {key, value}, ...current.slice(idx + 1)]);\n  };\n\n  const onRemove = (idx: number) => {\n    setEditState((current) => {\n      if (idx === 0 && current.length === 1) {\n        // If we're deleting the only item, just wipe it out.\n        return [{key: '', value: ''}];\n      }\n      return [...current.slice(0, idx), ...current.slice(idx + 1)];\n    });\n  };\n\n  const addTagEntry = () => {\n    setEditState((current) => [...current, {key: '', value: ''}]);\n  };\n\n  return (\n    <Dialog\n      icon=\"info\"\n      onClose={onRequestClose}\n      style={{minWidth: 700}}\n      title=\"Add tags to run\"\n      isOpen={open}\n    >\n      <DialogBody>\n        <Group spacing={16} direction=\"column\">\n          {tagsFromDefinition.length ? (\n            <Group direction=\"column\" spacing={8}>\n              <Box margin={{left: 2}} style={{fontSize: '13px', fontWeight: 500}}>\n                Tags from definition:\n              </Box>\n              <TagList>\n                {tagsFromDefinition.map((tag, idx) => {\n                  const {key} = tag;\n                  const anyOverride = editState.some((editable) => editable.key === key);\n                  if (anyOverride) {\n                    return (\n                      <Tooltip key={key} content=\"Overriden by custom tag value\" placement=\"top\">\n                        <span style={{opacity: 0.2}}>\n                          <RunTag tag={tag} key={idx} />\n                        </span>\n                      </Tooltip>\n                    );\n                  }\n                  return <RunTag tag={tag} key={key} />;\n                })}\n              </TagList>\n            </Group>\n          ) : null}\n          <Box flex={{direction: 'column', gap: 12}}>\n            <div>Custom tags:</div>\n            <Box flex={{direction: 'column', gap: 8}}>\n              {editState.map((tag, idx) => {\n                const {key, value} = tag;\n                return (\n                  <div\n                    key={idx}\n                    style={{\n                      display: 'flex',\n                      flexDirection: 'row',\n                      gap: 8,\n                    }}\n                  >\n                    <TextInput\n                      placeholder=\"Tag Key\"\n                      value={key}\n                      onChange={(e) => onTagEdit(e.target.value, value, idx)}\n                    />\n                    <TextInput\n                      placeholder=\"Tag Value\"\n                      value={value}\n                      onChange={(e) => onTagEdit(key, e.target.value, idx)}\n                    />\n                    <Button\n                      disabled={editState.length === 1 && !key.trim() && !value.trim()}\n                      onClick={() => onRemove(idx)}\n                      icon={<Icon name=\"delete\" />}\n                    >\n                      Remove\n                    </Button>\n                  </div>\n                );\n              })}\n            </Box>\n            <Box margin={{left: 2}} flex={{direction: 'row'}}>\n              <Button onClick={addTagEntry} icon={<Icon name=\"add_circle\" />}>\n                Add custom tag\n              </Button>\n            </Box>\n          </Box>\n        </Group>\n      </DialogBody>\n      <DialogFooter>\n        <Button onClick={onRequestClose}>Cancel</Button>\n        <ShortcutHandler\n          shortcutLabel=\"⌥Enter\"\n          shortcutFilter={(e) => e.code === 'Enter' && e.altKey}\n          onShortcut={onSave}\n        >\n          <Button intent=\"primary\" onClick={onSave} disabled={disabled}>\n            Apply\n          </Button>\n        </ShortcutHandler>\n      </DialogFooter>\n    </Dialog>\n  );\n};\n\nexport const TagContainer = ({tagsFromSession, tagsFromDefinition}: ITagContainerProps) => {\n  return (\n    <Container>\n      <TagList>\n        {tagsFromDefinition\n          ? tagsFromDefinition.map((tag, idx) => {\n              const {key} = tag;\n              const anyOverride = tagsFromSession.some((sessionTag) => sessionTag.key === key);\n              if (anyOverride) {\n                return (\n                  <Tooltip key={key} content=\"Overriden by custom tag value\" placement=\"top\">\n                    <span style={{opacity: 0.2}}>\n                      <RunTag tag={tag} key={idx} />\n                    </span>\n                  </Tooltip>\n                );\n              }\n              return <RunTag tag={tag} key={idx} />;\n            })\n          : undefined}\n        {tagsFromSession.map((tag, idx) => (\n          <RunTag tag={tag} key={idx} />\n        ))}\n      </TagList>\n    </Container>\n  );\n};\n\nconst Container = styled.div`\n  align-items: flex-start;\n  display: flex;\n  flex-direction: row;\n`;\n\nconst TagList = styled.div`\n  display: flex;\n  flex: 1;\n  flex-wrap: wrap;\n  gap: 4px;\n`;\n","import {gql, useMutation, useQuery} from '@apollo/client';\nimport {\n  Box,\n  Button,\n  Checkbox,\n  Colors,\n  DialogBody,\n  DialogFooter,\n  Icon,\n  NonIdealState,\n  Spinner,\n  Subheading,\n  Tooltip,\n} from '@dagster-io/ui';\nimport * as React from 'react';\nimport {useHistory} from 'react-router';\n\nimport {PipelineRunTag} from '../app/ExecutionSessionStorage';\nimport {filterByQuery} from '../app/GraphQueryImpl';\nimport {GanttChartMode} from '../gantt/GanttChart';\nimport {buildLayout} from '../gantt/GanttChartLayout';\nimport {LAUNCH_PARTITION_BACKFILL_MUTATION} from '../instance/BackfillUtils';\nimport {\n  LaunchPartitionBackfillMutation,\n  LaunchPartitionBackfillMutationVariables,\n} from '../instance/types/BackfillUtils.types';\nimport {LaunchButton} from '../launchpad/LaunchButton';\nimport {TagContainer, TagEditor} from '../launchpad/TagEditor';\nimport {explodeCompositesInHandleGraph} from '../pipelines/CompositeSupport';\nimport {GRAPH_EXPLORER_SOLID_HANDLE_FRAGMENT} from '../pipelines/GraphExplorer';\nimport {GraphQueryInput} from '../ui/GraphQueryInput';\nimport {repoAddressToSelector} from '../workspace/repoAddressToSelector';\nimport {RepoAddress} from '../workspace/types';\n\nimport {\n  DaemonNotRunningAlert,\n  DAEMON_NOT_RUNNING_ALERT_INSTANCE_FRAGMENT,\n  showBackfillErrorToast,\n  showBackfillSuccessToast,\n  UsingDefaultLauncherAlert,\n  USING_DEFAULT_LAUNCH_ERALERT_INSTANCE_FRAGMENT,\n} from './BackfillMessaging';\nimport {DimensionRangeWizard} from './DimensionRangeWizard';\nimport {PartitionStateCheckboxes} from './PartitionStateCheckboxes';\nimport {PartitionState} from './PartitionStatus';\nimport {\n  BackfillSelectorQuery,\n  BackfillSelectorQueryVariables,\n} from './types/BackfillSelector.types';\n\ninterface BackfillOptions {\n  reexecute: boolean;\n  fromFailure: boolean;\n}\n\nexport const BackfillPartitionSelector: React.FC<{\n  partitionSetName: string;\n  partitionNames: string[];\n  partitionData: {[name: string]: PartitionState};\n  pipelineName: string;\n  onLaunch?: (backfillId: string, stepQuery: string) => void;\n  onCancel?: () => void;\n  onSubmit: () => void;\n  repoAddress: RepoAddress;\n}> = ({\n  partitionSetName,\n  onLaunch,\n  onCancel,\n  onSubmit,\n  repoAddress,\n  partitionData,\n  pipelineName,\n  partitionNames,\n}) => {\n  const history = useHistory();\n  const [range, _setRange] = React.useState<string[]>(\n    Object.keys(partitionData).filter(\n      (k) => !partitionData[k] || partitionData[k] === PartitionState.FAILURE,\n    ),\n  );\n  const [stateFilters, setStateFilters] = React.useState<PartitionState[]>([\n    PartitionState.MISSING,\n    PartitionState.FAILURE,\n  ]);\n\n  const selected = React.useMemo(() => {\n    return range.filter((r) => stateFilters.includes(partitionData[r]));\n  }, [range, stateFilters, partitionData]);\n\n  const [tagEditorOpen, setTagEditorOpen] = React.useState<boolean>(false);\n  const [tags, setTags] = React.useState<PipelineRunTag[]>([]);\n  const [query, setQuery] = React.useState<string>('');\n  const [options, setOptions] = React.useState<BackfillOptions>({\n    reexecute: false,\n    fromFailure: false,\n  });\n  const repositorySelector = repoAddressToSelector(repoAddress);\n\n  const {data} = useQuery<BackfillSelectorQuery, BackfillSelectorQueryVariables>(\n    BACKFILL_SELECTOR_QUERY,\n    {\n      variables: {\n        pipelineSelector: {\n          ...repositorySelector,\n          pipelineName,\n        },\n      },\n      fetchPolicy: 'network-only',\n    },\n  );\n\n  const mounted = React.useRef(true);\n  React.useEffect(() => {\n    mounted.current = true;\n    return () => {\n      mounted.current = false;\n    };\n  }, [onLaunch]);\n\n  const onSuccess = (backfillId: string) => {\n    showBackfillSuccessToast(history, backfillId);\n    onLaunch?.(backfillId, query);\n  };\n\n  const onError = (data: LaunchPartitionBackfillMutation | null | undefined) => {\n    showBackfillErrorToast(data);\n  };\n\n  if (!data) {\n    return (\n      <Box margin={{vertical: 32}} flex={{justifyContent: 'center'}}>\n        <Spinner purpose=\"section\" />\n      </Box>\n    );\n  }\n\n  if (data.pipelineSnapshotOrError.__typename !== 'PipelineSnapshot') {\n    return (\n      <Box margin={20}>\n        <NonIdealState icon=\"error\" title=\"Could not fetch job details\" />\n      </Box>\n    );\n  }\n\n  const {pipelineSnapshotOrError: pipelineSnapshot, instance} = data;\n  const solids = explodeCompositesInHandleGraph(pipelineSnapshot.solidHandles).map(\n    (h: any) => h.solid,\n  );\n  const solidsFiltered = filterByQuery(solids, query);\n  const layout = buildLayout({nodes: solidsFiltered.all, mode: GanttChartMode.FLAT});\n  const stepRows = layout.boxes.map((box) => ({\n    x: box.x,\n    name: box.node.name,\n  }));\n\n  const isFailed = (name: string) => partitionData[name] === PartitionState.FAILURE;\n  const failedPartitions = partitionNames.filter(isFailed);\n\n  const setRange = (selection: string[]) => {\n    const selectionSet = new Set(selection);\n    // first order the partition names, according to the order given by partition names, which\n    // is the order determined from the partition definition set in user code\n    _setRange(partitionNames.filter((name) => selectionSet.has(name)));\n    if (options.fromFailure && selection.filter((x) => !isFailed(x)).length > 0) {\n      setOptions({...options, fromFailure: false});\n    }\n  };\n\n  return (\n    <>\n      <DialogBody>\n        <Box flex={{direction: 'column', gap: 24}}>\n          <Section title=\"Partitions\">\n            <Box>\n              Select partitions to materialize. Click and drag to select a range on the timeline.\n            </Box>\n\n            <DimensionRangeWizard\n              selected={range}\n              setSelected={setRange}\n              partitionStateForKey={(name) => partitionData[name]}\n              partitionKeys={partitionNames}\n            />\n\n            <PartitionStateCheckboxes\n              value={stateFilters}\n              partitionKeysForCounts={range.map((key) => ({\n                partitionKey: key,\n                state: partitionData[key],\n              }))}\n              allowed={\n                options.fromFailure\n                  ? [PartitionState.FAILURE]\n                  : [\n                      PartitionState.MISSING,\n                      PartitionState.FAILURE,\n                      PartitionState.QUEUED,\n                      PartitionState.STARTED,\n                      PartitionState.SUCCESS,\n                    ]\n              }\n              onChange={setStateFilters}\n            />\n          </Section>\n\n          {failedPartitions.length ? (\n            <Section title=\"Reexecution\">\n              <Checkbox\n                checked={options.fromFailure}\n                disabled={!selected.every(isFailed)}\n                onChange={() => {\n                  const next = {\n                    ...options,\n                    fromFailure: !options.fromFailure,\n                    reexecute: !options.reexecute,\n                  };\n\n                  if (next.fromFailure) {\n                    setStateFilters([PartitionState.FAILURE]);\n                  }\n                  setQuery('');\n                  setOptions(next);\n                }}\n                label={\n                  <Box flex={{display: 'inline-flex', alignItems: 'center'}}>\n                    <Box margin={{right: 4}}>Re-execute from failures</Box>\n                    <Tooltip\n                      placement=\"top\"\n                      content=\"For each partition, if the most recent run failed, launch a re-execution starting from the steps that failed. Only applies for selections of failed partitions.\"\n                    >\n                      <Icon name=\"info\" color={Colors.Gray500} />\n                    </Tooltip>\n                  </Box>\n                }\n              />\n            </Section>\n          ) : null}\n\n          <Section\n            title={\n              <Box flex={{display: 'inline-flex', alignItems: 'center'}}>\n                <Box margin={{right: 4}}>Step subset</Box>\n                <Tooltip\n                  placement=\"top\"\n                  content=\"Applies a step-selection to each run for the requested partitions.\"\n                >\n                  <Icon name=\"info\" color={Colors.Gray500} />\n                </Tooltip>\n              </Box>\n            }\n          >\n            <Box flex={{direction: 'row', alignItems: 'center', gap: 12}}>\n              <GraphQueryInput\n                disabled={options.fromFailure}\n                width={520}\n                items={solids}\n                value={query}\n                placeholder=\"Type a step subset\"\n                onChange={setQuery}\n                autoApplyChanges={true}\n              />\n              {query ? (\n                <div style={{color: Colors.Gray500}}>\n                  {stepRows.length} step{stepRows.length === 1 ? '' : 's'} selected\n                </div>\n              ) : null}\n            </Box>\n          </Section>\n\n          <Section title=\"Tags\">\n            <TagEditor\n              tagsFromSession={tags}\n              onChange={setTags}\n              open={tagEditorOpen}\n              onRequestClose={() => setTagEditorOpen(false)}\n            />\n            {tags.length ? (\n              <div style={{border: `1px solid ${Colors.Gray300}`, borderRadius: 8, padding: 3}}>\n                <TagContainer tagsFromSession={tags} onRequestEdit={() => setTagEditorOpen(true)} />\n              </div>\n            ) : (\n              <div>\n                <Button onClick={() => setTagEditorOpen(true)}>Add tags to backfill runs</Button>\n              </div>\n            )}\n          </Section>\n\n          <Box flex={{direction: 'column', gap: 16}}>\n            <DaemonNotRunningAlert instance={instance} />\n\n            <UsingDefaultLauncherAlert instance={instance} />\n          </Box>\n        </Box>\n      </DialogBody>\n      <DialogFooter>\n        <Button intent=\"none\" onClick={onCancel}>\n          Cancel\n        </Button>\n        <LaunchBackfillButton\n          partitionNames={selected}\n          partitionSetName={partitionSetName}\n          reexecutionSteps={\n            !options.fromFailure && solidsFiltered.all.length < solids.length\n              ? stepRows.map((step) => step.name)\n              : undefined\n          }\n          fromFailure={options.fromFailure}\n          tags={tags}\n          onSubmit={onSubmit}\n          onSuccess={onSuccess}\n          onError={onError}\n          repoAddress={repoAddress}\n        />\n      </DialogFooter>\n    </>\n  );\n};\n\nconst LaunchBackfillButton: React.FC<{\n  partitionSetName: string;\n  partitionNames: string[];\n  reexecutionSteps?: string[];\n  fromFailure?: boolean;\n  tags?: PipelineRunTag[];\n  onSuccess?: (backfillId: string) => void;\n  onError: (data: LaunchPartitionBackfillMutation | null | undefined) => void;\n  onSubmit: () => void;\n  repoAddress: RepoAddress;\n}> = ({\n  partitionSetName,\n  partitionNames,\n  reexecutionSteps,\n  fromFailure,\n  tags,\n  onSuccess,\n  onError,\n  onSubmit,\n  repoAddress,\n}) => {\n  const repositorySelector = repoAddressToSelector(repoAddress);\n  const mounted = React.useRef(true);\n  const [launchBackfill, {loading}] = useMutation<\n    LaunchPartitionBackfillMutation,\n    LaunchPartitionBackfillMutationVariables\n  >(LAUNCH_PARTITION_BACKFILL_MUTATION);\n\n  React.useEffect(() => {\n    mounted.current = true;\n    return () => {\n      mounted.current = false;\n    };\n  }, [onSuccess]);\n\n  const onLaunch = async () => {\n    onSubmit();\n    const {data} = await launchBackfill({\n      variables: {\n        backfillParams: {\n          selector: {\n            partitionSetName,\n            repositorySelector,\n          },\n          partitionNames,\n          reexecutionSteps,\n          fromFailure,\n          tags,\n        },\n      },\n    });\n\n    if (!mounted.current) {\n      return;\n    }\n\n    if (data && data.launchPartitionBackfill.__typename === 'LaunchBackfillSuccess') {\n      onSuccess?.(data.launchPartitionBackfill.backfillId);\n    } else {\n      onError?.(data);\n    }\n  };\n\n  const count = partitionNames.length;\n  const reexecutionCount = reexecutionSteps?.length;\n\n  const title = () => {\n    if (loading) {\n      return `Submitting ${count} ${count === 1 ? 'run' : 'runs'}…`;\n    }\n\n    if (count) {\n      return `Submit ${count} ${count === 1 ? 'run' : 'runs'}`;\n    }\n\n    return 'Select partitions to submit';\n  };\n\n  const subtitle = () => {\n    return !loading && reexecutionCount\n      ? `(${reexecutionCount} selected ${reexecutionCount === 1 ? 'step' : 'steps'})`\n      : '';\n  };\n\n  const buttonTitle = [title(), subtitle()].join(' ');\n\n  return (\n    <LaunchButton\n      runCount={count}\n      config={{\n        title: buttonTitle,\n        icon: 'open_in_new',\n        disabled: !count || loading,\n        onClick: onLaunch,\n      }}\n    />\n  );\n};\n\nconst BACKFILL_SELECTOR_QUERY = gql`\n  query BackfillSelectorQuery($pipelineSelector: PipelineSelector!) {\n    pipelineSnapshotOrError(activePipelineSelector: $pipelineSelector) {\n      ... on PipelineSnapshot {\n        id\n        name\n        solidHandles {\n          handleID\n          solid {\n            name\n            definition {\n              name\n            }\n            inputs {\n              dependsOn {\n                solid {\n                  name\n                }\n              }\n            }\n            outputs {\n              dependedBy {\n                solid {\n                  name\n                }\n              }\n            }\n          }\n          ...GraphExplorerSolidHandleFragment\n        }\n      }\n    }\n    instance {\n      ...UsingDefaultLauncherAlertInstanceFragment\n      ...DaemonNotRunningAlertInstanceFragment\n    }\n  }\n\n  ${GRAPH_EXPLORER_SOLID_HANDLE_FRAGMENT}\n  ${DAEMON_NOT_RUNNING_ALERT_INSTANCE_FRAGMENT}\n  ${USING_DEFAULT_LAUNCH_ERALERT_INSTANCE_FRAGMENT}\n`;\n\nexport const Section = ({\n  title,\n  children,\n}: {\n  title: string | React.ReactNode;\n  children: React.ReactNode;\n}) => (\n  <Box flex={{direction: 'column', gap: 4}}>\n    <Subheading>{title}</Subheading>\n    <Box\n      flex={{direction: 'column', gap: 8}}\n      padding={{top: 16}}\n      border={{width: 1, color: Colors.KeylineGray, side: 'top'}}\n    >\n      {children}\n    </Box>\n  </Box>\n);\n","import {Icon, TextInput} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {showCustomAlert} from '../app/CustomAlertProvider';\nimport {ClearButton} from '../ui/ClearButton';\n\nimport {partitionsToText, spanTextToSelections} from './SpanRepresentation';\n\nexport const DimensionRangeInput: React.FC<{\n  value: string[];\n  onChange: (partitionNames: string[]) => void;\n  partitionKeys: string[];\n  isTimeseries: boolean;\n}> = ({value, onChange, partitionKeys, isTimeseries}) => {\n  const [valueString, setValueString] = React.useState('');\n  const partitionNameJSON = React.useMemo(() => JSON.stringify(partitionKeys), [partitionKeys]);\n\n  React.useEffect(() => {\n    const partitionNameArr = JSON.parse(partitionNameJSON);\n    setValueString(isTimeseries ? partitionsToText(value, partitionNameArr) : value.join(', '));\n  }, [value, partitionNameJSON, isTimeseries]);\n\n  const placeholder = React.useMemo(() => {\n    return partitionKeys.length === 0\n      ? 'Loading partition keys...'\n      : placeholderForPartitions(partitionKeys, isTimeseries);\n  }, [partitionKeys, isTimeseries]);\n\n  const tryCommit = (e: React.SyntheticEvent<HTMLInputElement>) => {\n    try {\n      onChange(spanTextToSelections(partitionKeys, valueString).selectedKeys);\n    } catch (err: any) {\n      e.preventDefault();\n      showCustomAlert({body: err.message});\n    }\n  };\n\n  const onKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\n    if (e.key === 'Enter') {\n      tryCommit(e);\n    }\n  };\n\n  return (\n    <TextInput\n      placeholder={placeholder}\n      value={valueString}\n      style={{display: 'flex', width: '100%', flex: 1, flexGrow: 1}}\n      onChange={(e) => setValueString(e.currentTarget.value)}\n      onKeyDown={onKeyDown}\n      onBlur={tryCommit}\n      rightElement={\n        <ClearButton\n          style={{display: valueString.length ? 'initial' : 'none'}}\n          onClick={() => onChange([])}\n        >\n          <Icon name=\"cancel\" />\n        </ClearButton>\n      }\n    />\n  );\n};\nexport function placeholderForPartitions(names: string[], isTimeseries: boolean) {\n  if (names.length === 0) {\n    return '';\n  }\n  if (names.length < 4 || !isTimeseries) {\n    return `ex: ${names[0]}, ${names[1]}`;\n  }\n  return `ex: ${names[0]}, ${names[1]}, [${names[2]}...${names[names.length - 1]}]`;\n}\n","import {Box, Button} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {isTimeseriesPartition} from '../assets/MultipartitioningSupport';\n\nimport {DimensionRangeInput} from './DimensionRangeInput';\nimport {PartitionState, PartitionStatus} from './PartitionStatus';\n\nexport const DimensionRangeWizard: React.FC<{\n  selected: string[];\n  setSelected: (selected: string[]) => void;\n  partitionKeys: string[];\n  partitionStateForKey: (partitionKey: string, partitionIdx: number) => PartitionState;\n}> = ({selected, setSelected, partitionKeys, partitionStateForKey}) => {\n  const isTimeseries = isTimeseriesPartition(partitionKeys[0]);\n\n  return (\n    <>\n      <Box flex={{direction: 'row', alignItems: 'center', gap: 8}} padding={{vertical: 4}}>\n        <Box flex={{direction: 'column'}} style={{flex: 1}}>\n          <DimensionRangeInput\n            value={selected}\n            partitionKeys={partitionKeys}\n            onChange={setSelected}\n            isTimeseries={isTimeseries}\n          />\n        </Box>\n        {isTimeseries && (\n          <Button small={true} onClick={() => setSelected(partitionKeys.slice(-1))}>\n            Latest\n          </Button>\n        )}\n        <Button small={true} onClick={() => setSelected(partitionKeys)}>\n          All\n        </Button>\n      </Box>\n      <Box margin={{bottom: 8}}>\n        <PartitionStatus\n          partitionNames={partitionKeys}\n          partitionStateForKey={partitionStateForKey}\n          splitPartitions={!isTimeseries}\n          selected={selected}\n          onSelect={setSelected}\n        />\n      </Box>\n    </>\n  );\n};\n","import {Box, Checkbox} from '@dagster-io/ui';\nimport * as React from 'react';\n\nimport {PartitionState, partitionStatusToText} from './PartitionStatus';\n\nexport const PartitionStateCheckboxes: React.FC<{\n  partitionKeysForCounts: {partitionKey: string; state: PartitionState}[];\n  value: PartitionState[];\n  allowed: PartitionState[];\n  onChange: (selected: PartitionState[]) => void;\n  disabled?: boolean;\n}> = ({partitionKeysForCounts, value, onChange, allowed, disabled}) => {\n  const byState = React.useMemo(() => {\n    const result: {[state: string]: number} = {\n      [PartitionState.SUCCESS]: 0,\n      [PartitionState.SUCCESS_MISSING]: 0,\n      [PartitionState.MISSING]: 0,\n      [PartitionState.FAILURE]: 0,\n      [PartitionState.QUEUED]: 0,\n      [PartitionState.STARTED]: 0,\n    };\n    for (const key of partitionKeysForCounts) {\n      result[key.state] = (result[key.state] || 0) + 1;\n    }\n    return result;\n  }, [partitionKeysForCounts]);\n\n  return (\n    <Box flex={{direction: 'row', alignItems: 'center', gap: 12}} style={{overflow: 'hidden'}}>\n      {allowed.map((state) => (\n        <Checkbox\n          key={state}\n          disabled={disabled}\n          style={{marginBottom: 0, marginLeft: 10, minWidth: 200}}\n          checked={value.includes(state) && !disabled}\n          label={`${partitionStatusToText(state)} (${byState[state]})`}\n          onChange={() =>\n            onChange(value.includes(state) ? value.filter((v) => v !== state) : [...value, state])\n          }\n        />\n      ))}\n    </Box>\n  );\n};\n","import {NonIdealState} from '@dagster-io/ui';\nimport React from 'react';\n\nimport {repoAddressAsHumanString} from '../workspace/repoAddressAsString';\nimport {RepoAddress} from '../workspace/types';\n\ninterface Props {\n  isGraph: boolean;\n  repoAddress?: RepoAddress;\n  result:\n    | {\n        __typename: 'PipelineSnapshotNotFoundError';\n        message: string;\n      }\n    | {\n        __typename: 'PipelineNotFoundError';\n        message: string;\n      }\n    | {\n        __typename: 'RepositoryNotFoundError';\n        message: string;\n      }\n    | {\n        __typename: 'PythonError';\n        message: string;\n      };\n}\n\nexport const NonIdealPipelineQueryResult: React.FC<Props> = ({isGraph, repoAddress, result}) => {\n  if (result.__typename === 'PipelineSnapshotNotFoundError') {\n    return (\n      <NonIdealState\n        icon=\"error\"\n        title={isGraph ? 'Graph snapshot not found' : 'Pipeline snapshot not found'}\n        description={result.message}\n      />\n    );\n  }\n  if (result.__typename === 'PipelineNotFoundError') {\n    return (\n      <NonIdealState\n        icon=\"error\"\n        title={isGraph ? 'Graph not found' : 'Pipeline not found'}\n        description={result.message}\n      />\n    );\n  }\n  if (result.__typename === 'RepositoryNotFoundError') {\n    return (\n      <NonIdealState\n        icon=\"error\"\n        title={`${repoAddress ? repoAddressAsHumanString(repoAddress) : 'Definitions'} not found`}\n        description={result.message}\n      />\n    );\n  }\n  if (result.__typename === 'PythonError') {\n    return <NonIdealState icon=\"error\" title=\"Query error\" description={result.message} />;\n  }\n  return <span />;\n};\n","import * as React from 'react';\n\nimport {useDocumentTitle} from '../hooks/useDocumentTitle';\n\nimport {ExplorerPath} from './PipelinePathUtils';\n\nexport const useJobTitle = (explorerPath: ExplorerPath, isJob: boolean) => {\n  const {pipelineName} = explorerPath;\n\n  const value = React.useMemo(() => {\n    if (isJob) {\n      return `Job: ${pipelineName}`;\n    }\n    return `Pipeline: ${pipelineName}`;\n  }, [isJob, pipelineName]);\n\n  useDocumentTitle(value);\n};\n","import {Colors, IconWrapper} from '@dagster-io/ui';\nimport styled from 'styled-components/macro';\n\nexport const ClearButton = styled.button`\n  background: transparent;\n  border: none;\n  cursor: pointer;\n  margin: 0 -2px 0 0;\n  padding: 2px;\n\n  ${IconWrapper} {\n    background-color: ${Colors.Gray400};\n    transition: background-color 100ms linear;\n  }\n\n  :hover ${IconWrapper}, :focus ${IconWrapper} {\n    background-color: ${Colors.Gray700};\n  }\n\n  :active ${IconWrapper} {\n    background-color: ${Colors.Dark};\n  }\n\n  :focus {\n    outline: none;\n  }\n`;\n","import {FontFamily} from '@dagster-io/ui';\nimport styled from 'styled-components/macro';\n\nexport const Version = styled.div`\n  font-family: ${FontFamily.monospace};\n  font-size: 16px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n`;\n"],"names":["AssetEdges","edges","highlighted","strokeWidth","baseColor","Colors","AssetEdgeSet","color","filter","fromId","toId","React","id","btoa","viewBox","refX","refY","markerUnits","markerWidth","orient","d","fill","map","edge","idx","buildSVGPath","source","from","target","to","stroke","markerEnd","LaunchAssetObservationButton","assetKeys","preferredJobName","intent","canLaunchPipelineExecution","usePermissionsDEPRECATED","launchWithTelemetry","useLaunchWithTelemetry","useLaunchPadHooks","type","state","setState","client","useApolloClient","count","length","label","enabled","Tooltip","content","Button","icon","Icon","name","disabled","onClick","e","query","LAUNCH_ASSET_LOADER_QUERY","variables","path","result","data","assetNodeDefinitionCollisions","showCustomAlert","buildAssetCollisionsAlert","assets","assetNodes","forceLaunchpad","shiftKey","stateForObservingAssets","next","title","body","error","executionParams","Spinner","purpose","_client","_forceLaunchpad","some","x","isSource","isObservable","repoAddress","buildRepoAddress","repository","location","repoName","repoAddressAsHumanString","every","a","jobName","getCommonJob","executionParamsForAssetJob","AssetGraphJobSidebar","pipelineSelector","queryResult","useQuery","ASSET_GRAPH_JOB_SIDEBAR","partialRefetch","repositoryName","repositoryLocationName","Loading","pipelineSnapshotOrError","__typename","NonIdealPipelineQueryResult","isGraph","SidebarContainerOverview","S","container","gql","SIDEBAR_ROOT_CONTAINER_FRAGMENT","PYTHON_ERROR_FRAGMENT","LatestMaterializationMetadata","latest","liveData","latestRun","runOrError","repositoryOrigin","repo","useRepository","Box","padding","top","bottom","NonIdealState","description","latestEvent","latestAssetLineage","assetLineage","MetadataTable","runId","timestamp","titleForRun","isHiddenAssetGroupJob","pipelineName","left","PipelineReference","showIcon","pipelineHrefContext","snapshotId","pipelineSnapshotId","isJob","isThisThingAJob","Group","direction","spacing","alignItems","linkToRunEvent","stepKey","partition","flex","gap","Timestamp","ms","Number","StaleTag","AssetLineageElements","elements","metadataEntries","entry","MetadataEntry","expandSmallValues","repoLocation","styled","Table","METADATA_ENTRY_FRAGMENT","AssetSidebarActivitySummary","assetKey","assetLastMaterializedAt","assetHasDefinedPartitions","useRecentAssetEvents","materializations","observations","loadedPartitionKeys","loading","refetch","xAxis","grouped","useGroupedEvents","vertical","FailedRunsSinceMaterializationBanner","border","side","width","CurrentRunsBanner","freshnessPolicy","margin","horizontal","CurrentMinutesLateTag","freshnessPolicyDescription","style","maxWidth","overflowX","fontSize","collapsedByDefault","AssetEventSystemTags","event","paddingLeft","AssetMaterializationGraphs","asSidebarSection","groups","columnCount","SidebarAssetInfo","assetNode","partitionHealthData","usePartitionHealthData","SIDEBAR_ASSET_QUERY","lastMaterialization","asset","assetNodeOrError","Header","metadataForAssetNode","assetMetadata","assetType","hasAssetMetadata","assetConfigSchema","configField","configType","OpMetadataPlugin","op","metadata","pluginForMetadata","opName","AssetDefinedInMultipleReposNotice","loadedFromRepo","padded","partitionDefinition","borderBottom","nodeDependsOnSelf","DependsOnSelfBanner","SidebarComponent","Description","definition","opVersion","Version","ConfigTypeSchema","typesInScope","recursiveConfigTypes","AssetMetadata","TypeSidebarSection","PartitionHealthSummary","DagsterType","displayName","displayNameForAssetKey","right","marginBottom","display","justifyContent","flexWrap","opacity","size","undefined","AssetCatalogLink","assetDetailsPathForKey","Link","SIDEBAR_ASSET_FRAGMENT","ASSET_NODE_CONFIG_FRAGMENT","ASSET_NODE_OP_METADATA_FRAGMENT","ASSET_FOR_NAVIGATION_QUERY","MINIMAL_SCALE","GROUPS_ONLY_SCALE","AssetGraphExplorer","props","useAssetGraphData","explorerPath","opsQuery","fetchOptions","fetchResult","assetGraphData","graphQueryItems","graphAssetKeys","allAssetKeys","applyingEmptyDefault","useLiveDataForAssetKeys","liveDataByNode","liveDataRefreshState","runWatchers","allowStaleData","graphHasCycles","AssetGraphExplorerWithData","options","setOptions","onChangeExplorerPath","onNavigateToSourceAssetNode","fetchOptionFilters","findAssetLocation","apollo","key","assetOrError","def","opNames","jobNames","find","groupName","useFindAssetLocation","useAssetLayout","layout","async","viewportEl","setHighlighted","selectedAssetValues","split","selectedGraphNodes","Object","values","nodes","node","includes","tokenForAssetKey","lastSelectedNode","selectedDefinitions","allDefinitionsForMaterialize","onSelectNode","stopPropagation","token","nodeIsInDisplayedGraph","nextOpsNameSelection","metaKey","tokensToAdd","tokensInRange","opsInRange","graph","existing","without","uniq","join","nextCenter","current","zoomToSVGCoords","bounds","y","lastRenderedLayout","setLastRenderedLayout","renderingNewLayout","focus","autocenter","allowGroupsOnlyZoomLevel","keys","SplitPanelContainer","identifier","firstInitialPercent","firstMinSize","first","ErrorBoundary","region","nodeType","SVGViewport","ref","r","interactor","graphWidth","graphHeight","height","graphHasNoMinimumZoom","onArrowKeyDown","dir","layoutWithoutExternalLinks","pickBy","nextId","closestNodeInDirection","zoomToSVGBox","onDoubleClick","maxZoom","maxAutocenterZoom","scale","SVGContainer","Math","max","sort","b","group","targetScale","scaleForSVGBounds","AssetGroupNode","graphNode","JSON","parse","onMouseEnter","onMouseLeave","overflow","AssetNode","selected","Checkbox","format","checked","preferAssetRendering","onChange","position","QueryRefresh","refreshState","dataDescription","n","LaunchAssetExecutionButton","liveDataForStale","scope","all","GraphQueryInput","items","value","placeholder","popoverPosition","second","resetErrorOnChange","graphDirectionOf","stack","pop","downstream","Boolean","push","seen","ledToTarget","repositoryDisambiguationRequired","fontWeight","userSelect","workspacePath","GroupRepoName","withMiddleTruncation","buildRepoPathForHuman","maxLength","GroupOutline","inset","background","fontFamily","FontFamily","Remark","remark","use","gfm","toPlainText","markdownCache","LRUCache","markdownToPlaintext","md","cached","get","str","processSync","toString","replace","trim","set","AssetInsetForHoverEffect","AssetNodeContainer","$selected","AssetNodeBox","$isSource","Name","marginTop","textOverflow","ASSET_NODE_NAME_MAX_LENGTH","$color","AssetNodeStatusRow","paddingTop","isEqual","AssetNodeStatusBox","children","borderBottomLeftRadius","borderBottomRightRadius","whiteSpace","lineHeight","info","buildAssetNodeStatusRow","getStepKey","runWhichFailedToMaterialize","inProgressRunIds","unstartedRunIds","materializingRunId","late","isAssetLate","lastObservation","textAlign","TimestampDisplay","timeFormat","showSeconds","showTimezone","partitionStats","numPartitions","numMissing","numMaterialized","toLocaleString","view","rel","humanizedLateString","freshnessInfo","currentMinutesLate","lastMaterializationLink","endTime","isAssetStale","AssetNodeMinimal","MinimalAssetNodeContainer","MinimalAssetNodeBox","$background","$border","MinimalName","ASSET_NODE_LIVE_FRAGMENT","ASSET_NODE_FRAGMENT","AssetNodeShowOnHover","p","AssetLatestRunSpinner","stopped","AssetLatestRunWithNotices","includeFreshness","includeRunStatus","MISSING_LIVE_DATA","runTagContent","AssetRunLink","policyOnHover","AssetNodeLink","AssetNodeLinkContainer","className","ASSET_LINK_NAME_MAX_LENGTH","ASSET_GRAPH_QUERY","notifyOnNetworkStatusChange","groupSelector","matching","hideNodesMatching","reject","buildGraphQueryItems","filterByQuery","buildGraphData","hideEdgesToNodesOutsideQuery","removeEdgesToHiddenAssets","inputs","dependencyKeys","dependsOn","solid","outputs","dependedByKeys","dependedBy","graphData","allNodes","allNodesById","groupBy","toGraphId","notSourceAsset","upstream","calculateGraphDistances","keyBy","g","start","dfsUpstream","depth","flatMap","i","dname","dfsDownstream","SUBSCRIPTION_MAX_POLL_RATE","liveResult","ASSETS_GRAPH_LIVE_QUERY","skip","buildLiveData","fetching","NetworkStatus","networkStatus","timerRef","onRefreshDebounced","setTimeout","fire","clearTimeout","useQueryRefreshAtInterval","useDidLaunchEvent","assetKeyTokens","Set","assetStepKeys","runInProgressId","slice","RunLogObserver","callback","counter","console","log","useSubscription","ASSET_LIVE_RUN_LOGS_SUBSCRIPTION","fetchPolicy","onSubscriptionData","logs","subscriptionData","pipelineRunLogs","messages","m","has","ASSET_LATEST_INFO_FRAGMENT","CONFIG_TYPE_SCHEMA_FRAGMENT","MULTIPLE_DEFINITIONS_WARNING","ASSET_DEFINITION_COLLISION_QUERY","collision","allReposWithAsset","repositories","underline","addr","ORDER","collapsible","useStateWithStorage","shown","setShown","tags","transform","AssetEventSystemTagsTable","indexOf","t","DagsterTag","AssetLineageInfoElement","lineage_info","partition_list_label","partitions","partition_list_str","asOf","modifiers","offset","placement","reduce","accum","curr","ii","collapsed","setCollapsed","ASSET_LINEAGE_FRAGMENT","xHover","setXHover","reversed","reverse","graphDataByMetadataLabel","extractNumericData","graphLabels","gridTemplateColumns","repeat","onHoverX","shrinkable","action","href","datapoints","series","numericMetadataLabels","k","append","minX","maxX","minY","maxY","existingForPartition","v","isNaN","xNumeric","l","NaN","intValue","parseInt","intRepr","floatValue","serie","xs","ys","minXNumeric","min","maxXNumeric","AssetMetadataTable","rows","DAGSTER_TYPE_FRAGMENT","dayjs","duration","relativeTime","minLate","humanize","cronSchedule","maximumLagMinutes","cronDesc","humanCronString","lagDesc","RunningBackfillsNotice","partitionSetName","RUNNING_BACKFILLS_NOTICE_QUERY","runningBackfillCount","partitionBackfillsOrError","results","LaunchAssetChoosePartitionsDialog","Dialog","isOpen","open","canEscapeKeyClose","canOutsideClickClose","onClose","setOpen","LaunchAssetChoosePartitionsDialogBody","assetJobName","upstreamAssetKeys","partitionedAssets","canLaunchPartitionBackfill","usePermissionsForLocation","launching","setLaunching","tagEditorOpen","setTagEditorOpen","setTags","previewCount","setPreviewCount","morePreviewsCount","assetHealth","mergedHealth","mergedAssetHealth","knownDimensions","dimensionTypes","missingOnly","setMissingOnly","usePartitionDimensionSelections","knownDimensionNames","modifyQueryString","selections","setSelections","keysInSelection","explodePartitionKeysInSelection","dimensionKeys","stateForKey","PartitionState","launchWithRangesAsTags","setLaunchWithRangesAsTags","canLaunchWithRangesAsTags","s","selectedRanges","selectedKeys","keysFiltered","history","useHistory","instance","LAUNCH_ASSET_CHOOSE_PARTITIONS_QUERY","launchAsBackfill","usePartitionNameForPipeline","partitionSet","partitionSetError","onLaunch","PythonErrorInfo","onLaunchAsBackfill","onLaunchAsSingleRun","CONFIG_PARTITION_SELECTION_QUERY","repositorySelector","partitionName","partitionKey","tagAndConfigData","partitionSetOrError","tagsOrError","runConfigOrError","runConfigData","yaml","allTags","startsWith","mode","selectorUnlessGraph","mutate","mutation","LAUNCH_PARTITION_BACKFILL_MUTATION","backfillParams","selector","assetSelection","partitionNames","fromFailure","launchBackfillData","launchPartitionBackfill","showBackfillSuccessToast","backfillId","showBackfillErrorToast","range","DimensionRangeWizard","partitionKeys","dimension","partitionStateForKey","dimensionKey","stateForSingleDimension","setSelected","marginLeft","marginRight","overflowY","maxHeight","showAssetKey","ButtonLink","UpstreamUnavailableWarning","TagEditor","tagsFromSession","onRequestClose","borderRadius","onRequestEdit","disabledReason","upstreamAssetHealth","upstreamUnavailable","singleDimensionKey","upstreamUnavailableSpans","assembleIntoSpans","status","Alert","span","stringForSpan","Error","DAEMON_NOT_RUNNING_ALERT_INSTANCE_FRAGMENT","USING_DEFAULT_LAUNCH_ERALERT_INSTANCE_FRAGMENT","countOrBlank","isAnyPartitioned","isPartitioned","useMaterializationAction","launchpadElement","setIsOpen","skipAllTerm","missingOrStale","isAssetMissing","optionsForButton","firstOption","MaterializeButton","useDisabledButtonTooltipFix","borderTopRightRadius","borderRight","Popover","onInteraction","nextOpen","Menu","option","text","role","minWidth","borderTopLeftRadius","confirm","useConfirmation","stateForLaunchingAssets","upstreamAssetsWithNoMaterializations","missing","sessionPresets","LAUNCH_ASSET_LOADER_RESOURCE_QUERY","resourceResult","pipeline","pipelineOrError","message","partitionSets","partitionSetsOrError","requiredResourceKeys","requiredResources","resourceKey","resources","modes","anyResourcesHaveRequiredConfig","isRequired","anyAssetsHaveRequiredConfig","assumeConfigPresent","assetOpNames","flattenGraphs","solidSelectionQuery","base","partitionsSetName","getUpstreamAssetKeys","jobsInCommon","stringify","LAUNCH_ASSET_CHECK_UPSTREAM_QUERY","assetMaterializations","executionMetadata","pick","o","ridx","LAUNCH_ASSET_EXECUTION_ASSET_NODE_FRAGMENT","isTimeseriesDimension","isTimeseriesPartition","aPartitionKey","test","dimensions","h","dim","mergedStates","health","dimensionIdx","otherDimensionSelectedKeys","states","subkey","placeholderDimensionSelection","assetData","minHeight","keysForTotals","total","success","combinations","dkeys","small","splitPartitions","currentLogicalVersion","projectedLogicalVersion","fillColor","textColor","interactive","NO_PARTITION_KEY","sortByEventTimestamp","events","definedPartitionKeys","orderedPartitionKeys","sorted","groupByPartition","serializer","defaults","encode","fromEntries","rangeText","decode","qs","entries","endsWith","opts","useQueryPersistedState","setQuery","local","setLocal","knownDimensionNamesJSON","saved","spanTextToSelections","allPartitionsRange","ranges","partitionsToText","allPartitionsSpan","buildPartitionHealthData","loadKey","__dims","partitionKeysByDimension","materializedPartitions","unmaterializedPartitions","isRangeDataInverted","primaryDimensionName","addKeyIndexesToMaterializedRanges","stateForKeyWithRangeOrdering","warn","dIndexes","d0Range","end","subranges","d0","d1","d0Idx","d1Idx","d0RangesContainingSubrangeWithD1Idx","sr","rangesCoverAll","startKey","endKey","dim0","dim1","secondaryDim","subrangeIsAll","primaryDimStartKey","primaryDimEndKey","assertUnreachable","keyCount","last","setResult","assetKeyJSONs","assetKeyJSON","missingKeyJSON","fetchedAt","run","PARTITION_HEALTH_QUERY","loaded","partitionSetsData","ASSET_JOB_PARTITION_SETS_QUERY","params","before","xAxisDefault","time","loadUsingPartitionKeys","ASSET_EVENTS_QUERY","partitionInLast","limit","assetObservations","allPartitionKeys","ASSET_MATERIALIZATION_FRAGMENT","ASSET_OBSERVATION_FRAGMENT","ConfigEditorConfigPicker","onSaveSession","onSelectPreset","onSelectPartition","presets","configGenerators","localeCompare","PickerContainer","ConfigEditorConfigGeneratorPicker","presetName","onSelect","item","ConfigEditorPartitionPicker","basePath","AppContext","repoAddressToSelector","CONFIG_PARTITIONS_QUERY","sortOrderKey","sortOrder","setSortOrder","retrieved","partitionsOrError","onClickSort","preventDefault","order","rightElement","SortButton","onMouseDown","inputProps","Intent","itemRenderer","noResults","inputValueRenderer","selectedItem","onItemSelect","defaultSelectedItem","itemPredicate","active","handleClick","button","shortcutLabel","shortcutFilter","code","altKey","onShortcut","click","configGenerator","itemListRenderer","itemsParentRef","renderItem","filteredItems","renderedPresetItems","renderedPartitionSetItems","bothTypesPresent","ulRef","solidSelection","rightIcon","IconWrapper","CONFIG_EDITOR_GENERATOR_PIPELINE_FRAGMENT","CONFIG_EDITOR_GENERATOR_PARTITION_SETS_FRAGMENT","CodeMirrorInDialogStyle","createGlobalStyle","LaunchpadTransientSessionContainer","launchpadType","initialData","useInitialDataForMode","initialSessionComplete","createSingleSession","runConfigYaml","session","setSession","LaunchpadSession","onSave","changes","newSession","LaunchpadStoredSessionsContainer","AssetLaunchpad","LaunchpadAllowedRoot","pipelinePath","JobLaunchpad","useParams","repoPath","useTrackPageView","explorerPathFromString","useJobTitle","useStripSnapshotFromPath","PIPELINE_EXECUTION_ROOT_QUERY","LaunchpadSessionLoading","LaunchpadSessionError","fallback","GUTTER_ID","rm","elt","parentNode","removeChild","showTooltipFor","tooltip","tt","document","createElement","nodeRect","getBoundingClientRect","appendChild","cloneNode","clientHeight","showTooltip","hide","CodeMirror","poll","setInterval","host","clearInterval","clearMarks","cm","lint","hasGutter","clearGutter","marked","clear","makeMarker","labels","severity","multiple","tooltips","marker","inner","annotationTooltip","ann","tip","messageHTML","innerHTML","createTextNode","updateLinting","annotationsNotSorted","annotations","lines","line","groupByLine","anns","maxSeverity","tipLabel","createDocumentFragment","formatAnnotation","markText","__annotation","setGutterMarker","onUpdateLinting","startLinting","passOptions","getAnnotations","getHelper","waitingFor","abort","off","on","getValue","arg2","operation","lintAsync","then","issues","timeout","delay","onMouseOver","box","srcElement","pos","coordsChar","spans","findMarksAt","docs","getDocs","docsEl","textContent","paddingBottom","popupTooltip","LintState","this","val","old","lintOnChange","getWrapperElement","gutters","getOption","hasLintGutter","Function","AUTO_COMPLETE_AFTER_KEY","performLint","debounce","editor","ConfigEditorStyle","ConfigEditor","_editor","moveCursor","ch","setCursor","scroll","getScrollInfo","cursorCoords","scrollIntoView","moveCursorToPath","codeMirrorDoc","getDoc","yamlDoc","configCode","findRangeInDocumentFromPath","posFromIndex","prevProps","configSchema","performInitialPass","readOnly","context","expandAutocompletionContextAtCursor","onHelpContextChange","closestMappingType","theme","lineNumbers","indentUnit","smartIndent","showCursorWhenSelecting","checkConfig","hintOptions","completeSingle","closeOnUnfocus","schema","keyMap","extraKeys","showHint","execCommand","Tab","foldGutter","editorDidMount","onBeforeChange","onConfigChange","onCursorActivity","getSelection","onBlur","onKeyUp","isHelpContextEqual","prev","ConfigEditorHelp","allInnerTypes","Container","ConfigScrollWrap","maxDepth","AutocompletionsNote","CONFIG_EDITOR_RUN_CONFIG_SCHEMA_FRAGMENT","CONFIG_EDITOR_VALIDATION_FRAGMENT","errorStackToYamlPath","fieldName","listIndex","mapKey","responseToYamlValidationResult","configYaml","response","isValid","errors","err","reason","parsed","topLevelKey","forEach","ConfigEditorModePicker","resolvedMode","modeName","onModeChange","singleMode","valid","modeError","Select","activeItem","filterable","SOLID_SELECTOR_QUERY","GRAPH_EXPLORER_SOLID_HANDLE_FRAGMENT","OpSelector","serverProvidedSubsetError","onFlattenGraphsChange","focused","setFocused","inputRef","requestScopeHandleID","ops","explodeCompositesInHandleGraph","solidHandles","flattenGraphsEnabled","f","opsFetchError","queryResultOps","errorMessage","PopoverErrorWrap","ShortcutHandler","nextQuery","onFocus","linkToPreview","setFlattenGraphs","isValidationError","stateToHint","invalid","present","none","RemoveExtraConfigButton","onRemoveExtraPaths","extraNodes","knownKeyExtraPaths","otherPaths","parts","ScaffoldConfigButton","onScaffoldMissingConfig","missingNodes","confirmationMessage","RunPreview","validation","onHighlightPath","runConfigSchema","errorsOnly","setErrorsOnly","rootCompositeChildren","allConfigTypes","rootConfigType","root","fields","field","allConfigVersion","configTypeKey","errorsAndPaths","pathKey","fieldNames","solids","rest","hasOps","itemsIn","parents","boxes","pathErrors","isPresent","pathExistsInObject","containsMissing","missingNode","isInvalid","isMissing","_","Tag","ItemsEmptyNotice","axis","ErrorListContainer","Section","SectionTitle","ErrorRow","onHighlight","RuntimeAndResourcesSection","ItemSet","RUN_PREVIEW_VALIDATION_FRAGMENT","ErrorRowContainer","hoverable","displayed","substr","truncateErrorMessage","paddingRight","object","scaffoldType","typeLookup","isSelector","config","typeParamKeys","scalarTypeKey","String","Int","Float","Bool","Any","scaffoldPipelineConfig","createTypeLookup","YAML_SYNTAX_INVALID","reducer","previewLoading","payload","preview","previewedDocument","configLoading","editorHelpContext","LaunchButtonContainer","flexGrow","zIndex","initialState","currentSession","dispatch","mounted","editorSplitPanelContainer","previewCounter","configResult","PIPELINE_EXECUTION_CONFIG_SCHEMA_QUERY","configSchemaOrError","runConfigSchemaOrError","launchButtonTitle","launchButtonWarning","currentPreviewCount","configYamlOrEmpty","sanitizeConfigYamlString","PREVIEW_CONFIG_QUERY","isLatestRequest","isPipelineConfigValid","tagsApplyingNewBaseTags","newBaseTags","preservedUserTags","bt","preset","onlyKeyAndValue","needsRefresh","sessionSolidSelection","onConfigLoading","onConfigLoaded","assign","onRefreshConfig","matchingPreset","openTagEditor","refreshableSessionBase","LaunchRootExecutionButton","LoadingOverlay","isLoading","SessionSettingsBar","SessionSettingsSpacer","TextInput","tagsFromDefinition","tagDict","toSave","tag","paths","deletePropertyPath","updatedRunConfigData","merge","warning","getVariables","uniqBy","behavior","obj","lastKey","yamlString","LoadingOverlayContainer","editState","setEditState","toError","onTagEdit","TagList","editable","flexDirection","onRemove","TagContainer","sessionTag","BackfillPartitionSelector","onCancel","onSubmit","partitionData","_setRange","stateFilters","setStateFilters","reexecute","BACKFILL_SELECTOR_QUERY","pipelineSnapshot","solidsFiltered","stepRows","buildLayout","GanttChartMode","isFailed","failedPartitions","selection","selectionSet","partitionKeysForCounts","allowed","autoApplyChanges","LaunchBackfillButton","reexecutionSteps","step","onSuccess","onError","useMutation","launchBackfill","reexecutionCount","buttonTitle","runCount","DimensionRangeInput","isTimeseries","valueString","setValueString","partitionNameJSON","partitionNameArr","names","placeholderForPartitions","tryCommit","currentTarget","onKeyDown","ClearButton","C","PartitionStatus","PartitionStateCheckboxes","byState","partitionStatusToText","useDocumentTitle"],"sourceRoot":""}